{"version":3,"sources":["../../src/index.ts","../../src/components/richtext/editor.tsx","../../src/context/editor.tsx","../../src/core/runtime.ts","../../src/core/engine.ts","../../src/lib/utils.ts","../../src/hooks/chain-execute.ts","../../src/core/chain.ts","../../src/components/ui/button.tsx","../../src/components/ui/separator.tsx","../../src/components/ui/tooltip.tsx","../../src/components/richtext/toolbar/toolbar.tsx","../../src/components/richtext/ui/history.tsx","../../src/components/richtext/ui/indent-outdent.tsx","../../src/components/ui/dialog.tsx","../../src/components/ui/dropdown-menu.tsx","../../src/components/ui/input.tsx","../../src/components/ui/label.tsx","../../src/components/ui/skeleton.tsx","../../src/components/ui/switch.tsx","../../src/components/ui/tabs.tsx","../../src/components/richtext/ui/list-selector.tsx","../../src/components/richtext/ui/table-picker.tsx","../../src/components/richtext/ui/text-aligner.tsx","../../src/components/richtext/ui/text-format.tsx","../../src/components/richtext/ui/text-style.tsx","../../src/components/richtext/ui/color-picker.tsx","../../src/components/richtext/ui/loader.tsx","../../src/components/richtext/toolbar/ToolbarChain.tsx","../../src/components/theme-provider.tsx","../../src/components/richtext/ui/link-insert.tsx","../../src/components/richtext/ui/image-picker.tsx","../../src/components/richtext/ui/image-modal.tsx"],"sourcesContent":["// src/index.ts\n\nexport type * from \"./types/globals\";\nimport \"./app/globals.css\";\nexport { RichtextEditor } from \"./components/richtext/editor\";\n","\"use client\";\nimport * as React from \"react\";\nimport { EditorProvider } from \"@/context/editor\";\nimport { DotsLoader, EditorSkeleton, SpinnerLoader } from \"./ui\";\nimport { ToolbarChain } from \"./toolbar/ToolbarChain\";\nimport type { EditorCore } from \"@/core/engine\";\n\ninterface RichtextEditorProps {\n  initialContent?: string;\n  onChange?: (value: EditorCore) => void;\n  placeholder?: string;\n  theme?: \"light\" | \"dark\" | Record<string, string>;\n\n  loader?: EditorLoader;\n  toolbar?: ToolbarChainProps;\n  style?: DesignProps;\n  className?: string;\n  aiEnhance?: boolean;\n}\n\nexport const RichtextEditor: React.FC<RichtextEditorProps> = ({\n  initialContent,\n  loader = \"shine\",\n  toolbar,\n  onChange,\n  placeholder,\n  theme,\n  style = {\n    height: \"350px\",\n    border: {\n      width: 1,\n      radius: \"md\",\n    },\n    shadow: \"md\",\n  },\n  className,\n}) => {\n  const [isMount, setIsMount] = React.useState(false);\n\n  React.useEffect(() => {\n    const isInit = setInterval(() => {\n      setIsMount(true);\n    }, 300);\n    const handleLoad = () => clearInterval(isInit);\n    window.addEventListener(\"load\", handleLoad);\n    return () => {\n      clearInterval(isInit);\n      window.removeEventListener(\"load\", handleLoad);\n    };\n  }, []);\n\n  const handleToChangeValue = React.useCallback(\n    (value: EditorCore) => {\n      if (value) {\n        onChange?.(value);\n      }\n    },\n    [onChange]\n  );\n\n  if (!isMount) {\n    switch (loader) {\n      case \"shine\":\n        return <EditorSkeleton animation=\"shine\" />;\n      case \"skeleton\":\n        return <EditorSkeleton />;\n      case \"dots\":\n        return <DotsLoader />;\n      default:\n        return <SpinnerLoader />;\n    }\n  }\n\n  return (\n    <EditorProvider\n      placeholder={placeholder}\n      initialContent={initialContent}\n      onChange={handleToChangeValue}\n      theme={theme}\n      style={style}\n      className={className}\n    >\n      <ToolbarChain {...toolbar} />\n    </EditorProvider>\n  );\n};\n","// src/context/editor.tsx\n\"use client\";\nimport * as React from \"react\";\nimport { EditorCore } from \"@/core/engine\";\nimport { cn } from \"@/lib/utils\";\n\nconst defaultCtx: EditorContextState = {\n  block: \"P\",\n  bold: false,\n  italic: false,\n  underline: false,\n  strike: false,\n  orderedList: false,\n  unorderedList: false,\n  justifyLeft: false,\n  justifyCenter: false,\n  justifyRight: false,\n  link: false,\n  foreColor: \"\",\n  backColor: \"\",\n  isHeading1: false,\n  isHeading2: false,\n  isHeading3: false,\n  isHeading4: false,\n  isHeading5: false,\n  isHeading6: false,\n  isParagraph: true,\n  isBlockquote: false,\n  isCodeBlock: false,\n  canUndo: false,\n  canRedo: false,\n  isIndented: false,\n};\n\nexport type EditorContextShape = {\n  core: EditorCore | null;\n  ctx: EditorContextState;\n  setCtx: React.Dispatch<React.SetStateAction<EditorContextState>>;\n  html: string;\n  json: object[];\n  iframeRef: React.RefObject<HTMLIFrameElement>;\n  refreshCtx: () => void;\n};\n\nconst EditorContext = React.createContext<EditorContextShape | null>(null);\n\nexport const useEditor = () => {\n  const ctx = React.useContext(EditorContext);\n  if (!ctx) throw new Error(\"useEditor must be used inside <EditorProvider>\");\n  return ctx;\n};\n\nexport interface EditorProviderProps {\n  initialContent?: string;\n  children?: React.ReactNode;\n  onChange?: (editor: EditorCore) => void;\n  placeholder?: string;\n  theme?: \"light\" | \"dark\" | Record<string, string>;\n  style?: DesignProps;\n  className?: string;\n}\n\nexport const EditorProvider: React.FC<EditorProviderProps> = ({\n  initialContent = \"Start typing...\",\n  children,\n  onChange,\n  placeholder,\n  style,\n  theme,\n  className,\n}) => {\n  const iframeRef = React.useRef<HTMLIFrameElement>(null);\n\n  const [core, setCore] = React.useState<EditorCore | null>(null);\n  const [ctx, setCtx] = React.useState(defaultCtx);\n  const [html, setHtml] = React.useState(initialContent);\n  const [json, setJson] = React.useState<object[]>([]);\n  const [isFocused, setIsFocused] = React.useState(false);\n  const stableOnChange = React.useRef(onChange);\n  const ignoreBlurRef = React.useRef(false);\n\n  React.useEffect(() => {\n    stableOnChange.current = onChange;\n  }, [onChange]);\n\n  React.useEffect(() => {\n    if (!iframeRef.current) return;\n    if (core) return; // <-- prevents reinitializing editor\n\n    const editor = new EditorCore(\n      iframeRef.current,\n      initialContent,\n      placeholder\n    );\n\n    editor.init();\n    setCore(editor);\n\n    // üß† Watch for updates from iframe runtime\n    editor.on(\"update\", () => {\n      setHtml(editor.toHTML());\n      setJson(editor.toJSON());\n      // üöÄ Fire external onChange callback\n      stableOnChange.current?.(editor);\n    });\n\n    // üß† Watch for context (bold, italics, etc.)\n    editor.on(\"context\", (data) => {\n      setCtx((prev) => ({ ...prev, ...(data as object) }));\n    });\n\n    editor.on(\"ready\", () => {\n      if (theme) {\n        editor.setTheme(theme);\n      } else {\n        editor.enableAutoTheme();\n      }\n    });\n\n    // üß† Undo/Redo state updates\n    editor.on(\"undoRedo\", (state: UndoRedoState) => {\n      setCtx((prev) => ({\n        ...prev,\n        canUndo: Boolean(state?.canUndo),\n        canRedo: Boolean(state?.canRedo),\n      }));\n    });\n    return () => editor.destroy();\n  }, []);\n\n  // Update initial content safely\n  React.useEffect(() => {\n    if (core && initialContent !== undefined) {\n      core.fromHTML(initialContent);\n    }\n  }, [initialContent]);\n\n  React.useEffect(() => {\n    const iframe = iframeRef.current;\n    if (!iframe) return;\n\n    const handleMouseEnter = () => {\n      const evt = new CustomEvent(\"editor-iframe-enter\");\n      window.dispatchEvent(evt);\n    };\n\n    iframe.addEventListener(\"mouseenter\", handleMouseEnter);\n\n    return () => {\n      iframe.removeEventListener(\"mouseenter\", handleMouseEnter);\n    };\n  }, []);\n\n  React.useEffect(() => {\n    const iframe = iframeRef.current;\n    if (!iframe) return;\n\n    const register = () => {\n      const doc = iframe.contentDocument;\n      if (!doc) return;\n\n      doc.addEventListener(\"mousedown\", () => {\n        window.dispatchEvent(new Event(\"editor-iframe-click\"));\n      });\n\n      doc.addEventListener(\"touchstart\", () => {\n        window.dispatchEvent(new Event(\"editor-iframe-click\"));\n      });\n    };\n\n    // Wait until iframe DOM is ready\n    const interval = setInterval(() => {\n      if (iframe.contentDocument?.body) {\n        register();\n        clearInterval(interval);\n      }\n    }, 100);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  React.useEffect(() => {\n    const iframe = iframeRef.current;\n    if (!iframe) return;\n    const doc = iframe.contentDocument;\n    if (!doc) return;\n\n    const handleFocus = () => setIsFocused(true);\n    const handleBlur = () => {\n      if (ignoreBlurRef.current) return;\n      setIsFocused(false);\n    };\n\n    const interval = setInterval(() => {\n      const body = doc.body;\n      if (body) {\n        body.addEventListener(\"focus\", handleFocus);\n        body.addEventListener(\"blur\", handleBlur);\n        clearInterval(interval);\n      }\n    }, 200);\n\n    return () => {\n      clearInterval(interval);\n      const body = doc.body;\n      if (body) {\n        body.removeEventListener(\"focus\", handleFocus);\n        body.removeEventListener(\"blur\", handleBlur);\n      }\n    };\n  }, [iframeRef]);\n\n  const refreshCtx = React.useCallback(() => {\n    if (!core?.doc) return;\n    const doc = core.doc;\n    const block = (doc.queryCommandValue(\"formatBlock\") || \"P\").toUpperCase();\n    setCtx((prev) => ({\n      ...prev,\n      block,\n      bold: doc.queryCommandState(\"bold\"),\n      italic: doc.queryCommandState(\"italic\"),\n      underline: doc.queryCommandState(\"underline\"),\n      strike: doc.queryCommandState(\"strikeThrough\"),\n      orderedList: doc.queryCommandState(\"insertOrderedList\"),\n      unorderedList: doc.queryCommandState(\"insertUnorderedList\"),\n      justifyLeft: doc.queryCommandState(\"justifyLeft\"),\n      justifyCenter: doc.queryCommandState(\"justifyCenter\"),\n      justifyRight: doc.queryCommandState(\"justifyRight\"),\n      link: doc.queryCommandState(\"createLink\"),\n      foreColor: doc.queryCommandValue(\"foreColor\") || \"\",\n      backColor: doc.queryCommandValue(\"hiliteColor\") || \"\",\n      isHeading1: block === \"H1\",\n      isHeading2: block === \"H2\",\n      isHeading3: block === \"H3\",\n      isHeading4: block === \"H4\",\n      isHeading5: block === \"H5\",\n      isHeading6: block === \"H6\",\n      isParagraph: block === \"P\",\n      isBlockquote: block === \"BLOCKQUOTE\",\n      isCodeBlock: block === \"PRE\",\n    }));\n  }, [core]);\n\n  const radiusClassMap = {\n    none: \"rounded-none\",\n    sm: \"rounded-sm\",\n    md: \"rounded-md\",\n    lg: \"rounded-lg\",\n    xl: \"rounded-xl\",\n    \"2xl\": \"rounded-2xl\",\n    \"3xl\": \"rounded-3xl\",\n  };\n\n  const shadowClassMap = {\n    none: \"\",\n    sm: \"shadow-sm\",\n    md: \"shadow-md\",\n    lg: \"shadow-lg\",\n    xl: \"shadow-xl\",\n  };\n\n  const borderWidth = style?.border?.width ?? 1;\n  const borderRadius = style?.border?.radius ?? \"md\";\n  const shadow = style?.shadow ?? \"none\";\n\n  const containerClass = cn(\n    \"relative transition-all duration-200 ring-0 data-[focused=true]:ring-1 ring-blue-500/70 hover:border-blue-400 cursor-text border border-border\",\n    radiusClassMap[borderRadius!],\n    shadowClassMap[shadow!]\n  );\n\n  return (\n    <EditorContext.Provider\n      value={{\n        core,\n        ctx,\n        setCtx,\n        html,\n        json,\n        iframeRef: iframeRef as React.RefObject<HTMLIFrameElement>,\n        refreshCtx: () => {},\n      }}\n    >\n      <div\n        data-focused={isFocused}\n        style={{\n          height:\n            typeof style?.height === \"string\"\n              ? style?.height\n              : `${style?.height}px`,\n          borderWidth: `${borderWidth}px`,\n        }}\n        className={cn(\n          containerClass,\n          \"w-full max-w-full overflow-hidden\",\n          className\n        )}\n        onMouseEnter={() => (ignoreBlurRef.current = true)}\n        onMouseLeave={() => (ignoreBlurRef.current = false)}\n      >\n        {/* FLEX CONTAINER FOR TOOLBAR + IFRAME */}\n        <div className=\"flex flex-col w-full h-full overflow-hidden\">\n          {/* Toolbar */}\n          <div className=\"shrink-0 w-full\">{children}</div>\n\n          {/* Iframe */}\n          <iframe\n            ref={iframeRef}\n            style={{\n              height: (() => {\n                const h = style?.height;\n                if (typeof h === \"string\") {\n                  if (h.includes(\"%\")) return `calc(${h} - 42px)`;\n                  if (h.includes(\"px\")) return `${parseFloat(h) - 42}px`;\n                }\n                if (typeof h === \"number\") return `${h - 42}px`;\n                return \"calc(100% - 42px)\";\n              })(),\n            }}\n            className=\"\n              flex-1\n              block\n              w-full\n              border-0\n              bg-background\n              rounded-b\n              min-h-0\n            \"\n            sandbox=\"allow-same-origin allow-scripts allow-forms allow-popups\"\n          />\n        </div>\n      </div>\n    </EditorContext.Provider>\n  );\n};\n","// src/core/runtime.ts\nexport function editorRuntimeInit() {\n  let lastRange: Range | null = null;\n  const undoStack: { html: string; caret: any }[] = [];\n  const redoStack: { html: string; caret: any }[] = [];\n\n  /* ===========================================================\n TABLE RESIZE MODULE ‚Äî FINAL VERSION\n=========================================================== */\n\n  type TableHandle =\n    | \"col-left\"\n    | \"col-right\"\n    | \"row-top\"\n    | \"row-bottom\"\n    | \"corner-tl\"\n    | \"corner-tr\"\n    | \"corner-bl\"\n    | \"corner-br\";\n\n  const RESIZE_SENSITIVITY = 0.35; // smooth small increments\n\n  function insertTable(rows = 2, cols = 2) {\n    const wrapper = document.createElement(\"div\");\n    wrapper.className = \"editor-table-wrapper\";\n    wrapper.style.position = \"relative\";\n    wrapper.style.width = \"100%\";\n\n    const table = document.createElement(\"table\");\n    table.style.borderCollapse = \"collapse\";\n    table.style.width = \"100%\";\n    table.style.tableLayout = \"fixed\";\n    wrapper.appendChild(table);\n\n    for (let r = 0; r < rows; r++) {\n      const tr = document.createElement(\"tr\");\n      for (let c = 0; c < cols; c++) {\n        const td = document.createElement(\"td\");\n        td.style.border = \"1px solid #ccc\";\n        td.style.padding = \"6px\";\n        td.innerHTML = \"<br>\";\n        tr.appendChild(td);\n      }\n      table.appendChild(tr);\n    }\n\n    document.execCommand(\n      \"insertHTML\",\n      false,\n      wrapper.outerHTML + \"<p><br></p>\"\n    );\n\n    setTimeout(() => {\n      const tbl = document.body.querySelector(\n        \"table:last-of-type\"\n      ) as HTMLTableElement | null;\n      if (tbl) {\n        equalizeColumns(tbl);\n        addTableResizeHandles(tbl);\n      }\n    }, 15);\n  }\n\n  function equalizeColumns(table: HTMLTableElement) {\n    const first = table.rows[0];\n    if (!first) return;\n\n    const count = first.cells.length;\n    const pct = 100 / count;\n\n    for (let r = 0; r < table.rows.length; r++) {\n      for (let c = 0; c < count; c++) {\n        table.rows[r].cells[c].style.width = pct + \"%\";\n      }\n    }\n  }\n\n  function addTableResizeHandles(table: HTMLTableElement) {\n    const wrapper = table.parentElement as HTMLElement;\n    wrapper.style.position = \"relative\";\n\n    wrapper.querySelectorAll(\".table-resize-handle\").forEach((n) => n.remove());\n\n    const rect = () => table.getBoundingClientRect();\n    const wrapRect = () => wrapper.getBoundingClientRect();\n\n    function makeHandle(handle: TableHandle) {\n      const el = document.createElement(\"div\");\n      el.className = \"table-resize-handle\";\n      el.dataset.handle = handle;\n\n      el.addEventListener(\"mouseenter\", () =>\n        wrapper.classList.add(\"table-active-border\")\n      );\n      el.addEventListener(\"mouseleave\", () =>\n        wrapper.classList.remove(\"table-active-border\")\n      );\n\n      wrapper.appendChild(el);\n      el.style.position = \"absolute\";\n      return el;\n    }\n\n    const colLeft = makeHandle(\"col-left\");\n    const colRight = makeHandle(\"col-right\");\n    const rowTop = makeHandle(\"row-top\");\n    const rowBottom = makeHandle(\"row-bottom\");\n    const cornerTL = makeHandle(\"corner-tl\");\n    const cornerTR = makeHandle(\"corner-tr\");\n    const cornerBL = makeHandle(\"corner-bl\");\n    const cornerBR = makeHandle(\"corner-br\");\n\n    function position() {\n      const r = rect();\n      const w = wrapRect();\n      const cornerSize = 12;\n\n      colLeft.style.left = r.left - w.left - 2 + \"px\";\n      colLeft.style.top = \"0px\";\n      colLeft.style.width = \"2px\";\n      colLeft.style.height = table.offsetHeight + \"px\";\n      colLeft.style.cursor = \"col-resize\";\n\n      colRight.style.left = r.right - w.left - 2 + \"px\";\n      colRight.style.top = \"0px\";\n      colRight.style.width = \"2px\";\n      colRight.style.height = table.offsetHeight + \"px\";\n      colRight.style.cursor = \"col-resize\";\n\n      rowTop.style.top = r.top - w.top - 2 + \"px\";\n      rowTop.style.left = \"0px\";\n      rowTop.style.height = \"2px\";\n      rowTop.style.width = table.offsetWidth + \"px\";\n      rowTop.style.cursor = \"row-resize\";\n\n      rowBottom.style.top = r.bottom - w.top - 2 + \"px\";\n      rowBottom.style.left = \"0px\";\n      rowBottom.style.height = \"2px\";\n      rowBottom.style.width = table.offsetWidth + \"px\";\n      rowBottom.style.cursor = \"row-resize\";\n\n      cornerTL.style.left = r.left - w.left - cornerSize / 2 + \"px\";\n      cornerTL.style.top = r.top - w.top - cornerSize / 2 + \"px\";\n      cornerTL.style.width = cornerSize + \"px\";\n      cornerTL.style.height = cornerSize + \"px\";\n      cornerTL.style.cursor = \"nwse-resize\";\n\n      cornerTR.style.left = r.right - w.left - cornerSize / 2 + \"px\";\n      cornerTR.style.top = r.top - w.top - cornerSize / 2 + \"px\";\n      cornerTR.style.width = cornerSize + \"px\";\n      cornerTR.style.height = cornerSize + \"px\";\n      cornerTR.style.cursor = \"nesw-resize\";\n\n      cornerBL.style.left = r.left - w.left - cornerSize / 2 + \"px\";\n      cornerBL.style.top = r.bottom - w.top - cornerSize / 2 + \"px\";\n      cornerBL.style.width = cornerSize + \"px\";\n      cornerBL.style.height = cornerSize + \"px\";\n      cornerBL.style.cursor = \"nesw-resize\";\n\n      cornerBR.style.left = r.right - w.left - cornerSize / 2 + \"px\";\n      cornerBR.style.top = r.bottom - w.top - cornerSize / 2 + \"px\";\n      cornerBR.style.width = cornerSize + \"px\";\n      cornerBR.style.height = cornerSize + \"px\";\n      cornerBR.style.cursor = \"nwse-resize\";\n    }\n\n    position();\n    new ResizeObserver(position).observe(table);\n\n    /* ---------------- DRAG LOGIC ---------------- */\n\n    let active: TableHandle | null = null;\n    let startX = 0;\n    let startY = 0;\n    let startW = 0;\n    let startRowHeight = 0;\n\n    wrapper.addEventListener(\"mousedown\", (e) => {\n      const target = (e.target as HTMLElement)?.closest(\n        \".table-resize-handle\"\n      ) as HTMLElement | null;\n      if (!target) return;\n\n      active = target.dataset.handle as TableHandle;\n\n      startX = e.clientX;\n      startY = e.clientY;\n      startW = table.offsetWidth;\n      startRowHeight = table.rows[0].cells[0].offsetHeight; // üî• FIXED: use row height\n\n      e.preventDefault();\n      document.addEventListener(\"mousemove\", doDrag);\n      document.addEventListener(\"mouseup\", stopDrag);\n    });\n\n    function doDrag(e: MouseEvent) {\n      if (!active) return;\n\n      const rawDx = e.clientX - startX;\n      const rawDy = e.clientY - startY;\n\n      const dx = rawDx * RESIZE_SENSITIVITY;\n      const dy = rawDy * RESIZE_SENSITIVITY;\n\n      // ---- Horizontal ----\n      if (active === \"col-right\") {\n        table.style.width = Math.max(80, startW + dx) + \"px\";\n      }\n      if (active === \"col-left\") {\n        table.style.width = Math.max(80, startW - dx) + \"px\";\n      }\n\n      // ---- Vertical ----\n      if (active === \"row-bottom\") {\n        const newH = Math.max(20, startRowHeight + dy);\n        resizeRows(newH);\n      }\n      if (active === \"row-top\") {\n        const newH = Math.max(20, startRowHeight - dy);\n        resizeRows(newH);\n      }\n\n      // ---- Corner ----\n      if (active.startsWith(\"corner\")) {\n        const newW = Math.max(80, startW + dx);\n        const newH = Math.max(20, startRowHeight + dy);\n\n        table.style.width = newW + \"px\";\n        resizeRows(newH);\n      }\n\n      position();\n    }\n\n    function resizeRows(h: number) {\n      for (const row of table.rows) {\n        for (const cell of row.cells) {\n          cell.style.height = h + \"px\";\n        }\n      }\n    }\n\n    function stopDrag() {\n      active = null;\n      document.removeEventListener(\"mousemove\", doDrag);\n      document.removeEventListener(\"mouseup\", stopDrag);\n    }\n  }\n\n  /**\n   * ======================================\n   * @Default Functions\n   */\n  function notifyReadySafely() {\n    const check = setInterval(() => {\n      if (document.body && document.body.isContentEditable) {\n        clearInterval(check);\n        parent.postMessage({ type: \"IFRAME_READY\" }, \"*\");\n      }\n    }, 50);\n  }\n\n  function saveSelection() {\n    const s = window.getSelection();\n    if (s && s.rangeCount > 0) lastRange = s.getRangeAt(0);\n  }\n\n  function restoreSelection() {\n    if (!lastRange) return;\n    const s = window.getSelection();\n    s?.removeAllRanges();\n    s?.addRange(lastRange);\n  }\n\n  // üß≠ Utility: get and set caret position using node path + offset\n  function getCaretPosition() {\n    const sel = window.getSelection();\n    if (!sel || sel.rangeCount === 0) return null;\n    const range = sel.getRangeAt(0);\n    const path: number[] = [];\n\n    let node: Node | null = range.startContainer;\n\n    while (node && node !== document.body) {\n      const parentNode: Node | null = node.parentNode;\n      if (!parentNode) break;\n\n      // ‚úÖ Ensure node is a ChildNode before using in indexOf\n      const childNodeList = Array.from(parentNode.childNodes);\n      const index = childNodeList.indexOf(node as ChildNode); // <-- Cast here safely\n\n      path.unshift(index);\n      node = parentNode;\n    }\n\n    return { path, offset: range.startOffset };\n  }\n\n  function setCaretPosition(pos: { path: number[]; offset: number } | null) {\n    if (!pos) return;\n    let node: Node | null = document.body;\n    for (const index of pos.path) {\n      if (!node?.childNodes[index]) break;\n      node = node.childNodes[index];\n    }\n\n    if (!node) return;\n    const range = document.createRange();\n    try {\n      range.setStart(node, Math.min(pos.offset, node.textContent?.length || 0));\n      range.collapse(true);\n      const sel = window.getSelection();\n      sel?.removeAllRanges();\n      sel?.addRange(range);\n    } catch {\n      /* ignore invalid positions */\n    }\n  }\n\n  function closestElement(\n    node: Node | null,\n    selectors: string\n  ): HTMLElement | null {\n    if (!node) return null;\n\n    let el: HTMLElement | null =\n      node.nodeType === Node.ELEMENT_NODE\n        ? (node as HTMLElement)\n        : node.parentElement;\n\n    while (el) {\n      if (el.matches(selectors)) return el;\n      el = el.parentElement;\n    }\n\n    return null;\n  }\n\n  function send(type: string, payload: Record<string, unknown> = {}) {\n    parent.postMessage(Object.assign({ type }, payload), \"*\");\n  }\n\n  if (\n    document.readyState === \"complete\" ||\n    document.readyState === \"interactive\"\n  ) {\n    notifyReadySafely();\n  } else {\n    window.addEventListener(\"DOMContentLoaded\", notifyReadySafely);\n  }\n\n  /** üß± Ensures a clean paragraph root when body is empty */\n  function ensureParagraphExists() {\n    const body = document.body;\n    const html = body.innerHTML\n      .replace(/<br\\s*\\/?>/gi, \"\")\n      .replace(/<\\/?p[^>]*>/gi, \"\")\n      .replace(/<\\/?div[^>]*>/gi, \"\")\n      .replace(/&nbsp;/g, \"\")\n      .replace(/\\s+/g, \"\")\n      .trim();\n\n    if (html.length === 0) {\n      body.innerHTML = \"<p><br></p>\";\n\n      const firstP = body.querySelector(\"p\");\n      const range = document.createRange();\n      const sel = window.getSelection();\n      if (firstP) {\n        range.setStart(firstP, 0);\n        range.collapse(true);\n        sel?.removeAllRanges();\n        sel?.addRange(range);\n      }\n    }\n  }\n\n  /** üí¨ Placeholder system */\n  function setupPlaceholder() {\n    const body = document.body;\n\n    function isVisuallyEmpty(): boolean {\n      const html = body.innerHTML\n        .replace(/<br\\s*\\/?>/gi, \"\")\n        .replace(/<\\/?p[^>]*>/gi, \"\")\n        .replace(/<\\/?div[^>]*>/gi, \"\")\n        .replace(/&nbsp;/g, \"\")\n        .replace(/\\s+/g, \"\")\n        .trim();\n      return html.length === 0;\n    }\n\n    function updatePlaceholder() {\n      if (isVisuallyEmpty()) body.classList.add(\"empty\");\n      else body.classList.remove(\"empty\");\n    }\n\n    const style = document.createElement(\"style\");\n    style.textContent = `\n      body.empty::before {\n        content: attr(data-placeholder);\n        color: var(--editor-placeholder);\n        pointer-events: none;\n        position: absolute;\n        top: 0.75rem;\n        left: 0.75rem;\n        opacity: 0.6;\n      }\n    `;\n    document.head.appendChild(style);\n\n    body.addEventListener(\"input\", updatePlaceholder);\n    body.addEventListener(\"focus\", updatePlaceholder);\n    body.addEventListener(\"blur\", updatePlaceholder);\n    updatePlaceholder();\n  }\n\n  // üß† Initialize placeholder & baseline\n  setupPlaceholder();\n  ensureParagraphExists();\n  pushUndoState();\n\n  // üîÅ Selection tracking\n  document.addEventListener(\"selectionchange\", () => {\n    // Detect indentation\n    const sel = window.getSelection();\n    // Anchor Link Handle Block\n    let isLink = false;\n    try {\n      isLink = document.queryCommandState(\"createLink\");\n    } catch {\n      isLink = false;\n    }\n\n    // manual fallback detection\n    if (sel && sel.anchorNode) {\n      const anchorElement =\n        sel.anchorNode.nodeType === Node.ELEMENT_NODE\n          ? (sel.anchorNode as HTMLElement)\n          : (sel.anchorNode.parentElement as HTMLElement | null);\n      if (anchorElement) {\n        const linkParent = anchorElement.closest(\"a\");\n        if (linkParent) isLink = true;\n      }\n    }\n\n    function isInside(tagNames: string[]): boolean {\n      const sel = window.getSelection();\n      if (!sel || sel.rangeCount === 0) return false;\n\n      let node: Node | null = sel.anchorNode;\n      if (!node) return false;\n\n      if (node.nodeType === Node.TEXT_NODE) node = node.parentNode;\n\n      while (node && node !== document.body) {\n        if (node.nodeType === Node.ELEMENT_NODE) {\n          const tag = (node as HTMLElement).tagName.toUpperCase();\n          if (tagNames.includes(tag)) return true;\n        }\n        node = node.parentNode;\n      }\n      return false;\n    }\n\n    const payload = {\n      block: document.queryCommandValue(\"formatBlock\") || \"P\",\n      bold: document.queryCommandState(\"bold\"),\n      italic: document.queryCommandState(\"italic\"),\n      underline: document.queryCommandState(\"underline\"),\n      strike: document.queryCommandState(\"strikeThrough\"),\n      orderedList: document.queryCommandState(\"insertOrderedList\"),\n      unorderedList: document.queryCommandState(\"insertUnorderedList\"),\n      justifyLeft: document.queryCommandState(\"justifyLeft\"),\n      justifyCenter: document.queryCommandState(\"justifyCenter\"),\n      justifyRight: document.queryCommandState(\"justifyRight\"),\n      foreColor: document.queryCommandValue(\"foreColor\"),\n      backColor: document.queryCommandValue(\"hiliteColor\"),\n    };\n\n    payload.bold = isInside([\"B\", \"STRONG\"]);\n    payload.italic = isInside([\"I\", \"EM\"]);\n    payload.underline = isInside([\"U\"]);\n    payload.strike = isInside([\"S\", \"STRIKE\"]);\n\n    let isIndented = false;\n\n    if (sel && sel.anchorNode) {\n      const el =\n        (sel.anchorNode.nodeType === Node.ELEMENT_NODE\n          ? sel.anchorNode\n          : sel.anchorNode.parentElement) || null;\n\n      const block = (el as HTMLElement)?.closest(\n        \"p, div, li, blockquote, pre\"\n      ) as HTMLElement | null;\n      if (block) {\n        const style = window.getComputedStyle(block);\n        const marginLeft = parseFloat(style.marginLeft || \"0\");\n        const paddingLeft = parseFloat(style.paddingLeft || \"0\");\n        isIndented =\n          marginLeft > 5 ||\n          paddingLeft > 5 ||\n          /^\\s|(&nbsp;)+/.test(block.innerHTML);\n      }\n    }\n    (payload as EditorContextState).isIndented = isIndented;\n    (payload as EditorContextState).link = isLink;\n    const blk = String(payload.block).toUpperCase();\n    (payload as EditorContextState).isHeading1 = blk === \"H1\";\n    (payload as EditorContextState).isHeading2 = blk === \"H2\";\n    (payload as EditorContextState).isHeading3 = blk === \"H3\";\n    (payload as EditorContextState).isHeading4 = blk === \"H4\";\n    (payload as EditorContextState).isHeading5 = blk === \"H5\";\n    (payload as EditorContextState).isHeading6 = blk === \"H6\";\n    (payload as EditorContextState).isParagraph = blk === \"P\";\n    (payload as EditorContextState).isBlockquote = blk === \"BLOCKQUOTE\";\n    (payload as EditorContextState).isCodeBlock = blk === \"PRE\";\n\n    send(\"CONTEXT\", payload);\n    saveSelection();\n  });\n\n  // üß± Undo/Redo state\n  function pushUndoState() {\n    const runtimeScript = document.getElementById(\"__EDITOR_RUNTIME__\");\n    const clone = document.body.cloneNode(true) as HTMLElement;\n    const runtimeClone = clone.querySelector(\"#__EDITOR_RUNTIME__\");\n    if (runtimeClone) runtimeClone.remove();\n\n    const currentHTML = clone.innerHTML.trim();\n    const caret = getCaretPosition();\n\n    const last = undoStack[undoStack.length - 1];\n    if (last && typeof last === \"object\" && last.html === currentHTML) return;\n\n    undoStack.push({ html: currentHTML, caret });\n    redoStack.length = 0;\n\n    send(\"UNDO_REDO_STATE\", {\n      canUndo: undoStack.length > 1,\n      canRedo: redoStack.length > 0,\n    });\n  }\n\n  function doUndo() {\n    if (undoStack.length > 1) {\n      const current = undoStack.pop();\n      if (current) redoStack.push(current);\n\n      const prev = undoStack[undoStack.length - 1];\n      document.body.innerHTML = prev.html || \"<p><br></p>\";\n      ensureParagraphExists();\n      setCaretPosition(prev.caret || null);\n\n      send(\"UPDATE\", { html: prev.html });\n    }\n\n    send(\"UNDO_REDO_STATE\", {\n      canUndo: undoStack.length > 1,\n      canRedo: redoStack.length > 0,\n    });\n  }\n\n  function doRedo() {\n    if (redoStack.length > 0) {\n      const next = redoStack.pop();\n      if (next) {\n        undoStack.push(next);\n        document.body.innerHTML = next.html || \"<p><br></p>\";\n        ensureParagraphExists();\n        setCaretPosition(next.caret || null);\n        send(\"UPDATE\", { html: next.html });\n      }\n    }\n\n    send(\"UNDO_REDO_STATE\", {\n      canUndo: undoStack.length > 1,\n      canRedo: redoStack.length > 0,\n    });\n  }\n\n  function breakInlineFormatting() {\n    const sel = window.getSelection();\n    if (!sel || sel.rangeCount === 0) return;\n\n    const range = sel.getRangeAt(0);\n\n    // Only apply if selection is collapsed (typing)\n    if (!range.collapsed) return;\n\n    const container = range.startContainer;\n\n    // If inside bold/italic/underline ‚Äî break out\n    const styledParent = closestElement(\n      container,\n      \"b,strong,i,em,u,span[style]\"\n    );\n\n    if (styledParent) {\n      const after = document.createTextNode(\"\");\n      styledParent.parentNode?.insertBefore(after, styledParent.nextSibling);\n\n      const newRange = document.createRange();\n      newRange.setStart(after, 0);\n      newRange.collapse(true);\n\n      sel.removeAllRanges();\n      sel.addRange(newRange);\n    }\n  }\n\n  // üß† Update html on edit\n  document.body.addEventListener(\"input\", () => {\n    ensureParagraphExists();\n    pushUndoState();\n    send(\"UPDATE\", { html: document.body.innerHTML });\n  });\n\n  // üßπ Clean paste\n  document.addEventListener(\"paste\", (e: ClipboardEvent) => {\n    e.preventDefault();\n    const text = e.clipboardData?.getData(\"text/plain\") || \"\";\n    document.execCommand(\"insertText\", false, text);\n  });\n\n  // üì© Commands from parent\n  window.addEventListener(\"message\", (e: MessageEvent) => {\n    const { type, cmd, value, html, block } = e.data || {};\n\n    if (type === \"EXEC\" && cmd === \"undo\") return void doUndo();\n    if (type === \"EXEC\" && cmd === \"redo\") return void doRedo();\n\n    if (type === \"EXEC\") {\n      restoreSelection();\n      document.execCommand(cmd, false, value ?? null);\n\n      // ‚õî Break formatting continuity after selection\n      breakInlineFormatting();\n\n      document.body.dispatchEvent(new Event(\"input\"));\n    }\n\n    if (type === \"FORMAT_BLOCK\") {\n      restoreSelection();\n      document.execCommand(\"formatBlock\", false, block || \"P\");\n      document.body.dispatchEvent(new Event(\"input\"));\n    }\n\n    if (type === \"INSERT_HTML\") {\n      restoreSelection();\n      document.execCommand(\"insertHTML\", false, html || \"\");\n      document.body.dispatchEvent(new Event(\"input\"));\n    }\n\n    if (type === \"SET_HTML\") {\n      document.body.innerHTML = html || \"\";\n      ensureParagraphExists();\n      document.body.dispatchEvent(new Event(\"input\"));\n    }\n\n    if (type === \"CUSTOM_INDENT\") {\n      const ev = new KeyboardEvent(\"keydown\", { key: \"Tab\" });\n      document.dispatchEvent(ev);\n    }\n\n    if (type === \"CUSTOM_OUTDENT\") {\n      const ev = new KeyboardEvent(\"keydown\", { key: \"Tab\", shiftKey: true });\n      document.dispatchEvent(ev);\n    }\n\n    if (type === \"INSERT_TABLE\") {\n      restoreSelection();\n      insertTable(e.data.rows, e.data.cols);\n      document.body.dispatchEvent(new Event(\"input\"));\n    }\n  });\n\n  // ‚å®Ô∏è Keyboard shortcuts\n  document.addEventListener(\"keydown\", (ev: KeyboardEvent) => {\n    // --- Prevent bold/italic/underline from carrying after Enter ---\n    if (ev.key === \"Enter\") {\n      const sel = window.getSelection();\n      if (!sel || sel.rangeCount === 0) return;\n\n      const range = sel.getRangeAt(0);\n      if (!range.collapsed) return; // don't run on multi-line selection\n\n      const container =\n        range.startContainer.nodeType === Node.TEXT_NODE\n          ? range.startContainer.parentElement\n          : range.startContainer;\n\n      const styledParent = closestElement(\n        container,\n        \"b,strong,i,em,u,span[style]\"\n      );\n      if (styledParent) {\n        ev.preventDefault(); // stop browser default carry-over\n\n        // Create a clean normal <p><br></p> block\n        const newP = document.createElement(\"p\");\n        newP.innerHTML = \"<br>\";\n\n        // Insert AFTER current block\n        const currentBlock = styledParent.closest(\"p,div,li,blockquote,pre\");\n        currentBlock?.parentNode?.insertBefore(newP, currentBlock.nextSibling);\n\n        // Move caret\n        const newRange = document.createRange();\n        newRange.setStart(newP, 0);\n        newRange.collapse(true);\n\n        sel.removeAllRanges();\n        sel.addRange(newRange);\n\n        // ensure undo state + context updates\n        document.body.dispatchEvent(new Event(\"input\"));\n        return;\n      }\n    }\n\n    if (ev.key === \"Tab\") {\n      ev.preventDefault();\n      const sel = window.getSelection();\n      const caretBefore = getCaretPosition();\n      if (!sel || sel.rangeCount === 0) return;\n      const range = sel.getRangeAt(0);\n      const node = range.startContainer as Node;\n      let el: HTMLElement | null = null;\n      if (node.nodeType === Node.ELEMENT_NODE) el = node as HTMLElement;\n      else if ((node as HTMLElement).parentElement)\n        el = (node as HTMLElement).parentElement;\n      const line = el?.closest(\n        \"p, div, pre, blockquote, li\"\n      ) as HTMLElement | null;\n      if (!line) return;\n\n      let textNode: ChildNode | null = line.firstChild;\n      while (textNode && textNode.nodeType !== Node.TEXT_NODE)\n        textNode = textNode.nextSibling;\n      if (!textNode) {\n        textNode = document.createTextNode(\"\");\n        line.insertBefore(textNode, line.firstChild);\n      }\n\n      if (!ev.shiftKey) {\n        const indent = \"\\u00A0\\u00A0\\u00A0\\u00A0\";\n        if (range.startOffset === 0 && range.startContainer === textNode)\n          textNode.textContent = indent + textNode.textContent;\n        else {\n          const indentNode = document.createTextNode(indent);\n          range.insertNode(indentNode);\n        }\n        const newRange = document.createRange();\n        if (range.startContainer === textNode) newRange.setStart(textNode, 4);\n        else newRange.setStartAfter(line.firstChild!);\n        newRange.collapse(true);\n        sel.removeAllRanges();\n        sel.addRange(newRange);\n      } else {\n        const firstText = textNode.textContent || \"\";\n        const updated = firstText.replace(/^[\\u00A0\\s]{1,4}/, \"\");\n        textNode.textContent = updated;\n        const html = line.innerHTML.replace(/^(&nbsp;|\\s){1,4}/, \"\");\n        if (line.innerHTML !== html) line.innerHTML = html || \"<br>\";\n        const newRange = document.createRange();\n        if (line.firstChild) newRange.setStart(line.firstChild, 0);\n        else newRange.selectNodeContents(line);\n        newRange.collapse(true);\n        sel.removeAllRanges();\n        sel.addRange(newRange);\n      }\n\n      setCaretPosition(caretBefore);\n      document.body.dispatchEvent(new Event(\"input\"));\n      return;\n    }\n\n    if (ev.ctrlKey || ev.metaKey) {\n      const k = ev.key.toLowerCase();\n      if (k === \"z\") {\n        ev.preventDefault();\n        document.execCommand(\"undo\");\n      }\n      if (k === \"y\") {\n        ev.preventDefault();\n        document.execCommand(\"redo\");\n      }\n      if (k === \"b\") {\n        ev.preventDefault();\n        document.execCommand(\"bold\");\n      }\n      if (k === \"i\") {\n        ev.preventDefault();\n        document.execCommand(\"italic\");\n      }\n      if (k === \"u\") {\n        ev.preventDefault();\n        document.execCommand(\"underline\");\n      }\n    }\n  });\n\n  window.addEventListener(\"error\", (err) => {\n    parent.postMessage({ type: \"IFRAME_ERROR\", message: err.message }, \"*\");\n  });\n}\n","import { editorRuntimeInit } from \"@/core/runtime\";\n\nexport interface EditorNode {\n  type: string;\n  content?: string;\n  attrs?: Record<string, EditorAttrs>;\n  children?: EditorNode[];\n}\n\ntype EditorAttrs = string | number | boolean | object | null | undefined;\n\n/**\n * üß† EditorCore ‚Äî standalone controller for the RichtextEditor iframe.\n * Handles runtime injection, postMessage, serialization, theming, and HTML structure setup.\n */\nexport class EditorCore {\n  iframe: HTMLIFrameElement;\n  win: Window | null = null;\n  doc: Document | null = null;\n  html = \"\";\n  placeholder: string;\n  isReady = false;\n  listeners: Partial<{\n    [K in keyof EditorEvents]: Array<(data: EditorEvents[K]) => void>;\n  }> = {};\n  theme: \"light\" | \"dark\" | Record<string, string> = \"light\";\n  autoThemeListener?: MediaQueryList;\n\n  constructor(\n    iframe: HTMLIFrameElement,\n    value = \"\",\n    placeholder = \"Write something...\"\n  ) {\n    this.iframe = iframe;\n    this.placeholder = placeholder;\n    const clean = (value || \"\").trim();\n    this.html = clean.length === 0 ? \"<p><br></p>\" : clean;\n  }\n\n  /**\n   * üöÄ Initializes the editor iframe with full HTML + runtime.\n   * Automatically injects styling and runtime script.\n   */\n  init() {\n    const iframe = this.iframe;\n    const doc = iframe.contentDocument;\n    if (!doc) throw new Error(\"‚ùå No iframe document available\");\n\n    this.doc = doc;\n    this.win = iframe.contentWindow;\n\n    const htmlTemplate = `\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <style>\n      :root {\n        --editor-bg: #ffffff;\n        --editor-fg: #111111;\n        --editor-accent: #3b82f6;\n        --editor-placeholder: rgba(100, 116, 139, 0.6);\n        --editor-border: #e5e7eb;\n        --editor-code-bg: #f9fafb;\n        --editor-blockquote-border: #3b82f6;\n        --editor-hr: #d1d5db;\n        --tbl-highlight: #3b82f6;\n\n        --scroll-thumb: color-mix(in srgb, var(--editor-fg) 40%, transparent 60%);\n        --scroll-thumb-hover: color-mix(in srgb, var(--editor-fg) 55%, transparent 45%);\n        --scroll-track: color-mix(in srgb, var(--editor-bg) 85%, transparent 15%);\n      }\n\n      [data-theme=\"dark\"] {\n        --editor-bg: #0a0a0a;\n        --editor-fg: #e5e7eb;\n        --editor-accent: #60a5fa;\n        --editor-placeholder: rgba(148, 163, 184, 0.6);\n        --editor-border: #1f2937;\n        --editor-code-bg: #111827;\n        --editor-blockquote-border: #60a5fa;\n        --editor-hr: #374151;\n\n        --scroll-thumb: color-mix(in srgb, #ffffff 40%, transparent 60%);\n        --scroll-thumb-hover: color-mix(in srgb, #ffffff 55%, transparent 45%);\n      }\n\n      html, body {\n        height: 100%;\n        width: 100%;\n        margin: 0;\n        padding: 0;\n        box-sizing: border-box;\n        background: var(--editor-bg);\n        color: var(--editor-fg);\n        font-family: system-ui, -apple-system, sans-serif;\n        line-height: 1.4;\n        cursor: text;\n        transition: background-color 0.25s ease, color 0.25s ease, caret-color 0.25s ease;\n\n        /* --- Default: NO scroll, no scrollbar --- */\n        overflow-y: hidden;\n        scrollbar-width: none; /* Firefox */\n      }\n\n      /* Hide scrollbar (WebKit) by default */\n      html::-webkit-scrollbar,\n      body::-webkit-scrollbar {\n        width: 0px;\n        height: 0px;\n      }\n\n      /* ---------------------------------------------------------\n         ON FOCUS ‚Äî enable scroll + premium scrollbar\n      --------------------------------------------------------- */\n      html:focus-within,\n      body:focus-within {\n        overflow-y: auto !important;\n        scrollbar-width: thin;\n        scrollbar-color: var(--scroll-thumb) transparent;\n      }\n\n      html:focus-within::-webkit-scrollbar,\n      body:focus-within::-webkit-scrollbar {\n        width: 8px;\n        height: 8px;\n      }\n\n      html:focus-within::-webkit-scrollbar-thumb,\n      body:focus-within::-webkit-scrollbar-thumb {\n        background: var(--scroll-thumb);\n        border-radius: 999px;\n        opacity: 0.8;\n        transition: opacity 0.25s ease;\n      }\n\n      html:focus-within::-webkit-scrollbar-thumb:hover,\n      body:focus-within::-webkit-scrollbar-thumb:hover {\n        background: var(--scroll-thumb-hover);\n      }\n\n      /* ---------------------------------------------------------\n         Editor basics\n      --------------------------------------------------------- */\n      body {\n        padding: 0.75rem;\n        display: flex;\n        flex-direction: column;\n        caret-color: var(--editor-accent);\n      }\n\n      [contenteditable]:focus {\n        outline: none;\n      }\n\n      *, *::before, *::after {\n        box-sizing: inherit;\n      }\n\n      p, div, h1, h2, h3, h4, h5, h6, pre, blockquote, table, li {\n        caret-color: var(--editor-accent);\n      }\n\n      p, h1, h2, h3, h4, h5, h6, pre, blockquote {\n        margin: 0 0 0.6em;\n      }\n\n      a {\n        color: var(--editor-accent);\n        text-decoration: underline;\n      }\n\n      blockquote {\n        border-left: 3px solid var(--editor-blockquote-border);\n        padding-left: 1em;\n        opacity: 0.9;\n      }\n\n      pre {\n        background: var(--editor-code-bg);\n        padding: 0.6em;\n        border-radius: 6px;\n        font-family: ui-monospace, monospace;\n      }\n\n      hr {\n        border: none;\n        border-top: 1px solid var(--editor-hr);\n        margin: 1em 0;\n        opacity: 0.7;\n      }\n\n      table {\n        border-collapse: collapse;\n        width: 100%;\n        margin-bottom: 1em;\n      }\n\n      td, th {\n        border: 1px solid color-mix(in srgb, var(--editor-fg) 25%, transparent);\n        padding: 6px;\n      }\n\n      /* ---------------------------------------------------------\n         Placeholder\n      --------------------------------------------------------- */\n      body.empty::before {\n        content: attr(data-placeholder);\n        color: var(--editor-placeholder);\n        pointer-events: none;\n        position: absolute;\n        top: 0.75rem;\n        left: 0.75rem;\n        opacity: 0.6;\n      }\n\n      /* ---------------------------------------------------------\n         Default image styling (rectangular crop)\n      --------------------------------------------------------- */\n      /* Responsive, full-image display inside the editor */\n      body img {\n        display: block;\n        width: 100% !important;\n        height: 100% !important;\n        object-fit: contain !important;\n        object-position: center;\n        margin: 0.75rem 0;\n        border-radius: 4px;\n        max-height: 480px;\n      }\n\n\n      /* Tablet & Desktop ‚Äì rectangular feel without cutting image */\n      @media (min-width: 768px) {\n        body img {\n          min-height: 370px;\n          max-height: 420px;\n        }\n      }\n\n      /* Large screens */\n      @media (min-width: 1200px) {\n        body img {\n\n          max-height: 520px;\n        }\n      }\n\n      /* ---------------------------------------------------------\n         Table Resize Highlight\n      --------------------------------------------------------- */\n      .editor-table-wrapper.handle-left-hover table,\n      .editor-table-wrapper.handle-right-hover table,\n      .editor-table-wrapper.handle-top-hover table,\n      .editor-table-wrapper.handle-bottom-hover table,\n      .editor-table-wrapper.handle-corner-hover table,\n      .editor-table-wrapper.table-active-border table {\n        outline: 2px solid var(--tbl-highlight);\n        outline-offset: -2px;\n      }\n\n      .editor-table-wrapper table {\n        transition: outline-color 0.15s ease;\n      }\n    </style>\n  </head>\n\n  <body contenteditable=\"true\" data-placeholder=\"${this.placeholder}\" data-empty=\"true\"></body>\n</html>\n`;\n\n    doc.open();\n    doc.write(htmlTemplate);\n    doc.close();\n\n    iframe.onload = () => {\n      if (!this.doc?.body) return;\n      this.doc.body.innerHTML = this.html;\n\n      const runtimeScript = this.doc.createElement(\"script\");\n      runtimeScript.id = \"__EDITOR_RUNTIME__\";\n      runtimeScript.type = \"text/javascript\";\n      runtimeScript.textContent = `(${editorRuntimeInit.toString()})();`;\n      this.doc.body.appendChild(runtimeScript);\n\n      this.isReady = true;\n      this.emit(\"ready\", \"\");\n    };\n\n    window.addEventListener(\"message\", this.handleMessage);\n\n    this.post(\"SET_HTML\", { html: this.html });\n  }\n\n  /**\n   * üì° Message handler for runtime communication.\n   */\n  private handleMessage = (e: MessageEvent) => {\n    const data = e.data || {};\n    switch (data.type) {\n      case \"IFRAME_READY\":\n        this.isReady = true;\n        this.post(\"SET_HTML\", { html: this.html });\n        this.emit(\"ready\", \"\");\n        break;\n      case \"UPDATE\":\n        this.html = data.html;\n        this.emit(\"update\", this.html);\n        break;\n      case \"CONTEXT\":\n        this.emit(\"context\", data);\n        break;\n      case \"UNDO_REDO_STATE\":\n        this.emit(\"undoRedo\", { canUndo: data.canUndo, canRedo: data.canRedo });\n        break;\n      case \"IFRAME_ERROR\":\n        console.error(\"üõë Iframe error:\", data.message);\n        this.emit(\"error\", data.message);\n        break;\n    }\n  };\n\n  /**\n   * üì® Sends a command or message to the iframe runtime.\n   */\n  post(type: string, payload?: Record<string, unknown>) {\n    if (!this.win) return;\n    this.win.postMessage({ type, ...payload }, \"*\");\n  }\n\n  fromHTML(html: string) {\n    this.html = html;\n    this.post(\"SET_HTML\", { html });\n  }\n\n  toHTML(): string {\n    return this.doc?.body?.innerHTML?.trim() || this.html;\n  }\n\n  toJSON(): EditorNode[] {\n    if (!this.doc) return [];\n    const root = this.doc.body;\n\n    const traverse = (el: HTMLElement): EditorNode => {\n      const node: EditorNode = { type: el.tagName.toLowerCase() };\n      if (el.childElementCount === 0) node.content = el.innerText;\n      else\n        node.children = Array.from(el.children).map((c) =>\n          traverse(c as HTMLElement)\n        );\n\n      if (el.tagName.match(/^H[1-6]$/))\n        node.attrs = { level: Number(el.tagName.replace(\"H\", \"\")) };\n\n      if (el.tagName === \"A\")\n        node.attrs = { ...(node.attrs || {}), href: el.getAttribute(\"href\") };\n\n      if (el.tagName === \"IMG\")\n        node.attrs = {\n          ...(node.attrs || {}),\n          src: el.getAttribute(\"src\"),\n          alt: el.getAttribute(\"alt\"),\n        };\n\n      return node;\n    };\n\n    return Array.from(root.children).map((c) => traverse(c as HTMLElement));\n  }\n\n  on<K extends keyof EditorEvents>(\n    type: K,\n    fn: (data: EditorEvents[K]) => void\n  ) {\n    if (!this.listeners[type]) this.listeners[type] = [];\n    (this.listeners[type] as Array<(data: EditorEvents[K]) => void>).push(fn);\n  }\n\n  emit<K extends keyof EditorEvents>(type: K, payload: EditorEvents[K]) {\n    const handlers = this.listeners[type];\n    if (handlers) handlers.forEach((handler) => handler(payload));\n  }\n\n  /**\n   * üé® Theme Setter ‚Äî applies light, dark, or custom theme dynamically.\n   */\n  setTheme(theme: \"light\" | \"dark\" | Record<string, string>) {\n    if (!this.doc) return;\n    this.theme = theme;\n\n    const htmlEl = this.doc.documentElement;\n    const styleEl =\n      this.doc.getElementById(\"__EDITOR_THEME__\") ||\n      this.doc.createElement(\"style\");\n\n    styleEl.id = \"__EDITOR_THEME__\";\n\n    let css = `\n      :root {\n        --editor-bg: #ffffff;\n        --editor-fg: #111111;\n        --editor-accent: #3b82f6;\n        --editor-placeholder: rgba(100, 116, 139, 0.6);\n        --editor-border: #e5e7eb;\n        --editor-code-bg: #f9fafb;\n        --editor-blockquote-border: #3b82f6;\n        --editor-hr: #d1d5db;\n      }\n    `;\n\n    if (theme === \"dark\") {\n      htmlEl.setAttribute(\"data-theme\", \"dark\");\n      css = `\n        :root {\n          --editor-bg: #0a0a0a;\n          --editor-fg: #e5e7eb;\n          --editor-accent: #60a5fa;\n          --editor-placeholder: rgba(148, 163, 184, 0.6);\n          --editor-border: #1f2937;\n          --editor-code-bg: #111827;\n          --editor-blockquote-border: #60a5fa;\n          --editor-hr: #374151;\n        }\n      `;\n    }\n\n    if (typeof theme === \"object\" && theme !== null) {\n      htmlEl.removeAttribute(\"data-theme\");\n      const customVars = Object.entries(theme)\n        .map(([key, val]) => `--${key}: ${val};`)\n        .join(\"\\n\");\n      css = `:root { ${customVars} }`;\n    }\n\n    styleEl.textContent = css;\n    this.doc.head.appendChild(styleEl);\n  }\n\n  /**\n   * üåó Enables automatic theme following system preference.\n   */\n  enableAutoTheme() {\n    // Clean up any previous listener\n    if (this.autoThemeListener)\n      this.autoThemeListener.removeEventListener(\n        \"change\",\n        this.autoThemeHandler\n      );\n\n    const mql = window.matchMedia(\"(prefers-color-scheme: dark)\");\n    this.autoThemeListener = mql;\n    console.log(mql);\n    if (!this.autoThemeListener) {\n      mql.addEventListener(\"change\", this.autoThemeHandler);\n    }\n    // Initial apply\n    this.setTheme(mql.matches ? \"dark\" : \"light\");\n\n    // Add listener safely\n    mql.addEventListener(\"change\", this.autoThemeHandler);\n  }\n\n  private autoThemeHandler = (e: MediaQueryListEvent) => {\n    const isDark = e.matches;\n    this.setTheme(isDark ? \"dark\" : \"light\");\n  };\n\n  /**\n   * üßπ Cleanup method for when editor is unmounted.\n   */\n  destroy() {\n    window.removeEventListener(\"message\", this.handleMessage);\n    this.autoThemeListener?.removeEventListener(\n      \"change\",\n      this.autoThemeHandler\n    );\n    this.listeners = {};\n    this.isReady = false;\n    this.win = null;\n    this.doc = null;\n  }\n}\n","import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","// src/editor/hooks/use-editor-chain.ts\n\"use client\";\nimport * as React from \"react\";\nimport { EditorChain } from \"@/core/chain\";\nimport { useEditor } from \"@/context/editor\";\n\nexport function useEditorChain() {\n  const { iframeRef } = useEditor();\n  const [chain, setChain] = React.useState<EditorChain | null>(null);\n\n  // initialize chain once iframe is loaded\n  React.useEffect(() => {\n    const win = iframeRef.current?.contentWindow;\n    if (win && !chain) {\n      setChain(new EditorChain(win));\n    }\n  }, [iframeRef, chain]);\n\n  // central execute handler\n  const execute = React.useCallback(\n    (action: string, ...args: any[]) => {\n      if (!chain) return;\n      const fn = (chain as any)[action];\n      if (typeof fn === \"function\") {\n        const result = fn.apply(chain, args);\n        if (result?.run) result.run();\n      } else {\n        console.warn(`No chain method found for: ${action}`);\n      }\n    },\n    [chain]\n  );\n\n  return { chain, execute };\n}\n","// src/core/chain.ts\nexport class EditorChain {\n  private target: Window | null;\n  private queue: Array<Record<string, unknown>> = [];\n\n  constructor(target: Window | null) {\n    this.target = target;\n  }\n\n  private post(msg: Record<string, unknown>) {\n    if (!this.target) return;\n    this.queue.push(msg);\n    return this;\n  }\n\n  // Executes queued commands in order\n  run() {\n    if (!this.target) return;\n    for (const msg of this.queue) this.target.postMessage(msg, \"*\");\n    this.queue = [];\n  }\n\n  insertImage(url: string, alt: string = \"\") {\n    const html = `<img src=\"${url}\" alt=\"${alt.replace(/\"/g, \"&quot;\")}\" />`;\n    return this.insertHTML(html);\n  }\n\n  insertImages(images: Array<{ url: string; alt?: string }>) {\n    let html = \"\";\n    for (const img of images) {\n      html += `<img src=\"${img.url}\" alt=\"${(img.alt || \"\").replace(\n        /\"/g,\n        \"&quot;\"\n      )}\" />`;\n    }\n    return this.insertHTML(html);\n  }\n\n  // Inline commands\n  exec(cmd: string, value?: string) {\n    return this.post({ type: \"EXEC\", cmd, value });\n  }\n\n  undo() {\n    this.target?.postMessage({ type: \"EXEC\", cmd: \"undo\" }, \"*\");\n    return this;\n  }\n\n  redo() {\n    this.target?.postMessage({ type: \"EXEC\", cmd: \"redo\" }, \"*\");\n    return this;\n  }\n\n  bold() {\n    return this.exec(\"bold\");\n  }\n  italic() {\n    return this.exec(\"italic\");\n  }\n  underline() {\n    return this.exec(\"underline\");\n  }\n  strike() {\n    return this.exec(\"strikeThrough\");\n  }\n\n  // Block formats\n  heading(level: 1 | 2 | 3 | 4 | 5 | 6) {\n    return this.post({ type: \"FORMAT_BLOCK\", block: `H${level}` });\n  }\n  paragraph() {\n    return this.post({ type: \"FORMAT_BLOCK\", block: \"P\" });\n  }\n  quote() {\n    return this.post({ type: \"FORMAT_BLOCK\", block: \"BLOCKQUOTE\" });\n  }\n  codeBlock() {\n    return this.post({ type: \"FORMAT_BLOCK\", block: \"PRE\" });\n  }\n\n  // Lists\n  bulletList() {\n    return this.exec(\"insertUnorderedList\");\n  }\n  orderedList() {\n    return this.exec(\"insertOrderedList\");\n  }\n\n  indent() {\n    this.target?.postMessage({ type: \"CUSTOM_INDENT\" }, \"*\");\n    return this;\n  }\n  outdent() {\n    this.target?.postMessage({ type: \"CUSTOM_OUTDENT\" }, \"*\");\n    return this;\n  }\n\n  // Align\n  alignLeft() {\n    return this.exec(\"justifyLeft\");\n  }\n  alignCenter() {\n    return this.exec(\"justifyCenter\");\n  }\n  alignRight() {\n    return this.exec(\"justifyRight\");\n  }\n\n  // Colors\n  color(value: string) {\n    return this.exec(\"foreColor\", value);\n  }\n  highlight(value: string) {\n    return this.exec(\"hiliteColor\", value);\n  }\n\n  // Links\n  link(url: string) {\n    return this.exec(\"createLink\", url);\n  }\n  unlink() {\n    return this.exec(\"unlink\");\n  }\n\n  // Raw HTML\n  insertHTML(html: string) {\n    return this.post({ type: \"INSERT_HTML\", html });\n  }\n  setHTML(html: string) {\n    return this.post({ type: \"SET_HTML\", html });\n  }\n\n  insertTable(rows: number, cols: number) {\n    this.target?.postMessage({ type: \"INSERT_TABLE\", rows, cols }, \"*\");\n    return this;\n  }\n\n  // Helpers\n  clear() {\n    return this.exec(\"removeFormat\");\n  }\n}\n","import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n        primary: \"bg-blue-600 hover:bg-blue-600/70 text-white\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n        \"icon-xs\": \"size-7\",\n        \"icon-sm\": \"size-8\",\n        \"icon-lg\": \"size-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n);\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean;\n  }) {\n  const Comp = asChild ? Slot : \"button\";\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  );\n}\n\nexport { Button, buttonVariants };\n","\"use client\";\n\nimport * as React from \"react\";\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\";\n\nimport { cn } from \"@/lib/utils\";\n\nfunction Separator({\n  className,\n  orientation = \"horizontal\",\n  decorative = true,\n  ...props\n}: React.ComponentProps<typeof SeparatorPrimitive.Root>) {\n  return (\n    <SeparatorPrimitive.Root\n      data-slot=\"separator\"\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px\",\n        className\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Separator };\n","\"use client\";\n\nimport * as React from \"react\";\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\";\n\nimport { cn } from \"@/lib/utils\";\n\nfunction TooltipProvider({\n  delayDuration = 0,\n  ...props\n}: React.ComponentProps<typeof TooltipPrimitive.Provider>) {\n  return (\n    <TooltipPrimitive.Provider\n      data-slot=\"tooltip-provider\"\n      delayDuration={delayDuration}\n      {...props}\n    />\n  );\n}\n\nfunction Tooltip({\n  ...props\n}: React.ComponentProps<typeof TooltipPrimitive.Root>) {\n  return (\n    <TooltipProvider>\n      <TooltipPrimitive.Root data-slot=\"tooltip\" {...props} />\n    </TooltipProvider>\n  );\n}\n\nfunction TooltipTrigger({\n  ...props\n}: React.ComponentProps<typeof TooltipPrimitive.Trigger>) {\n  return <TooltipPrimitive.Trigger data-slot=\"tooltip-trigger\" {...props} />;\n}\n\nfunction TooltipContent({\n  className,\n  sideOffset = 0,\n  children,\n  ...props\n}: React.ComponentProps<typeof TooltipPrimitive.Content>) {\n  return (\n    <TooltipPrimitive.Portal>\n      <TooltipPrimitive.Content\n        data-slot=\"tooltip-content\"\n        sideOffset={sideOffset}\n        className={cn(\n          \"bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n        <TooltipPrimitive.Arrow className=\"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]\" />\n      </TooltipPrimitive.Content>\n    </TooltipPrimitive.Portal>\n  );\n}\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider };\n","// toolbar.tsx\n\"use client\";\nimport { Button } from \"@/components/ui/button\";\nimport { Separator } from \"@/components/ui/separator\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { cn } from \"@/lib/utils\";\nimport type { SeparatorProps } from \"@radix-ui/react-separator\";\nimport * as React from \"react\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\n\ninterface ToolbarWrapperProps\n  extends Omit<React.ComponentProps<\"div\">, \"children\"> {\n  children?: React.ReactNode;\n}\n\nconst EdgeIndicator = ({\n  direction,\n  visible,\n  shadowIntensity,\n  onClick,\n}: {\n  direction: \"left\" | \"right\";\n  visible: boolean;\n  shadowIntensity: number;\n  onClick: () => void;\n}) => {\n  const Icon = direction === \"left\" ? ChevronLeft : ChevronRight;\n\n  return (\n    <div\n      className={cn(\n        \"absolute top-0 bottom-0 z-30 flex items-center justify-center transition-all duration-300 w-8\",\n        direction === \"left\"\n          ? \"left-0 bg-gradient-to-r from-background via-background/80 to-transparent\"\n          : \"right-0 bg-gradient-to-l from-background via-background/80 to-transparent\",\n        visible ? \"opacity-100\" : \"opacity-0 pointer-events-none\"\n      )}\n    >\n      <button\n        onClick={onClick}\n        className={cn(\n          \"w-6 h-6 rounded-md flex items-center justify-center transition-all duration-200\",\n          \"bg-background border border-border shadow-sm hover:bg-accent hover:scale-110\",\n          \"focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2\"\n        )}\n        aria-label={`Scroll ${direction}`}\n      >\n        <Icon className=\"w-3.5 h-3.5 text-muted-foreground\" />\n      </button>\n    </div>\n  );\n};\n\nexport const ToolbarWrapper = React.forwardRef<\n  HTMLDivElement,\n  ToolbarWrapperProps\n>(({ children, className, ...props }, ref) => {\n  const containerRef = React.useRef<HTMLDivElement | null>(null);\n  const [showLeft, setShowLeft] = React.useState(false);\n  const [showRight, setShowRight] = React.useState(false);\n  const [hovered, setHovered] = React.useState(false);\n  const [shadowIntensity, setShadowIntensity] = React.useState(0);\n  const [isDragging, setIsDragging] = React.useState(false);\n\n  const updateOverflow = React.useCallback(() => {\n    const el = containerRef.current;\n    if (!el) return;\n\n    const { scrollLeft, scrollWidth, clientWidth } = el;\n    setShowLeft(scrollLeft > 5);\n    setShowRight(scrollLeft < scrollWidth - clientWidth - 5);\n  }, []);\n\n  // Enhanced drag-to-scroll with better UX\n  React.useEffect(() => {\n    const el = containerRef.current;\n    if (!el) return;\n\n    let isDown = false;\n    let startX = 0;\n    let scrollStart = 0;\n\n    const onDown = (e: MouseEvent) => {\n      isDown = true;\n      setIsDragging(true);\n      startX = e.pageX;\n      scrollStart = el.scrollLeft;\n      el.style.cursor = \"grabbing\";\n      el.style.userSelect = \"none\";\n    };\n\n    const onUp = () => {\n      isDown = false;\n      setIsDragging(false);\n      el.style.cursor = \"grab\";\n      el.style.userSelect = \"auto\";\n    };\n\n    const onMove = (e: MouseEvent) => {\n      if (!isDown) return;\n      const diff = (e.pageX - startX) * 1.6; // Slightly faster scrolling\n      el.scrollLeft = scrollStart - diff;\n      updateOverflow();\n    };\n\n    el.addEventListener(\"mousedown\", onDown);\n    window.addEventListener(\"mouseup\", onUp);\n    window.addEventListener(\"mousemove\", onMove);\n\n    return () => {\n      el.removeEventListener(\"mousedown\", onDown);\n      window.removeEventListener(\"mouseup\", onUp);\n      window.removeEventListener(\"mousemove\", onMove);\n    };\n  }, [updateOverflow]);\n\n  // Dynamic shadow with momentum\n  React.useEffect(() => {\n    const el = containerRef.current;\n    if (!el) return;\n\n    let lastScroll = el.scrollLeft;\n    let lastTime = Date.now();\n    let velocity = 0;\n\n    const onScroll = () => {\n      const now = Date.now();\n      const currentScroll = el.scrollLeft;\n      const deltaTime = now - lastTime;\n\n      if (deltaTime > 0) {\n        velocity = Math.abs(currentScroll - lastScroll) / deltaTime;\n        setShadowIntensity(Math.min(velocity * 20, 1));\n      }\n\n      lastScroll = currentScroll;\n      lastTime = now;\n      updateOverflow();\n    };\n\n    el.addEventListener(\"scroll\", onScroll, { passive: true });\n    return () => el.removeEventListener(\"scroll\", onScroll);\n  }, [updateOverflow]);\n\n  const scrollBy = (amount: number) => {\n    containerRef.current?.scrollBy({\n      left: amount,\n      behavior: \"smooth\",\n    });\n  };\n\n  // Enhanced magnetic hover with ripple effect\n  const enhancedChildren = React.Children.map(children, (child) => {\n    if (!React.isValidElement(child)) return child;\n\n    return React.cloneElement(child as React.ReactElement<any>, {\n      className: cn(\n        (child as React.ReactElement<any>).props.className,\n        \"transition-all duration-200\"\n      ),\n    });\n  });\n\n  return (\n    <div\n      className=\"relative w-full overflow-hidden group\"\n      onMouseEnter={() => setHovered(true)}\n      onMouseLeave={() => setHovered(false)}\n    >\n      <EdgeIndicator\n        direction=\"left\"\n        visible={showLeft && hovered}\n        shadowIntensity={shadowIntensity}\n        onClick={() => scrollBy(-200)}\n      />\n\n      <div\n        ref={(node) => {\n          containerRef.current = node;\n          if (typeof ref === \"function\") ref(node);\n          else if (ref) (ref as any).current = node;\n        }}\n        className={cn(\n          \"flex items-center gap-1 overflow-x-auto px-3 py-2 scroll-smooth hide-scrollbar\",\n          \"overflow-y-hidden select-none touch-pan-x\",\n          \"bg-background/95 backdrop-blur-sm border-b\",\n          isDragging ? \"cursor-grabbing\" : \"cursor-grab\",\n          \"transition-all duration-300\",\n          className\n        )}\n        style={{\n          scrollbarWidth: \"none\",\n          msOverflowStyle: \"none\",\n        }}\n        {...props}\n      >\n        {enhancedChildren}\n      </div>\n\n      <EdgeIndicator\n        direction=\"right\"\n        visible={showRight && hovered}\n        shadowIntensity={shadowIntensity}\n        onClick={() => scrollBy(200)}\n      />\n    </div>\n  );\n});\n\nToolbarWrapper.displayName = \"ToolbarWrapper\";\n\nexport const ToolbarGroup = React.forwardRef<\n  HTMLDivElement,\n  ToolbarWrapperProps\n>(({ children, className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"flex items-center gap-1 px-1 first:pl-0 last:pr-0\",\n        \"transition-all duration-300\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </div>\n  );\n});\n\nToolbarGroup.displayName = \"ToolbarGroup\";\n\nexport const ToolbarButtonSeparator: React.FC<SeparatorProps> = ({\n  orientation = \"vertical\",\n}) => {\n  return (\n    <Separator\n      orientation={orientation}\n      role=\"separator\"\n      style={{\n        height: \"1.75rem\",\n      }}\n      className={cn(\n        \"h-6 mx-1 bg-border/60\",\n        orientation === \"vertical\" ? \"w-px\" : \"h-px w-full\"\n      )}\n    />\n  );\n};\n\ninterface ToolbarButtonProps extends React.ComponentProps<typeof Button> {\n  active?: boolean;\n  toolButtonSize?: \"xs\" | \"sm\" | \"md\";\n  tooltip?: string;\n  children: React.ReactNode;\n}\n\nexport const ToolbarButton = React.forwardRef<\n  HTMLButtonElement,\n  ToolbarButtonProps\n>(\n  (\n    {\n      children,\n      onClick,\n      active = false,\n      toolButtonSize = \"sm\",\n      tooltip,\n      className,\n      disabled,\n      ...props\n    },\n    ref\n  ) => {\n    const [open, setOpen] = React.useState(false);\n    const [isPressed, setIsPressed] = React.useState(false);\n\n    React.useEffect(() => {\n      const closeTooltip = () => setOpen(false);\n      window.addEventListener(\"editor-iframe-enter\", closeTooltip);\n      return () =>\n        window.removeEventListener(\"editor-iframe-enter\", closeTooltip);\n    }, []);\n\n    const sizeClasses = {\n      xs: \"h-7 w-7 rounded-md text-xs\",\n      sm: \"h-8 w-8 rounded-md text-sm\",\n      md: \"h-9 w-9 rounded-lg text-base\",\n    };\n\n    const handleMouseDown = (e: React.MouseEvent) => {\n      e.preventDefault();\n      setIsPressed(true);\n    };\n\n    const handleMouseUp = () => {\n      setIsPressed(false);\n    };\n\n    const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {\n      setIsPressed(false);\n      onClick?.(e);\n    };\n\n    const button = (\n      <Button\n        size=\"icon\"\n        onMouseDown={handleMouseDown}\n        onMouseUp={handleMouseUp}\n        onMouseLeave={handleMouseUp}\n        onClick={handleClick}\n        variant=\"ghost\"\n        ref={ref}\n        disabled={disabled}\n        data-active={active}\n        data-pressed={isPressed}\n        className={cn(\n          sizeClasses[toolButtonSize],\n          \"relative transition-all duration-200\",\n          \"border border-transparent hover:border-border/50\",\n          \"bg-background hover:bg-accent/50 active:bg-accent\",\n          \"shadow-sm hover:shadow-md active:shadow-sm\",\n          \"focus:outline-none focus:ring-0 focus:ring-offset-0\",\n          \"disabled:opacity-40 disabled:pointer-events-none disabled:shadow-none\",\n          active && \"bg-accent text-accent-foreground border-border/30\",\n          isPressed && \"scale-95 bg-accent\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          className={cn(\n            \"transition-transform duration-200\",\n            isPressed && \"scale-90\"\n          )}\n        >\n          {children}\n        </div>\n\n        {/* Active indicator dot */}\n        {active && (\n          <div className=\"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-primary rounded-full\" />\n        )}\n      </Button>\n    );\n\n    if (!tooltip) return button;\n\n    return (\n      <TooltipProvider delayDuration={300}>\n        <Tooltip open={open && !disabled} onOpenChange={setOpen}>\n          <TooltipTrigger asChild>{button}</TooltipTrigger>\n          <TooltipContent\n            side=\"top\"\n            align=\"center\"\n            className=\"text-xs font-medium px-2 py-1 bg-foreground text-background\"\n            sideOffset={8}\n          >\n            {tooltip}\n            <kbd className=\"ml-1 text-xs opacity-70\">‚åò</kbd>\n          </TooltipContent>\n        </Tooltip>\n      </TooltipProvider>\n    );\n  }\n);\n\nToolbarButton.displayName = \"ToolbarButton\";\n","import { useEditorChain } from \"@/hooks/chain-execute\";\nimport { ToolbarButton } from \"../toolbar/toolbar\";\nimport { Redo2, Undo2 } from \"lucide-react\";\n\nexport const HistorySection: React.FC<ToolbarButtonDefaultProps> = ({\n  ctx,\n  size = \"sm\",\n}) => {\n  const { execute } = useEditorChain();\n\n  return (\n    <>\n      <ToolbarButton\n        tooltip=\"Undo\"\n        disabled={!ctx.canUndo}\n        onClick={() => execute(\"undo\")}\n        toolButtonSize={size}\n        className=\"rounded\"\n      >\n        <Undo2 />\n      </ToolbarButton>\n      <ToolbarButton\n        tooltip=\"Redo\"\n        toolButtonSize={size}\n        disabled={!ctx.canRedo}\n        onClick={() => execute(\"redo\")}\n        className=\"rounded\"\n      >\n        <Redo2 />\n      </ToolbarButton>\n    </>\n  );\n};\n","\"use client\";\nimport * as React from \"react\";\nimport { ToolbarButton } from \"../toolbar/toolbar\";\nimport { useEditorChain } from \"@/hooks/chain-execute\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuTrigger,\n} from \"@/components/ui\";\n\n// -------------------------\n// Icons\n// -------------------------\nconst IconIndent = ({ ...props }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 16 16\"\n    fill=\"currentColor\"\n    {...props}\n  >\n    <path d=\"M1.75 2a.75.75 0 0 0 0 1.5h12.5a.75.75 0 0 0 0-1.5z\" />\n    <path d=\"M8.75 5.5a.75.75 0 0 0 0 1.5h5.5a.75.75 0 0 0 0-1.5z\" />\n    <path d=\"M8 9.75a.75.75 0 0 1 .75-.75h5.5a.75.75 0 0 1 0 1.5h-5.5a.75.75 0 0 1-.75-.75\" />\n    <path d=\"M1.75 12.5a.75.75 0 0 0 0 1.5h12.5a.75.75 0 0 0 0-1.5z\" />\n    <path d=\"M1 10.407c0 .473.55.755.96.493l3.765-2.408a.578.578 0 0 0 0-.985l-3.765-2.407c-.41-.262-.96.02-.96.493z\" />\n  </svg>\n);\n\nconst IconOutdent = ({ ...props }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 16 16\"\n    fill=\"currentColor\"\n    {...props}\n  >\n    <path d=\"M1.75 2a.75.75 0 0 0 0 1.5h12.5a.75.75 0 0 0 0-1.5z\" />\n    <path d=\"M8.75 5.5a.75.75 0 0 0 0 1.5h5.5a.75.75 0 0 0 0-1.5z\" />\n    <path d=\"M8 9.75a.75.75 0 0 1 .75-.75h5.5a.75.75 0 0 1 0 1.5h-5.5a.75.75 0 0 1-.75-.75\" />\n    <path d=\"M1.75 12.5a.75.75 0 0 0 0 1.5h12.5a.75.75 0 0 0 0-1.5z\" />\n    <path d=\"M6 10.407c0 .473-.55.755-.96.493l-3.765-2.408a.578.578 0 0 1 0-.985l3.765-2.407c.41-.262.96.02.96.493z\" />\n  </svg>\n);\n\n// -------------------------\n// Component\n// -------------------------\nexport const IndentOutdentSection: React.FC<ToolbarButtonDefaultProps> = ({\n  ctx,\n  size,\n}) => {\n  const { execute } = useEditorChain();\n  const [open, setOpen] = React.useState(false);\n\n  const isIndented = ctx?.isIndented ?? false;\n\n  return (\n    <DropdownMenu open={open} onOpenChange={setOpen}>\n      <DropdownMenuTrigger asChild>\n        <ToolbarButton\n          toolButtonSize={size}\n          active={open}\n          tooltip=\"Indentation\"\n        >\n          {isIndented ? (\n            <IconOutdent className=\"h-4 w-4\" />\n          ) : (\n            <IconIndent className=\"h-4 w-4\" />\n          )}\n        </ToolbarButton>\n      </DropdownMenuTrigger>\n\n      <DropdownMenuContent\n        align=\"end\"\n        className=\"flex gap-1 p-2 min-w-0 rounded-md backdrop-blur-sm bg-background/95 border shadow-sm transition-all\"\n      >\n        <ToolbarButton\n          toolButtonSize={size}\n          tooltip=\"Indent\"\n          disabled={isIndented}\n          onClick={() => {\n            execute(\"indent\");\n            setOpen(false);\n          }}\n        >\n          <IconIndent className=\"w-4 h-4\" />\n        </ToolbarButton>\n\n        <ToolbarButton\n          toolButtonSize={size}\n          tooltip=\"Outdent\"\n          disabled={!isIndented}\n          onClick={() => {\n            execute(\"outdent\");\n            setOpen(false);\n          }}\n        >\n          <IconOutdent className=\"w-4 h-4\" />\n        </ToolbarButton>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n};\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { XIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn(\"text-lg leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n","\"use client\";\n\nimport * as React from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { CheckIcon, ChevronRightIcon, CircleIcon } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\n\nfunction DropdownMenu({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Root>) {\n  return <DropdownMenuPrimitive.Root data-slot=\"dropdown-menu\" {...props} />;\n}\n\nfunction DropdownMenuPortal({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Portal>) {\n  return (\n    <DropdownMenuPrimitive.Portal data-slot=\"dropdown-menu-portal\" {...props} />\n  );\n}\n\nfunction DropdownMenuTrigger({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Trigger>) {\n  return (\n    <DropdownMenuPrimitive.Trigger\n      data-slot=\"dropdown-menu-trigger\"\n      {...props}\n    />\n  );\n}\n\nfunction DropdownMenuContent({\n  className,\n  sideOffset = 4,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Content>) {\n  return (\n    <DropdownMenuPrimitive.Portal>\n      <DropdownMenuPrimitive.Content\n        data-slot=\"dropdown-menu-content\"\n        sideOffset={sideOffset}\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-0 origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded border p-1 shadow-md\",\n          className\n        )}\n        {...props}\n      />\n    </DropdownMenuPrimitive.Portal>\n  );\n}\n\nfunction DropdownMenuGroup({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Group>) {\n  return (\n    <DropdownMenuPrimitive.Group data-slot=\"dropdown-menu-group\" {...props} />\n  );\n}\n\nfunction DropdownMenuItem({\n  className,\n  inset,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Item> & {\n  inset?: boolean;\n  variant?: \"default\" | \"destructive\";\n}) {\n  return (\n    <DropdownMenuPrimitive.Item\n      data-slot=\"dropdown-menu-item\"\n      data-inset={inset}\n      data-variant={variant}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction DropdownMenuCheckboxItem({\n  className,\n  children,\n  checked,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.CheckboxItem>) {\n  return (\n    <DropdownMenuPrimitive.CheckboxItem\n      data-slot=\"dropdown-menu-checkbox-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      checked={checked}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.CheckboxItem>\n  );\n}\n\nfunction DropdownMenuRadioGroup({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioGroup>) {\n  return (\n    <DropdownMenuPrimitive.RadioGroup\n      data-slot=\"dropdown-menu-radio-group\"\n      {...props}\n    />\n  );\n}\n\nfunction DropdownMenuRadioItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioItem>) {\n  return (\n    <DropdownMenuPrimitive.RadioItem\n      data-slot=\"dropdown-menu-radio-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <CircleIcon className=\"size-2 fill-current\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.RadioItem>\n  );\n}\n\nfunction DropdownMenuLabel({\n  className,\n  inset,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Label> & {\n  inset?: boolean;\n}) {\n  return (\n    <DropdownMenuPrimitive.Label\n      data-slot=\"dropdown-menu-label\"\n      data-inset={inset}\n      className={cn(\n        \"px-2 py-1.5 text-sm font-medium data-[inset]:pl-8\",\n        className\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction DropdownMenuSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Separator>) {\n  return (\n    <DropdownMenuPrimitive.Separator\n      data-slot=\"dropdown-menu-separator\"\n      className={cn(\"bg-border -mx-1 my-1 h-px\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction DropdownMenuShortcut({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      data-slot=\"dropdown-menu-shortcut\"\n      className={cn(\n        \"text-muted-foreground ml-auto text-xs tracking-widest\",\n        className\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction DropdownMenuSub({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Sub>) {\n  return <DropdownMenuPrimitive.Sub data-slot=\"dropdown-menu-sub\" {...props} />;\n}\n\nfunction DropdownMenuSubTrigger({\n  className,\n  inset,\n  children,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.SubTrigger> & {\n  inset?: boolean;\n}) {\n  return (\n    <DropdownMenuPrimitive.SubTrigger\n      data-slot=\"dropdown-menu-sub-trigger\"\n      data-inset={inset}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronRightIcon className=\"ml-auto size-4\" />\n    </DropdownMenuPrimitive.SubTrigger>\n  );\n}\n\nfunction DropdownMenuSubContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.SubContent>) {\n  return (\n    <DropdownMenuPrimitive.SubContent\n      data-slot=\"dropdown-menu-sub-content\"\n      className={cn(\n        \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg\",\n        className\n      )}\n      {...props}\n    />\n  );\n}\n\nexport {\n  DropdownMenu,\n  DropdownMenuPortal,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuGroup,\n  DropdownMenuLabel,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioGroup,\n  DropdownMenuRadioItem,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuSub,\n  DropdownMenuSubTrigger,\n  DropdownMenuSubContent,\n};\n","import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-border h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Input };\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n","import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"skeleton\"\n      className={cn(\"bg-accent animate-pulse rounded-md\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as SwitchPrimitive from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Switch({\n  className,\n  ...props\n}: React.ComponentProps<typeof SwitchPrimitive.Root>) {\n  return (\n    <SwitchPrimitive.Root\n      data-slot=\"switch\"\n      className={cn(\n        \"peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <SwitchPrimitive.Thumb\n        data-slot=\"switch-thumb\"\n        className={cn(\n          \"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0\"\n        )}\n      />\n    </SwitchPrimitive.Root>\n  )\n}\n\nexport { Switch }\n","\"use client\";\n\nimport * as React from \"react\";\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\";\n\nimport { cn } from \"@/lib/utils\";\n\nfunction Tabs({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\n  return (\n    <TabsPrimitive.Root\n      data-slot=\"tabs\"\n      className={cn(\"flex flex-col gap-2\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction TabsList({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\n  return (\n    <TabsPrimitive.List\n      data-slot=\"tabs-list\"\n      className={cn(\n        \"bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]\",\n        className\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction TabsTrigger({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\n  return (\n    <TabsPrimitive.Trigger\n      data-slot=\"tabs-trigger\"\n      className={cn(\n        \"data-[state=active]:bg-accent data-[state=active]:text-accent-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction TabsContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\n  return (\n    <TabsPrimitive.Content\n      data-slot=\"tabs-content\"\n      className={cn(\"flex-1 outline-none\", className)}\n      {...props}\n    />\n  );\n}\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent };\n","\"use client\";\nimport { useEditorChain } from \"@/hooks/chain-execute\";\nimport * as React from \"react\";\nimport { ToolbarButton } from \"../toolbar/toolbar\";\nimport { List, ListOrdered } from \"lucide-react\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuTrigger,\n} from \"@/components/ui\";\n\nexport const ListSelectorSection: React.FC<ToolbarButtonDefaultProps> = ({\n  ctx,\n  size = \"sm\",\n}) => {\n  const [_open, _setOpen] = React.useState<boolean>(false);\n  const { execute } = useEditorChain();\n\n  const listOptions = [\n    {\n      cmd: \"bulletList\",\n      tooltip: \"Unordered List\",\n      icon: <List className=\"h-4 w-4\" />,\n      active: ctx?.unorderedList,\n    },\n    {\n      cmd: \"orderedList\",\n      icon: <ListOrdered className=\"h-4 w-4\" />,\n      active: ctx?.orderedList,\n      tooltip: \"Ordered List\",\n    },\n  ];\n\n  return (\n    <DropdownMenu open={_open} onOpenChange={_setOpen}>\n      <DropdownMenuTrigger asChild>\n        <ToolbarButton\n          tooltip=\"List Selector\"\n          toolButtonSize={size}\n          active={_open}\n        >\n          <List />\n        </ToolbarButton>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent\n        align=\"end\"\n        side=\"bottom\"\n        className=\"flex gap-1 py-1.5 px-2 min-w-0 bg-background/95 backdrop-blur-md rounded-md shadow-sm border\"\n      >\n        {listOptions.map((opt) => (\n          <ToolbarButton\n            key={opt.cmd}\n            tooltip={opt.tooltip}\n            toolButtonSize=\"sm\"\n            active={opt.active}\n            onClick={() => {\n              execute(opt.cmd);\n              _setOpen(!_open);\n            }}\n          >\n            {opt.icon}\n          </ToolbarButton>\n        ))}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n};\n","import { Button } from \"@/components/ui/button\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Table } from \"lucide-react\";\nimport * as React from \"react\";\nimport { ToolbarButton } from \"../toolbar/toolbar\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuTrigger,\n} from \"@/components/ui\";\n\ninterface TablePickerProps\n  extends Omit<React.ComponentProps<typeof Button>, \"onSelect\"> {\n  onSelect?: (rows: number, cols: number) => void;\n}\n\nexport const TablePicker = React.forwardRef<\n  HTMLButtonElement,\n  TablePickerProps\n>(({ onSelect, ...buttonProps }, ref) => {\n  const [open, setOpen] = React.useState(false);\n  const [table, setTable] = React.useState({ rows: 2, cols: 2 });\n\n  const maxRows = 10;\n  const maxCols = 10;\n\n  return (\n    <DropdownMenu open={open} onOpenChange={setOpen}>\n      <DropdownMenuTrigger asChild>\n        <ToolbarButton\n          ref={ref}\n          toolButtonSize=\"xs\"\n          tooltip=\"Insert Table\"\n          active={open}\n          {...buttonProps}\n        >\n          <Table />\n        </ToolbarButton>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent>\n        {Array.from({ length: maxRows }).map((_, r) => (\n          <div key={r} className=\"flex space-y-0.5 space-x-0.5 mx-auto w-full\">\n            {Array.from({ length: maxCols }).map((_, c) => {\n              // active if less or equal, so user can see rectangular selection\n              const active = r <= table.rows && c <= table.cols;\n              return (\n                <div\n                  key={c}\n                  onMouseEnter={() => setTable({ rows: r, cols: c })}\n                  onClick={() => {\n                    onSelect?.(r + 1, c + 1);\n                    setOpen(false);\n                  }}\n                  data-active={active}\n                  className={`w-5 h-5 border cursor-pointer bg-transparent hover:bg-gray-200 data-[active=true]:ring-1 data-[active=true]:ring-blue-500 data-[active=true]:bg-accent`}\n                />\n              );\n            })}\n          </div>\n        ))}\n        <Separator className=\"w-full\" />\n        <div className=\"text-xs text-muted-foreground mt-2\">\n          {table.rows + 1} √ó {table.cols + 1}\n        </div>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n});\n\nTablePicker.displayName = \"TablePicker\";\n","\"use client\";\nimport * as React from \"react\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { ToolbarButton } from \"../toolbar/toolbar\";\nimport { TextAlignStart, TextAlignCenter, TextAlignEnd } from \"lucide-react\";\n\nimport { useEditorChain } from \"@/hooks/chain-execute\";\n\nexport const TextAlignerSection: React.FC<ToolbarButtonDefaultProps> = ({\n  size = \"sm\",\n  ctx,\n  ...props\n}) => {\n  const [_open, _setOpen] = React.useState(false);\n  const { execute } = useEditorChain();\n\n  const alignOptions = [\n    {\n      cmd: \"alignLeft\",\n      tooltip: \"Align Left\",\n      icon: <TextAlignStart className=\"w-4 h-4\" />,\n      active: ctx?.justifyLeft,\n    },\n    {\n      cmd: \"alignCenter\",\n      tooltip: \"Align Center\",\n      icon: <TextAlignCenter className=\"w-4 h-4\" />,\n      active: ctx?.justifyCenter,\n    },\n    {\n      cmd: \"alignRight\",\n      tooltip: \"Align Right\",\n      icon: <TextAlignEnd className=\"w-4 h-4\" />,\n      active: ctx?.justifyRight,\n    },\n  ];\n\n  // Pick icon for trigger based on current active alignment\n  const activeAlign = alignOptions.find((a) => a.active)?.icon || (\n    <TextAlignStart className=\"w-4 h-4\" />\n  );\n\n  return (\n    <DropdownMenu open={_open} onOpenChange={_setOpen}>\n      <DropdownMenuTrigger asChild>\n        <ToolbarButton\n          {...props}\n          tooltip=\"Text Alignment\"\n          active={_open}\n          toolButtonSize={size}\n        >\n          {activeAlign}\n        </ToolbarButton>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent\n        align=\"center\"\n        className=\"flex gap-1 p-2 min-w-0 bg-background/95 backdrop-blur-md rounded shadow-sm border\"\n      >\n        {alignOptions.map((opt) => (\n          <ToolbarButton\n            key={opt.cmd}\n            tooltip={opt.tooltip}\n            toolButtonSize=\"sm\"\n            active={opt.active}\n            onClick={() => {\n              execute(opt.cmd);\n              _setOpen(!_open);\n            }}\n          >\n            {opt.icon}\n          </ToolbarButton>\n        ))}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n};\n","\"use client\";\nimport * as React from \"react\";\nimport {\n  Check,\n  ChevronDown,\n  Code,\n  Heading1,\n  Heading2,\n  Heading3,\n  Heading4,\n  Heading5,\n  Heading6,\n  Pilcrow,\n  Quote,\n} from \"lucide-react\";\nimport { useEditorChain } from \"@/hooks/chain-execute\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { cn } from \"@/lib/utils\";\n\nconst allFormats = [\n  {\n    type: \"heading\",\n    cmd: \"heading\",\n    args: [1],\n    tooltip: \"Heading 1\",\n    icon: <Heading1 />,\n    activeKey: \"isHeading1\",\n    style: \"text-3xl font-bold leading-tight tracking-tight text-foreground\",\n  },\n  {\n    type: \"heading\",\n    cmd: \"heading\",\n    args: [2],\n    tooltip: \"Heading 2\",\n    icon: <Heading2 />,\n    activeKey: \"isHeading2\",\n    style: \"text-2xl font-semibold leading-snug tracking-tight text-foreground\",\n  },\n  {\n    type: \"heading\",\n    cmd: \"heading\",\n    args: [3],\n    tooltip: \"Heading 3\",\n    icon: <Heading3 />,\n    activeKey: \"isHeading3\",\n    style: \"text-xl font-semibold leading-snug text-foreground\",\n  },\n  {\n    type: \"heading\",\n    cmd: \"heading\",\n    args: [4],\n    tooltip: \"Heading 4\",\n    icon: <Heading4 />,\n    activeKey: \"isHeading4\",\n    style: \"text-lg font-medium leading-relaxed text-foreground\",\n  },\n  {\n    type: \"heading\",\n    cmd: \"heading\",\n    args: [5],\n    tooltip: \"Heading 5\",\n    icon: <Heading5 />,\n    activeKey: \"isHeading5\",\n    style: \"text-base font-medium leading-relaxed text-foreground\",\n  },\n  {\n    type: \"heading\",\n    cmd: \"heading\",\n    args: [6],\n    tooltip: \"Heading 6\",\n    icon: <Heading6 />,\n    activeKey: \"isHeading6\",\n    style:\n      \"text-sm font-semibold uppercase tracking-wide text-muted-foreground\",\n  },\n  {\n    type: \"paragraph\",\n    cmd: \"paragraph\",\n    tooltip: \"Paragraph\",\n    icon: <Pilcrow />,\n    activeKey: \"isParagraph\",\n    style:\n      \"text-base leading-relaxed text-muted-foreground max-w-prose truncate\",\n  },\n  {\n    type: \"blockquote\",\n    cmd: \"quote\",\n    tooltip: \"Blockquote\",\n    icon: <Quote />,\n    activeKey: \"isBlockquote\",\n    style:\n      \"text-base italic border-l-2 border-muted pl-3 text-muted-foreground leading-relaxed\",\n  },\n  {\n    type: \"code\",\n    cmd: \"codeBlock\",\n    tooltip: \"Code Block\",\n    icon: <Code />,\n    activeKey: \"isCodeBlock\",\n    style:\n      \"text-sm font-mono bg-muted rounded px-2 py-1 text-foreground truncate\",\n  },\n];\n\nexport const TextFormatSection: React.FC<TextFormatSectionProps> = ({\n  ctx,\n  format = {\n    heading: [1, 2, 3],\n    code: false,\n    blockquote: false,\n    paragraph: true,\n  },\n  size = \"sm\",\n}) => {\n  const { execute } = useEditorChain();\n\n  const visibleFormats = React.useMemo(() => {\n    return allFormats.filter((btn) => {\n      switch (btn.type) {\n        case \"heading\":\n          return format.heading?.includes(btn.args?.[0] as Heading);\n        case \"paragraph\":\n          return !!format.paragraph;\n        case \"blockquote\":\n          return !!format.blockquote;\n        case \"code\":\n          return !!format.code;\n        default:\n          return false;\n      }\n    });\n  }, [format]);\n\n  const currentActive = visibleFormats.find(\n    (btn) => ctx[btn.activeKey as keyof typeof ctx]\n  );\n\n  const currentLabel = currentActive?.tooltip || \"Format\";\n\n  const sizeClasses = {\n    sm: \"px-2 h-8 text-sm gap-1.5\",\n    md: \"px-3 h-9 text-base gap-2\",\n    xs: \"px-1.5 h-7 text-xs gap-1\",\n  };\n\n  return (\n    <DropdownMenu>\n      <Tooltip>\n        <TooltipTrigger asChild>\n          <DropdownMenuTrigger\n            className={`flex items-center justify-between gap-1 border border-border rounded ${sizeClasses[size]} text-muted-foreground hover:bg-muted hover:text-foreground transition-colors focus-visible:ring-1 focus-visible:ring-ring focus:outline-none min-w-[6rem]`}\n          >\n            {currentLabel}\n            <ChevronDown className=\"w-4 h-4 opacity-70\" strokeWidth={2} />\n          </DropdownMenuTrigger>\n        </TooltipTrigger>\n        <TooltipContent side=\"top\">Select Text format</TooltipContent>\n      </Tooltip>\n\n      <DropdownMenuContent align=\"center\" className=\"min-w-10 space-y-0.5\">\n        {visibleFormats.map((btn) => {\n          const active = Boolean(ctx[btn.activeKey as keyof typeof ctx]);\n          return (\n            <DropdownMenuItem\n              key={btn.tooltip}\n              onClick={() => execute(btn.cmd, ...(btn.args || []))}\n              data-active={active}\n              className={`flex hover:bg-muted/70 data-[active=true]:text-accent-foreground data-[active=true]:bg-accent items-center justify-between gap-2 px-2 py-1.5 cursor-pointer transition-colors ease-in-out duration-150`}\n            >\n              <span className={cn(\"flex items-center gap-2\", btn?.style)}>\n                {btn.icon}\n                {btn.tooltip}\n              </span>\n              {active && <Check className=\"w-4 h-4 text-blue-500\" />}\n            </DropdownMenuItem>\n          );\n        })}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n};\n","\"use client\";\nimport * as React from \"react\";\nimport { ToolbarButton } from \"../toolbar/toolbar\";\nimport { useEditorChain } from \"@/hooks/chain-execute\";\nimport { Bold, Italic, Palette, Underline } from \"lucide-react\";\nimport { ColorHighlighter } from \"@/components/richtext/ui/color-picker\";\n\nconst styleButtons = [\n  {\n    type: \"bold\",\n    cmd: \"bold\",\n    tooltip: \"Bold\",\n    icon: <Bold />,\n    activeKey: \"bold\",\n    action_type: \"button\",\n  },\n  {\n    type: \"italic\",\n    cmd: \"italic\",\n    tooltip: \"Italic\",\n    icon: <Italic />,\n    activeKey: \"italic\",\n    action_type: \"button\",\n  },\n  {\n    type: \"underline\",\n    cmd: \"underline\",\n    tooltip: \"Underline\",\n    icon: <Underline />,\n    activeKey: \"underline\",\n    action_type: \"button\",\n  },\n];\n\nexport const StyleFormatSection: React.FC<StyleFormatSectionProps> = ({\n  ctx,\n  size = \"sm\",\n  highlighter = true,\n}) => {\n  const [isBackground, setIsBackground] = React.useState(\"text\");\n  const { execute } = useEditorChain();\n\n  const handleUpdateColor = (color: string) => {\n    const cmd = isBackground === \"text\" ? \"color\" : \"highlight\";\n    execute(cmd, color);\n  };\n  return (\n    <>\n      {/* Actionable text-style buttons */}\n      {styleButtons.map((btn) => (\n        <ToolbarButton\n          key={btn.type}\n          tooltip={btn.tooltip}\n          onClick={() => execute(btn.cmd)}\n          active={Boolean(ctx[btn.activeKey as keyof typeof ctx])}\n          toolButtonSize={size}\n        >\n          {btn.icon}\n        </ToolbarButton>\n      ))}\n      {highlighter && (\n        <ColorHighlighter\n          size=\"xs\"\n          color={ctx.foreColor}\n          icon={Palette}\n          onChange={handleUpdateColor}\n          isBack={isBackground as \"text\" | \"background\"}\n          onChangeIsBackground={() =>\n            setIsBackground(isBackground === \"text\" ? \"background\" : \"text\")\n          }\n        />\n      )}\n    </>\n  );\n};\n","\"use client\";\n\nimport * as React from \"react\";\nimport { SketchPicker, type ColorResult } from \"react-color\";\nimport { Check } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { ToolbarButton } from \"../toolbar/toolbar\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuTrigger,\n} from \"@/components/ui\";\n\nexport const ColorHighlighter = React.forwardRef<\n  HTMLButtonElement,\n  ColorHighlighterProps\n>(\n  (\n    {\n      color,\n      onChange,\n      disabled,\n      className,\n      isBack,\n      onChangeIsBackground,\n      icon,\n      size = \"sm\",\n      ...props\n    },\n    ref\n  ) => {\n    const [isOpen, setIsOpen] = React.useState(false);\n    const [tempColor, setTempColor] = React.useState(color || \"#000000\");\n    const IconComponent = icon || Check;\n\n    const handleChange = (clr: ColorResult) => {\n      setTempColor(clr.hex);\n    };\n\n    React.useEffect(() => {\n      const close = () => setIsOpen(false);\n      window.addEventListener(\"editor-iframe-click\", close);\n      return () => window.removeEventListener(\"editor-iframe-click\", close);\n    }, []);\n\n    const handleComplete = (clr: ColorResult) => {\n      setTempColor(clr.hex);\n      onChange?.(clr.hex);\n    };\n\n    return (\n      <DropdownMenu open={isOpen} onOpenChange={setIsOpen}>\n        <DropdownMenuTrigger asChild>\n          <ToolbarButton\n            active={isOpen}\n            className={className}\n            ref={ref}\n            disabled={disabled}\n            toolButtonSize={size}\n            tooltip=\"Color\"\n            onClick={() => setIsOpen(!isOpen)}\n            {...props}\n          >\n            <IconComponent color=\"currentColor\" />\n          </ToolbarButton>\n        </DropdownMenuTrigger>\n\n        <DropdownMenuContent\n          className=\"p-2 w-[260px] bg-background shadow-lg border border-border rounded\"\n          align=\"end\"\n        >\n          <Tabs\n            value={isBack}\n            onValueChange={(value) =>\n              onChangeIsBackground?.(value as \"text\" | \"background\")\n            }\n          >\n            <TabsList className=\"w-full rounded border border-border bg-background\">\n              <TabsTrigger\n                data-active={isBack === \"text\"}\n                value=\"text\"\n                className=\"w-full cursor-pointer rounded\"\n              >\n                Text\n              </TabsTrigger>\n              <TabsTrigger\n                data-active={isBack === \"background\"}\n                value=\"background\"\n                className=\"w-full cursor-pointer rounded\"\n              >\n                Background\n              </TabsTrigger>\n            </TabsList>\n            <TabsContent value=\"text\">\n              <Picker\n                handleChange={handleChange}\n                handleComplete={handleComplete}\n                color={tempColor}\n              />\n            </TabsContent>\n            <TabsContent value=\"background\">\n              <Picker\n                handleChange={handleChange}\n                handleComplete={handleComplete}\n                color={tempColor}\n              />\n            </TabsContent>\n          </Tabs>\n        </DropdownMenuContent>\n      </DropdownMenu>\n    );\n  }\n);\n\nColorHighlighter.displayName = \"ColorHighlighter\";\n\nfunction Picker({\n  handleChange,\n  handleComplete,\n  color,\n}: {\n  handleChange: (clr: ColorResult) => void;\n  handleComplete: (clr: ColorResult) => void;\n  color: string;\n}) {\n  return (\n    <SketchPicker\n      color={color}\n      onChange={handleChange}\n      onChangeComplete={handleComplete}\n      disableAlpha={true}\n      presetColors={[\n        \"#4F46E5\",\n        \"#7C3AED\",\n        \"#EC4899\",\n        \"#F43F5E\",\n        \"#EF4444\",\n        \"#F97316\",\n        \"#F59E0B\",\n        \"#10B981\",\n        \"#06B6D4\",\n        \"#0EA5E9\",\n        \"#3B82F6\",\n        \"#64748B\",\n        \"#000000\",\n        \"#FFFFFF\",\n      ]}\n      styles={{\n        default: {\n          picker: {\n            padding: \"0px\",\n            maxWidth: \"100%\",\n            width: \"250px\",\n            background: \"inherit\",\n            boxShadow: \"none\",\n            borderRadius: \"12px\",\n            cursor: \"pointer\",\n          },\n          saturation: {\n            borderRadius: \"6px\",\n            marginBottom: \"12px\",\n            boxShadow: \"0 0 0 1px rgba(0,0,0,0.05)\",\n          },\n          controls: {\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            color: \"inherit\",\n          },\n          color: {\n            color: \"inherit\",\n            background: \"#000\",\n            borderRadius: \"6px\",\n          },\n          activeColor: {\n            borderRadius: \"8px\",\n            border: \"1px solid #444\",\n          },\n          hue: {\n            color: \"inherit\",\n            height: \"12px\",\n            borderRadius: \"8px\",\n          },\n        },\n      }}\n    />\n  );\n}\n","\"use client\";\nimport * as React from \"react\";\nimport { Skeleton } from \"../../ui/skeleton\";\n\n/* ü©∂ Skeleton Loader */\nexport const EditorSkeleton: React.FC<{ animation?: string }> = ({\n  animation = \"pulse\",\n}) => {\n  const base = \"w-full bg-muted\";\n  const animationClass =\n    animation === \"shine\"\n      ? \"relative overflow-hidden before:absolute before:inset-0 before:-translate-x-full before:animate-[shimmer_1.5s_infinite] before:bg-gradient-to-r before:from-transparent before:via-white/30 before:to-transparent\"\n      : \"animate-pulse\";\n\n  return (\n    <div\n      className={`border border-border w-full rounded-md overflow-hidden bg-background ${animationClass}`}\n    >\n      {/* Toolbar Skeleton */}\n      <div className=\"flex items-center gap-2 relative px-2 py-1\">\n        {[1, 2, 3, 4, 5, 6, 7, 8].map((width) => (\n          <Skeleton\n            className={`${base} h-7 ${\n              width === 3 ? \"w-16 lg:w-20\" : \"w-7 lg:w-8\"\n            }  lg:h-8`}\n            key={width}\n          />\n        ))}\n        <Skeleton className=\"absolute right-1\" />\n      </div>\n      <div className=\"h-px bg-border\" />\n      <div className={`${base} h-64`} />\n    </div>\n  );\n};\n\n/* ‚ö™ Dots Loader */\nexport const DotsLoader: React.FC = () => (\n  <div className=\"flex flex-col items-center justify-center h-48 w-full border border-border rounded-md bg-white\">\n    <div className=\"flex space-x-2\">\n      <span className=\"w-3 h-3 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]\" />\n      <span className=\"w-3 h-3 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]\" />\n      <span className=\"w-3 h-3 bg-gray-400 rounded-full animate-bounce\" />\n    </div>\n    <p className=\"text-xs text-muted-foreground mt-3\">Loading editor...</p>\n  </div>\n);\n\n/* üåÄ Spinner Loader */\nexport const SpinnerLoader: React.FC = () => (\n  <div className=\"flex items-center justify-center h-48 w-full border border-border rounded-md bg-white\">\n    <div className=\"w-6 h-6 border-4 border-gray-300 border-t-gray-700 rounded-full animate-spin\" />\n  </div>\n);\n\n/* Tailwind CSS (add to globals.css or tailwind.config.js)\n---------------------------------------------------------\n@keyframes shimmer {\n  100% {\n    transform: translateX(100%);\n  }\n}\n--------------------------------------------------------- */\n","// ToolbarChain.tsx\n\"use client\";\nimport * as React from \"react\";\nimport { useEditor } from \"@/context/editor\";\nimport { EditorChain } from \"@/core/chain\";\nimport { Ban, Minus, Sparkles } from \"lucide-react\";\nimport { TablePicker } from \"../ui/table-picker\";\n\nimport {\n  ToolbarButtonSeparator,\n  ToolbarWrapper,\n  ToolbarButton,\n  ToolbarGroup,\n} from \"./toolbar\";\nimport { HistorySection } from \"../ui/history\";\nimport { StyleFormatSection } from \"../ui/text-style\";\nimport { TextFormatSection } from \"../ui/text-format\";\nimport { ListSelectorSection } from \"../ui/list-selector\";\nimport { IndentOutdentSection } from \"../ui/indent-outdent\";\nimport { TextAlignerSection } from \"../ui/text-aligner\";\nimport { ThemeProvider } from \"@/components/theme-provider\";\nimport { AnchorLink } from \"../ui/link-insert\";\nimport { ImagePickerBlock } from \"../ui/image-picker\";\n\nexport const ToolbarChain: React.FC<ToolbarChainProps> = ({\n  format,\n  image,\n  aiEnhance = false,\n  clear = false,\n}) => {\n  const { iframeRef, ctx } = useEditor();\n  const [chain, setChain] = React.useState<EditorChain | null>(null);\n\n  React.useEffect(() => {\n    const initChain = () => {\n      if (iframeRef.current?.contentWindow && !chain) {\n        setChain(new EditorChain(iframeRef.current.contentWindow));\n      }\n    };\n    // Try immediately, then set up interval\n    initChain();\n    const timer = setInterval(initChain, 300);\n\n    return () => {\n      clearInterval(timer);\n    };\n  }, [iframeRef, chain]);\n\n  return (\n    <ThemeProvider\n      attribute=\"class\"\n      defaultTheme=\"system\"\n      enableSystem\n      disableTransitionOnChange\n    >\n      <ToolbarWrapper className=\"flex flex-nowrap gap-0 border-b py-2 px-3 bg-background/95 backdrop-blur-xs supports-backdrop-blur:bg-background/60 sticky top-0 z-40\">\n        <ToolbarGroup>\n          <HistorySection ctx={ctx} size=\"xs\" />\n        </ToolbarGroup>\n\n        <ToolbarButtonSeparator />\n\n        <ToolbarGroup>\n          {aiEnhance && (\n            <>\n              <ToolbarButton\n                toolButtonSize=\"xs\"\n                tooltip=\"AI Enhance\"\n                className=\"bg-linear-to-r from-purple-500 to-pink-500 text-white hover:from-purple-600 hover:to-pink-600 border-0\"\n              >\n                <Sparkles className=\"w-4 h-4\" />\n              </ToolbarButton>\n            </>\n          )}\n          <TextFormatSection ctx={ctx} size=\"xs\" format={format} />\n        </ToolbarGroup>\n\n        <ToolbarButtonSeparator />\n\n        <ToolbarGroup>\n          <StyleFormatSection ctx={ctx} size=\"xs\" />\n        </ToolbarGroup>\n\n        <ToolbarButtonSeparator />\n\n        <ToolbarGroup>\n          <ListSelectorSection ctx={ctx} size=\"xs\" />\n          <IndentOutdentSection size=\"xs\" ctx={ctx} />\n          <TextAlignerSection ctx={ctx} size=\"xs\" />\n        </ToolbarGroup>\n\n        <ToolbarButtonSeparator />\n\n        <ToolbarGroup>\n          <AnchorLink size=\"xs\" ctx={ctx} />\n          <ImagePickerBlock {...image} />\n          <TablePicker\n            variant=\"ghost\"\n            size=\"icon-xs\"\n            onSelect={(rows: number, cols: number) => {\n              const win = iframeRef.current?.contentWindow;\n              const body = win?.document?.body;\n              body?.focus();\n              chain?.insertTable(rows, cols)?.run();\n            }}\n          />\n          <ToolbarButton\n            toolButtonSize=\"xs\"\n            tooltip=\"Insert Divider\"\n            onClick={() => chain?.insertHTML(\"<hr>\")?.run()}\n          >\n            <Minus className=\"w-4 h-4\" />\n          </ToolbarButton>\n        </ToolbarGroup>\n\n        <ToolbarButtonSeparator />\n\n        {clear && (\n          <ToolbarGroup>\n            <ToolbarButton\n              toolButtonSize=\"xs\"\n              tooltip=\"Clear Formatting\"\n              onClick={() => chain?.clear()?.run()}\n              variant=\"outline\"\n            >\n              <Ban className=\"w-4 h-4\" />\n            </ToolbarButton>\n          </ToolbarGroup>\n        )}\n      </ToolbarWrapper>\n    </ThemeProvider>\n  );\n};\n","\"use client\";\n\nimport * as React from \"react\";\nimport { ThemeProvider as NextThemesProvider } from \"next-themes\";\n\nexport function ThemeProvider({\n  children,\n  ...props\n}: React.ComponentProps<typeof NextThemesProvider>) {\n  return <NextThemesProvider {...props}>{children}</NextThemesProvider>;\n}\n","\"use client\";\n\nimport * as React from \"react\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuGroup,\n  DropdownMenuTrigger,\n  Input,\n  Label,\n  Button,\n  Separator,\n  Switch,\n} from \"@/components/ui\";\nimport { ToolbarButton } from \"../toolbar/toolbar\";\nimport { Link, X, Unlink } from \"lucide-react\";\nimport { useEditorChain } from \"@/hooks/chain-execute\";\nimport { useEditor } from \"@/context/editor\";\n\nexport const AnchorLink: React.FC<ToolbarButtonDefaultProps> = ({\n  size,\n  ctx,\n  ...props\n}) => {\n  const [_open, _setOpen] = React.useState(false);\n  const [url, setUrl] = React.useState(\"\");\n  const [newTab, setNewTab] = React.useState(true);\n  const [error, setError] = React.useState(\"\");\n  const [hasSelection, setHasSelection] = React.useState(false);\n  const { execute } = useEditorChain();\n  const { core } = useEditor();\n\n  /** üß† Check for selected text in the iframe */\n  React.useEffect(() => {\n    const interval = setInterval(() => {\n      const sel = core?.win?.getSelection();\n      if (!sel) return setHasSelection(false);\n      setHasSelection(\n        Boolean(sel.rangeCount && !sel.isCollapsed && sel.toString().trim())\n      );\n    }, 200);\n    return () => clearInterval(interval);\n  }, [core]);\n\n  /** Prefill URL if caret is inside an existing link */\n  React.useEffect(() => {\n    if (ctx.link && core?.win?.getSelection) {\n      const sel = core.win.getSelection();\n      const node = sel?.anchorNode as HTMLElement | null;\n      const linkEl = node?.parentElement?.closest(\"a\");\n      if (linkEl) setUrl(linkEl.getAttribute(\"href\") || \"\");\n    } else if (!ctx.link && !_open) {\n      setUrl(\"\");\n    }\n  }, [ctx.link, _open, core]);\n\n  /** Validate URL */\n  const isValidUrl = (str: string) => {\n    if (!str) return false;\n    try {\n      const u = new URL(str.startsWith(\"http\") ? str : `https://${str}`);\n      return !!u.href;\n    } catch {\n      return false;\n    }\n  };\n\n  /** Handle insert or update link */\n  const handleInsert = () => {\n    if (!isValidUrl(url)) {\n      setError(\"Please enter a valid URL\");\n      return;\n    }\n\n    const formattedUrl = url.startsWith(\"http\") ? url : `https://${url}`;\n    execute(\"link\", formattedUrl);\n\n    // optional new-tab attributes\n    const sel = core?.win?.getSelection();\n    const anchor = sel?.anchorNode?.parentElement?.closest(\"a\");\n    if (anchor && newTab) {\n      anchor.setAttribute(\"target\", \"_blank\");\n      anchor.setAttribute(\"rel\", \"noopener noreferrer\");\n    }\n\n    core?.win?.focus();\n    setError(\"\");\n    _setOpen(false);\n  };\n\n  const handleUnlink = () => {\n    execute(\"unlink\");\n    core?.win?.focus();\n    setUrl(\"\");\n    _setOpen(false);\n  };\n\n  return (\n    <DropdownMenu open={_open} onOpenChange={_setOpen}>\n      <DropdownMenuTrigger asChild>\n        <ToolbarButton\n          tooltip=\"Insert or Edit Link\"\n          toolButtonSize={size}\n          data-active={ctx.link}\n          disabled={!hasSelection && !ctx.link} // üß† disable if no selection & not editing\n          {...props}\n        >\n          <Link className=\"h-4 w-4\" />\n        </ToolbarButton>\n      </DropdownMenuTrigger>\n\n      <DropdownMenuContent\n        align=\"end\"\n        className=\"w-80 rounded-xl p-4 border border-border/50 bg-background/95 backdrop-blur-md shadow-lg space-y-4\"\n      >\n        {/* Header */}\n        <div className=\"flex items-center justify-between\">\n          <h3 className=\"text-sm font-semibold text-foreground\">\n            {ctx.link ? \"Edit Link\" : \"Insert Link\"}\n          </h3>\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"h-6 w-6 cursor-pointer rounded-full text-muted-foreground hover:text-foreground\"\n            onClick={() => _setOpen(false)}\n          >\n            <X />\n          </Button>\n        </div>\n        <Separator />\n\n        {/* Fields */}\n        <DropdownMenuGroup className=\"space-y-3\">\n          <div className=\"space-y-1\">\n            <Label htmlFor=\"url\" className=\"text-sm text-muted-foreground\">\n              URL\n            </Label>\n            <Input\n              id=\"url\"\n              placeholder=\"https://example.com\"\n              value={url}\n              onChange={(e) => setUrl(e.target.value)}\n              className=\"rounded focus-visible:ring-2 focus-visible:ring-primary/40\"\n              autoFocus\n            />\n            {error && (\n              <p className=\"text-xs text-red-500 font-medium pt-1\">{error}</p>\n            )}\n          </div>\n\n          <div className=\"flex items-center justify-between pt-2\">\n            <Label\n              htmlFor=\"new-tab\"\n              className=\"text-sm text-muted-foreground select-none\"\n            >\n              Open in new tab\n            </Label>\n            <Switch id=\"new-tab\" checked={newTab} onCheckedChange={setNewTab} />\n          </div>\n        </DropdownMenuGroup>\n\n        <Separator />\n\n        {/* Actions */}\n        <div className=\"flex justify-between pt-2\">\n          {ctx.link && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"text-muted-foreground hover:text-red-500 gap-1\"\n              onClick={handleUnlink}\n            >\n              <Unlink className=\"h-4 w-4\" />\n              Remove\n            </Button>\n          )}\n          <div className=\"flex gap-2 ml-auto\">\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => _setOpen(false)}\n              className=\"text-muted-foreground hover:text-foreground\"\n            >\n              Cancel\n            </Button>\n            <Button\n              size=\"sm\"\n              disabled={!url.trim()}\n              onClick={handleInsert}\n              className=\"bg-primary text-primary-foreground hover:bg-primary/90\"\n            >\n              {ctx.link ? \"Update\" : \"Insert\"}\n            </Button>\n          </div>\n        </div>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n};\n","\"use client\";\n\nimport * as React from \"react\";\nimport { ImageModal } from \"./image-modal\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuGroup,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui\";\nimport { Button, Input, Label } from \"@/components/ui\";\nimport { ToolbarButton } from \"../toolbar/toolbar\";\nimport { ImagePlus } from \"lucide-react\";\nimport { useEditorChain } from \"@/hooks/chain-execute\";\n\ninterface ImagePickerProps {\n  modal?: boolean;\n  isMultiple?: boolean;\n}\n\nexport const ImagePickerBlock: React.FC<ImagePickerProps> = ({\n  modal,\n  isMultiple,\n}) => {\n  const [_open, _setOpen] = React.useState<boolean>(false);\n  const [urls, setUrls] = React.useState<string[]>([\"\"]);\n  const [alts, setAlts] = React.useState<string[]>([\"\"]);\n  const { execute } = useEditorChain();\n\n  const addField = () => {\n    setUrls((prev) => [...prev, \"\"]);\n    setAlts((prev) => [...prev, \"\"]);\n  };\n\n  const handleChange = (i: number, type: \"url\" | \"alt\", value: string) => {\n    if (type === \"url\") {\n      const updated = [...urls];\n      updated[i] = value;\n      setUrls(updated);\n    } else {\n      const updated = [...alts];\n      updated[i] = value;\n      setAlts(updated);\n    }\n  };\n\n  const handleInsert = () => {\n    const images = urls\n      .map((u, i) => ({ url: u.trim(), alt: alts[i].trim() }))\n      .filter((img) => img.url);\n\n    if (!images.length) return;\n\n    if (images.length === 1) {\n      execute(\"insertImage\", (images[0].url, images[0].alt));\n    } else {\n      execute(\"insertImages\", images);\n    }\n\n    // reset\n    setUrls([\"\"]);\n    setAlts([\"\"]);\n    _setOpen(false);\n  };\n\n  return !modal ? (\n    <DropdownMenu open={_open} onOpenChange={_setOpen}>\n      <DropdownMenuTrigger asChild>\n        <ToolbarButton\n          toolButtonSize=\"xs\"\n          active={_open}\n          tooltip=\"Add Image URL\"\n        >\n          <ImagePlus className=\"h-4 w-4\" />\n        </ToolbarButton>\n      </DropdownMenuTrigger>\n\n      <DropdownMenuContent\n        align=\"end\"\n        className=\"w-72 p-4 space-y-4 rounded-md\"\n      >\n        <DropdownMenuLabel className=\"text-sm px-0 py-0 my-0 font-medium\">\n          Add Image URL(s)\n        </DropdownMenuLabel>\n        <DropdownMenuSeparator className=\"mb-2\" />\n\n        {urls.map((url, i) => (\n          <DropdownMenuGroup key={i} className=\"space-y-2\">\n            <Label>Image URL {urls.length > 1 ? i + 1 : \"\"}</Label>\n            <Input\n              placeholder=\"https://example.com/image.png\"\n              className=\"rounded\"\n              value={url}\n              onChange={(e) => handleChange(i, \"url\", e.target.value)}\n            />\n            <Label>Alt Text</Label>\n            <Input\n              className=\"rounded\"\n              placeholder=\"Describe the image\"\n              value={alts[i]}\n              onChange={(e) => handleChange(i, \"alt\", e.target.value)}\n            />\n          </DropdownMenuGroup>\n        ))}\n\n        <Button\n          variant=\"secondary\"\n          className=\"rounded\"\n          size=\"sm\"\n          onClick={addField}\n        >\n          + Add More\n        </Button>\n\n        <Button\n          onClick={handleInsert}\n          variant=\"primary\"\n          size=\"sm\"\n          className=\"w-full rounded\"\n        >\n          Insert Image{urls.length > 1 ? \"s\" : \"\"}\n        </Button>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  ) : (\n    <ImageModal\n      open={_open}\n      multiple={isMultiple}\n      setOpen={_setOpen}\n      onInsert={(images) => {\n        console.log(images);\n        // images = [{ url, alt }]\n\n        if (images.length === 1) {\n          const img = images[0];\n          execute(\"insertImage\", img?.url, img?.alt);\n        } else {\n          execute(\"insertImages\", images);\n        }\n      }}\n    />\n  );\n};\n","\"use client\";\n\nimport * as React from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n  Button,\n  Skeleton,\n} from \"@/components/ui\";\nimport {\n  Upload,\n  ImagePlus,\n  Check,\n  Loader2,\n  Search,\n  Grid3X3,\n  List,\n} from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { ToolbarButton } from \"../toolbar/toolbar\";\nimport Image from \"next/image\";\n\ntype ImageFormat = {\n  url: string;\n  alt: string;\n};\ninterface ImageModalProps {\n  onInsert?: (url: ImageFormat[]) => void;\n  selected?: ImageFormat;\n  aspectRatio?: \"square\" | \"portrait\" | \"landscape\" | \"free\";\n  maxSize?: number;\n  multiple?: boolean;\n  open?: boolean;\n  setOpen?: (value: boolean) => void;\n}\n\nexport const ImageModal: React.FC<ImageModalProps> = ({\n  onInsert,\n  selected,\n  maxSize = 5,\n  multiple = true,\n  open,\n  setOpen,\n}) => {\n  const [isUploading, setIsUploading] = React.useState(false);\n  const [images, setImages] = React.useState<ImageFormat[]>([]);\n  const [loadingImages, setLoadingImages] = React.useState(true);\n  const [uploadProgress, setUploadProgress] = React.useState(0);\n  const [searchQuery, setSearchQuery] = React.useState(\"\");\n  const [viewMode, setViewMode] = React.useState<\"grid\" | \"list\">(\"grid\");\n  const [dragActive, setDragActive] = React.useState(false);\n  const [selectedImages, setSelectedImage] = React.useState<ImageFormat[]>(\n    selected ? [selected] : []\n  );\n\n  const filteredImages = images.filter(\n    (img) =>\n      img.url.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      img.alt.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  /** Simulated backend fetch */\n  React.useEffect(() => {\n    setLoadingImages(true);\n    setTimeout(() => {\n      setImages([\n        {\n          url: \"https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=400&h=400&fit=crop\",\n          alt: \"First Image\",\n        },\n        {\n          url: \"https://images.unsplash.com/photo-1503023345310-bd7c1de61c7d?w=400&h=600&fit=crop\",\n          alt: \"Second Image\",\n        },\n        {\n          url: \"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400&h=400&fit=crop\",\n          alt: \"Third Image\",\n        },\n        {\n          url: \"https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=400&h=400&fit=crop\",\n          alt: \"Fourth Image\",\n        },\n        {\n          url: \"https://images.unsplash.com/photo-1517841905240-472988babdf9?w=600&h=400&fit=crop\",\n          alt: \"Fifth Image\",\n        },\n        {\n          url: \"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=400&h=400&fit=crop\",\n          alt: \"Sixth Image\",\n        },\n        {\n          url: \"https://images.unsplash.com/photo-1492633423870-43d1cd2775eb?w=400&h=600&fit=crop\",\n          alt: \"Seventh Image\",\n        },\n        {\n          url: \"https://images.unsplash.com/photo-1519167758481-83f550bb49b3?w=600&h=400&fit=crop\",\n          alt: \"Eight Image\",\n        },\n      ]);\n      setLoadingImages(false);\n    }, 1000);\n  }, []);\n\n  /** Upload Simulation */\n  const handleUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    if (file.size > maxSize * 1024 * 1024)\n      return alert(`Max size is ${maxSize}MB`);\n    if (!file.type.startsWith(\"image/\"))\n      return alert(\"Please upload an image file\");\n\n    setIsUploading(true);\n    setUploadProgress(0);\n\n    const progress = setInterval(() => {\n      setUploadProgress((prev) => {\n        if (prev >= 95) {\n          clearInterval(progress);\n          return 95;\n        }\n        return prev + 5;\n      });\n    }, 100);\n\n    const reader = new FileReader();\n    reader.onload = () => {\n      setTimeout(() => {\n        const result = reader.result as string;\n        const image = {\n          url: result,\n          alt: result,\n        };\n\n        setSelectedImage?.((prev) => [...prev, image]);\n        setIsUploading(false);\n        setUploadProgress(100);\n        clearInterval(progress);\n      }, 1800);\n    };\n    reader.readAsDataURL(file);\n  };\n\n  /** Drag & Drop Upload */\n  const handleDrag = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === \"dragenter\" || e.type === \"dragover\") setDragActive(true);\n    if (e.type === \"dragleave\") setDragActive(false);\n  };\n\n  /** üñ±Ô∏è Choose from existing images */\n  const handleSelectImage = (url: ImageFormat) => {\n    if (multiple) {\n      setSelectedImage((prev) =>\n        prev.includes(url)\n          ? prev.filter((item) => item.url !== url.url)\n          : [...prev, url]\n      );\n    } else {\n      setSelectedImage([url]);\n    }\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n    const files = e.dataTransfer.files;\n    if (files?.[0]) {\n      const event = {\n        target: { files },\n      } as React.ChangeEvent<HTMLInputElement>;\n      handleUpload(event);\n    }\n  };\n\n  const isSelected = (src: ImageFormat) => {\n    return selectedImages.find((i) => i?.url === src?.url);\n  };\n\n  return (\n    <div className=\"flex items-center gap-3\">\n      {/* Main Dialog */}\n      <Dialog open={open} onOpenChange={setOpen}>\n        <DialogTrigger asChild>\n          <ToolbarButton\n            tooltip=\"Add Media\"\n            toolButtonSize=\"xs\"\n            data-active={open}\n          >\n            <ImagePlus className=\"h-4 w-4\" />\n          </ToolbarButton>\n        </DialogTrigger>\n\n        <DialogContent className=\"sm:max-w-md max-h-[80vh] p-0 overflow-hidden rounded-md shadow-2xl flex flex-col\">\n          {/* Header */}\n          <DialogHeader className=\"p-4 border-b border-border/50 sticky top-0 bg-background z-0\">\n            <DialogTitle className=\"text-lg font-semibold\">\n              Choose or Upload Image\n            </DialogTitle>\n\n            <div className=\"flex items-center gap-2 justify-between mt-3\">\n              {/* Search */}\n              <div className=\"relative w-full\">\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <input\n                  type=\"text\"\n                  placeholder=\"Search images...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-1.5 border border-border rounded-md focus:ring-2 focus:ring-primary/20 focus:border-primary text-sm\"\n                />\n              </div>\n\n              {/* View Toggle */}\n              <div className=\"flex border border-border rounded-md p-1 ml-3 shrink-0\">\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => setViewMode(\"grid\")}\n                  data-active={viewMode === \"grid\"}\n                  className={cn(\n                    \"rounded-md transition-colors border-0 data-[active=true]:bg-accent\"\n                  )}\n                >\n                  <Grid3X3 className=\"h-4 w-4\" />\n                </Button>\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => setViewMode(\"list\")}\n                  data-active={viewMode === \"list\"}\n                  className={cn(\n                    \"p-1.5 rounded-md transition-colors border-0 data-[active=true]:bg-accent\"\n                  )}\n                >\n                  <List className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            </div>\n          </DialogHeader>\n\n          {/* Scrollable Body */}\n          <div className=\"flex-1 overflow-y-auto p-4 space-y-3 bg-background\">\n            {/* Upload Section */}\n            <div\n              className={cn(\n                \"relative border-2 border-dashed rounded-xl p-6 flex flex-col items-center justify-center text-center transition-all duration-300\",\n                dragActive\n                  ? \"border-primary bg-primary/5\"\n                  : \"border-border hover:border-primary/60 hover:bg-primary/5\",\n                isUploading && \"bg-muted/50\"\n              )}\n              onDragEnter={handleDrag}\n              onDragLeave={handleDrag}\n              onDragOver={handleDrag}\n              onDrop={handleDrop}\n            >\n              {!isUploading ? (\n                <>\n                  <Upload className=\"h-8 w-8 text-primary mb-2\" />\n                  <p className=\"font-medium\">\n                    Drop your image or click to browse\n                  </p>\n                  <p className=\"text-sm text-muted-foreground\">\n                    JPG, PNG, WEBP ‚Äî Max {maxSize}MB\n                  </p>\n                  <input\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={handleUpload}\n                    className=\"absolute inset-0 opacity-0 cursor-pointer\"\n                  />\n                </>\n              ) : (\n                <div className=\"flex flex-col items-center space-y-3\">\n                  <Loader2 className=\"h-10 w-10 text-primary animate-spin\" />\n                  <div className=\"w-48 bg-muted rounded-full h-2 overflow-hidden\">\n                    <div\n                      className=\"bg-primary h-2 rounded-full transition-all\"\n                      style={{ width: `${uploadProgress}%` }}\n                    />\n                  </div>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Uploading... {uploadProgress}%\n                  </p>\n                </div>\n              )}\n            </div>\n\n            {/* File Gallery */}\n            <div className=\"flex flex-col\">\n              <p className=\"text-sm font-medium mb-3 text-muted-foreground\">\n                Your Media Files\n              </p>\n              {loadingImages ? (\n                <div\n                  className={cn(\n                    \"gap-4\",\n                    viewMode === \"grid\" ? \"grid grid-cols-3\" : \"space-y-3\"\n                  )}\n                >\n                  {[...Array(6)].map((_, i) =>\n                    viewMode === \"grid\" ? (\n                      <Skeleton key={i} className=\"h-32 rounded-lg\" />\n                    ) : (\n                      <div key={i} className=\"flex gap-3 items-center\">\n                        <Skeleton className=\"h-16 w-16 rounded-lg\" />\n                        <Skeleton className=\"h-4 flex-1\" />\n                      </div>\n                    )\n                  )}\n                </div>\n              ) : filteredImages.length === 0 ? (\n                <div className=\"flex flex-col items-center py-12 text-center text-muted-foreground\">\n                  <ImagePlus className=\"h-10 w-10 opacity-40 mb-3\" />\n                  <p>No images found</p>\n                </div>\n              ) : (\n                <div\n                  className={cn(\n                    \"gap-4\",\n                    viewMode === \"grid\"\n                      ? \"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5\"\n                      : \"flex flex-col space-y-3\"\n                  )}\n                >\n                  {filteredImages.map((src, i) => (\n                    <div\n                      key={i}\n                      onClick={() => handleSelectImage(src)}\n                      className={cn(\n                        \"cursor-pointer relative rounded-md group transition-all duration-200 border overflow-hidden\",\n                        isSelected(src)\n                          ? \"border-blue-500 ring-2 ring-blue-500/30\"\n                          : \"border-border hover:border-blue-500/50 hover:shadow-sm\",\n                        viewMode === \"list\" && \"flex items-center gap-4 p-1\"\n                      )}\n                    >\n                      <div\n                        className={cn(\n                          \"p-0 relative\",\n                          viewMode === \"list\" && \"flex items-center gap-4\"\n                        )}\n                      >\n                        <div\n                          className={cn(\n                            \"overflow-hidden bg-muted\",\n                            viewMode === \"grid\" ? \"aspect-square\" : \"w-16 h-16\",\n                            \"rounded-md\"\n                          )}\n                        >\n                          <Image\n                            width={100}\n                            height={100}\n                            loading=\"lazy\"\n                            src={src.url}\n                            alt={`Media ${i}`}\n                            className=\"object-cover w-full h-full group-hover:scale-105 ease-in-out duration-150 transform transition-transform\"\n                          />\n                        </div>\n                        {isSelected(src) && (\n                          <div className=\"absolute top-2 right-2 bg-accent text-accent-foreground rounded-full p-1 shadow\">\n                            <Check className=\"h-3 w-3\" />\n                          </div>\n                        )}\n                        {!isSelected(src) && (\n                          <div className=\"absolute top-2 right-2 bg-accent text-accent-foreground rounded-full p-1 shadow opacity-0 group-hover:opacity-60 transition-transform transform ease-in-out duration-100\">\n                            <Check className=\"h-3 w-3\" />\n                          </div>\n                        )}\n                        {viewMode === \"list\" && (\n                          <div className=\"flex-1 min-w-0\">\n                            <p className=\"text-sm font-medium truncate\">\n                              Image {i + 1}\n                            </p>\n                            <p className=\"text-xs text-muted-foreground truncate\">\n                              {src.url.split(\"/\").pop()}\n                            </p>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Footer */}\n          <div className=\"flex justify-between items-center border-t border-border bg-muted/10 p-3 sticky bottom-0 z-10\">\n            <span className=\"text-sm text-muted-foreground\">\n              {selectedImages.length > 0 ? (\n                <span className=\"flex items-center gap-2\">\n                  <Check className=\"h-4 w-4 text-green-600\" />\n                  Image selected{\" \"}\n                  <span className=\"text-blue-500 font-bold\">\n                    {selectedImages.length}\n                  </span>\n                </span>\n              ) : (\n                \"No image selected\"\n              )}\n            </span>\n            <div className=\"flex gap-2\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setOpen?.(!open)}\n              >\n                Cancel\n              </Button>\n              <Button\n                size=\"sm\"\n                variant=\"primary\"\n                disabled={!selectedImages.length || isUploading}\n                onClick={() => {\n                  onInsert?.(selectedImages);\n                  setOpen?.(!open);\n                }}\n                className=\"gap-2\"\n              >\n                {isUploading ? (\n                  <>\n                    <Loader2 className=\"h-4 w-4 animate-spin\" /> Uploading...\n                  </>\n                ) : (\n                  `Select`\n                )}\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA,qBAAO;;;ACFP,IAAAA,UAAuB;;;ACCvB,YAAuB;;;ACDhB,SAAS,oBAAoB;AAClC,MAAI,YAA0B;AAC9B,QAAM,YAA4C,CAAC;AACnD,QAAM,YAA4C,CAAC;AAgBnD,QAAM,qBAAqB;AAE3B,WAAS,YAAY,OAAO,GAAG,OAAO,GAAG;AACvC,UAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,YAAQ,YAAY;AACpB,YAAQ,MAAM,WAAW;AACzB,YAAQ,MAAM,QAAQ;AAEtB,UAAM,QAAQ,SAAS,cAAc,OAAO;AAC5C,UAAM,MAAM,iBAAiB;AAC7B,UAAM,MAAM,QAAQ;AACpB,UAAM,MAAM,cAAc;AAC1B,YAAQ,YAAY,KAAK;AAEzB,aAAS,IAAI,GAAG,IAAI,MAAM,KAAK;AAC7B,YAAM,KAAK,SAAS,cAAc,IAAI;AACtC,eAAS,IAAI,GAAG,IAAI,MAAM,KAAK;AAC7B,cAAM,KAAK,SAAS,cAAc,IAAI;AACtC,WAAG,MAAM,SAAS;AAClB,WAAG,MAAM,UAAU;AACnB,WAAG,YAAY;AACf,WAAG,YAAY,EAAE;AAAA,MACnB;AACA,YAAM,YAAY,EAAE;AAAA,IACtB;AAEA,aAAS;AAAA,MACP;AAAA,MACA;AAAA,MACA,QAAQ,YAAY;AAAA,IACtB;AAEA,eAAW,MAAM;AACf,YAAM,MAAM,SAAS,KAAK;AAAA,QACxB;AAAA,MACF;AACA,UAAI,KAAK;AACP,wBAAgB,GAAG;AACnB,8BAAsB,GAAG;AAAA,MAC3B;AAAA,IACF,GAAG,EAAE;AAAA,EACP;AAEA,WAAS,gBAAgB,OAAyB;AAChD,UAAM,QAAQ,MAAM,KAAK,CAAC;AAC1B,QAAI,CAAC,MAAO;AAEZ,UAAM,QAAQ,MAAM,MAAM;AAC1B,UAAM,MAAM,MAAM;AAElB,aAAS,IAAI,GAAG,IAAI,MAAM,KAAK,QAAQ,KAAK;AAC1C,eAAS,IAAI,GAAG,IAAI,OAAO,KAAK;AAC9B,cAAM,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,MAAM,QAAQ,MAAM;AAAA,MAC7C;AAAA,IACF;AAAA,EACF;AAEA,WAAS,sBAAsB,OAAyB;AACtD,UAAM,UAAU,MAAM;AACtB,YAAQ,MAAM,WAAW;AAEzB,YAAQ,iBAAiB,sBAAsB,EAAE,QAAQ,CAAC,MAAM,EAAE,OAAO,CAAC;AAE1E,UAAM,OAAO,MAAM,MAAM,sBAAsB;AAC/C,UAAM,WAAW,MAAM,QAAQ,sBAAsB;AAErD,aAAS,WAAW,QAAqB;AACvC,YAAM,KAAK,SAAS,cAAc,KAAK;AACvC,SAAG,YAAY;AACf,SAAG,QAAQ,SAAS;AAEpB,SAAG;AAAA,QAAiB;AAAA,QAAc,MAChC,QAAQ,UAAU,IAAI,qBAAqB;AAAA,MAC7C;AACA,SAAG;AAAA,QAAiB;AAAA,QAAc,MAChC,QAAQ,UAAU,OAAO,qBAAqB;AAAA,MAChD;AAEA,cAAQ,YAAY,EAAE;AACtB,SAAG,MAAM,WAAW;AACpB,aAAO;AAAA,IACT;AAEA,UAAM,UAAU,WAAW,UAAU;AACrC,UAAM,WAAW,WAAW,WAAW;AACvC,UAAM,SAAS,WAAW,SAAS;AACnC,UAAM,YAAY,WAAW,YAAY;AACzC,UAAM,WAAW,WAAW,WAAW;AACvC,UAAM,WAAW,WAAW,WAAW;AACvC,UAAM,WAAW,WAAW,WAAW;AACvC,UAAM,WAAW,WAAW,WAAW;AAEvC,aAAS,WAAW;AAClB,YAAM,IAAI,KAAK;AACf,YAAM,IAAI,SAAS;AACnB,YAAM,aAAa;AAEnB,cAAQ,MAAM,OAAO,EAAE,OAAO,EAAE,OAAO,IAAI;AAC3C,cAAQ,MAAM,MAAM;AACpB,cAAQ,MAAM,QAAQ;AACtB,cAAQ,MAAM,SAAS,MAAM,eAAe;AAC5C,cAAQ,MAAM,SAAS;AAEvB,eAAS,MAAM,OAAO,EAAE,QAAQ,EAAE,OAAO,IAAI;AAC7C,eAAS,MAAM,MAAM;AACrB,eAAS,MAAM,QAAQ;AACvB,eAAS,MAAM,SAAS,MAAM,eAAe;AAC7C,eAAS,MAAM,SAAS;AAExB,aAAO,MAAM,MAAM,EAAE,MAAM,EAAE,MAAM,IAAI;AACvC,aAAO,MAAM,OAAO;AACpB,aAAO,MAAM,SAAS;AACtB,aAAO,MAAM,QAAQ,MAAM,cAAc;AACzC,aAAO,MAAM,SAAS;AAEtB,gBAAU,MAAM,MAAM,EAAE,SAAS,EAAE,MAAM,IAAI;AAC7C,gBAAU,MAAM,OAAO;AACvB,gBAAU,MAAM,SAAS;AACzB,gBAAU,MAAM,QAAQ,MAAM,cAAc;AAC5C,gBAAU,MAAM,SAAS;AAEzB,eAAS,MAAM,OAAO,EAAE,OAAO,EAAE,OAAO,aAAa,IAAI;AACzD,eAAS,MAAM,MAAM,EAAE,MAAM,EAAE,MAAM,aAAa,IAAI;AACtD,eAAS,MAAM,QAAQ,aAAa;AACpC,eAAS,MAAM,SAAS,aAAa;AACrC,eAAS,MAAM,SAAS;AAExB,eAAS,MAAM,OAAO,EAAE,QAAQ,EAAE,OAAO,aAAa,IAAI;AAC1D,eAAS,MAAM,MAAM,EAAE,MAAM,EAAE,MAAM,aAAa,IAAI;AACtD,eAAS,MAAM,QAAQ,aAAa;AACpC,eAAS,MAAM,SAAS,aAAa;AACrC,eAAS,MAAM,SAAS;AAExB,eAAS,MAAM,OAAO,EAAE,OAAO,EAAE,OAAO,aAAa,IAAI;AACzD,eAAS,MAAM,MAAM,EAAE,SAAS,EAAE,MAAM,aAAa,IAAI;AACzD,eAAS,MAAM,QAAQ,aAAa;AACpC,eAAS,MAAM,SAAS,aAAa;AACrC,eAAS,MAAM,SAAS;AAExB,eAAS,MAAM,OAAO,EAAE,QAAQ,EAAE,OAAO,aAAa,IAAI;AAC1D,eAAS,MAAM,MAAM,EAAE,SAAS,EAAE,MAAM,aAAa,IAAI;AACzD,eAAS,MAAM,QAAQ,aAAa;AACpC,eAAS,MAAM,SAAS,aAAa;AACrC,eAAS,MAAM,SAAS;AAAA,IAC1B;AAEA,aAAS;AACT,QAAI,eAAe,QAAQ,EAAE,QAAQ,KAAK;AAI1C,QAAI,SAA6B;AACjC,QAAI,SAAS;AACb,QAAI,SAAS;AACb,QAAI,SAAS;AACb,QAAI,iBAAiB;AAErB,YAAQ,iBAAiB,aAAa,CAAC,MAAM;AAjLjD;AAkLM,YAAM,UAAU,OAAE,WAAF,mBAA0B;AAAA,QACxC;AAAA;AAEF,UAAI,CAAC,OAAQ;AAEb,eAAS,OAAO,QAAQ;AAExB,eAAS,EAAE;AACX,eAAS,EAAE;AACX,eAAS,MAAM;AACf,uBAAiB,MAAM,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE;AAExC,QAAE,eAAe;AACjB,eAAS,iBAAiB,aAAa,MAAM;AAC7C,eAAS,iBAAiB,WAAW,QAAQ;AAAA,IAC/C,CAAC;AAED,aAAS,OAAO,GAAe;AAC7B,UAAI,CAAC,OAAQ;AAEb,YAAM,QAAQ,EAAE,UAAU;AAC1B,YAAM,QAAQ,EAAE,UAAU;AAE1B,YAAM,KAAK,QAAQ;AACnB,YAAM,KAAK,QAAQ;AAGnB,UAAI,WAAW,aAAa;AAC1B,cAAM,MAAM,QAAQ,KAAK,IAAI,IAAI,SAAS,EAAE,IAAI;AAAA,MAClD;AACA,UAAI,WAAW,YAAY;AACzB,cAAM,MAAM,QAAQ,KAAK,IAAI,IAAI,SAAS,EAAE,IAAI;AAAA,MAClD;AAGA,UAAI,WAAW,cAAc;AAC3B,cAAM,OAAO,KAAK,IAAI,IAAI,iBAAiB,EAAE;AAC7C,mBAAW,IAAI;AAAA,MACjB;AACA,UAAI,WAAW,WAAW;AACxB,cAAM,OAAO,KAAK,IAAI,IAAI,iBAAiB,EAAE;AAC7C,mBAAW,IAAI;AAAA,MACjB;AAGA,UAAI,OAAO,WAAW,QAAQ,GAAG;AAC/B,cAAM,OAAO,KAAK,IAAI,IAAI,SAAS,EAAE;AACrC,cAAM,OAAO,KAAK,IAAI,IAAI,iBAAiB,EAAE;AAE7C,cAAM,MAAM,QAAQ,OAAO;AAC3B,mBAAW,IAAI;AAAA,MACjB;AAEA,eAAS;AAAA,IACX;AAEA,aAAS,WAAW,GAAW;AAC7B,iBAAW,OAAO,MAAM,MAAM;AAC5B,mBAAW,QAAQ,IAAI,OAAO;AAC5B,eAAK,MAAM,SAAS,IAAI;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,aAAS,WAAW;AAClB,eAAS;AACT,eAAS,oBAAoB,aAAa,MAAM;AAChD,eAAS,oBAAoB,WAAW,QAAQ;AAAA,IAClD;AAAA,EACF;AAMA,WAAS,oBAAoB;AAC3B,UAAM,QAAQ,YAAY,MAAM;AAC9B,UAAI,SAAS,QAAQ,SAAS,KAAK,mBAAmB;AACpD,sBAAc,KAAK;AACnB,eAAO,YAAY,EAAE,MAAM,eAAe,GAAG,GAAG;AAAA,MAClD;AAAA,IACF,GAAG,EAAE;AAAA,EACP;AAEA,WAAS,gBAAgB;AACvB,UAAM,IAAI,OAAO,aAAa;AAC9B,QAAI,KAAK,EAAE,aAAa,EAAG,aAAY,EAAE,WAAW,CAAC;AAAA,EACvD;AAEA,WAAS,mBAAmB;AAC1B,QAAI,CAAC,UAAW;AAChB,UAAM,IAAI,OAAO,aAAa;AAC9B,2BAAG;AACH,2BAAG,SAAS;AAAA,EACd;AAGA,WAAS,mBAAmB;AAC1B,UAAM,MAAM,OAAO,aAAa;AAChC,QAAI,CAAC,OAAO,IAAI,eAAe,EAAG,QAAO;AACzC,UAAM,QAAQ,IAAI,WAAW,CAAC;AAC9B,UAAM,OAAiB,CAAC;AAExB,QAAI,OAAoB,MAAM;AAE9B,WAAO,QAAQ,SAAS,SAAS,MAAM;AACrC,YAAM,aAA0B,KAAK;AACrC,UAAI,CAAC,WAAY;AAGjB,YAAM,gBAAgB,MAAM,KAAK,WAAW,UAAU;AACtD,YAAM,QAAQ,cAAc,QAAQ,IAAiB;AAErD,WAAK,QAAQ,KAAK;AAClB,aAAO;AAAA,IACT;AAEA,WAAO,EAAE,MAAM,QAAQ,MAAM,YAAY;AAAA,EAC3C;AAEA,WAAS,iBAAiB,KAAgD;AA1S5E;AA2SI,QAAI,CAAC,IAAK;AACV,QAAI,OAAoB,SAAS;AACjC,eAAW,SAAS,IAAI,MAAM;AAC5B,UAAI,EAAC,6BAAM,WAAW,QAAQ;AAC9B,aAAO,KAAK,WAAW,KAAK;AAAA,IAC9B;AAEA,QAAI,CAAC,KAAM;AACX,UAAM,QAAQ,SAAS,YAAY;AACnC,QAAI;AACF,YAAM,SAAS,MAAM,KAAK,IAAI,IAAI,UAAQ,UAAK,gBAAL,mBAAkB,WAAU,CAAC,CAAC;AACxE,YAAM,SAAS,IAAI;AACnB,YAAM,MAAM,OAAO,aAAa;AAChC,iCAAK;AACL,iCAAK,SAAS;AAAA,IAChB,SAAQ;AAAA,IAER;AAAA,EACF;AAEA,WAAS,eACP,MACA,WACoB;AACpB,QAAI,CAAC,KAAM,QAAO;AAElB,QAAI,KACF,KAAK,aAAa,KAAK,eAClB,OACD,KAAK;AAEX,WAAO,IAAI;AACT,UAAI,GAAG,QAAQ,SAAS,EAAG,QAAO;AAClC,WAAK,GAAG;AAAA,IACV;AAEA,WAAO;AAAA,EACT;AAEA,WAAS,KAAK,MAAc,UAAmC,CAAC,GAAG;AACjE,WAAO,YAAY,OAAO,OAAO,EAAE,KAAK,GAAG,OAAO,GAAG,GAAG;AAAA,EAC1D;AAEA,MACE,SAAS,eAAe,cACxB,SAAS,eAAe,eACxB;AACA,sBAAkB;AAAA,EACpB,OAAO;AACL,WAAO,iBAAiB,oBAAoB,iBAAiB;AAAA,EAC/D;AAGA,WAAS,wBAAwB;AAC/B,UAAM,OAAO,SAAS;AACtB,UAAM,OAAO,KAAK,UACf,QAAQ,gBAAgB,EAAE,EAC1B,QAAQ,iBAAiB,EAAE,EAC3B,QAAQ,mBAAmB,EAAE,EAC7B,QAAQ,WAAW,EAAE,EACrB,QAAQ,QAAQ,EAAE,EAClB,KAAK;AAER,QAAI,KAAK,WAAW,GAAG;AACrB,WAAK,YAAY;AAEjB,YAAM,SAAS,KAAK,cAAc,GAAG;AACrC,YAAM,QAAQ,SAAS,YAAY;AACnC,YAAM,MAAM,OAAO,aAAa;AAChC,UAAI,QAAQ;AACV,cAAM,SAAS,QAAQ,CAAC;AACxB,cAAM,SAAS,IAAI;AACnB,mCAAK;AACL,mCAAK,SAAS;AAAA,MAChB;AAAA,IACF;AAAA,EACF;AAGA,WAAS,mBAAmB;AAC1B,UAAM,OAAO,SAAS;AAEtB,aAAS,kBAA2B;AAClC,YAAM,OAAO,KAAK,UACf,QAAQ,gBAAgB,EAAE,EAC1B,QAAQ,iBAAiB,EAAE,EAC3B,QAAQ,mBAAmB,EAAE,EAC7B,QAAQ,WAAW,EAAE,EACrB,QAAQ,QAAQ,EAAE,EAClB,KAAK;AACR,aAAO,KAAK,WAAW;AAAA,IACzB;AAEA,aAAS,oBAAoB;AAC3B,UAAI,gBAAgB,EAAG,MAAK,UAAU,IAAI,OAAO;AAAA,UAC5C,MAAK,UAAU,OAAO,OAAO;AAAA,IACpC;AAEA,UAAM,QAAQ,SAAS,cAAc,OAAO;AAC5C,UAAM,cAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWpB,aAAS,KAAK,YAAY,KAAK;AAE/B,SAAK,iBAAiB,SAAS,iBAAiB;AAChD,SAAK,iBAAiB,SAAS,iBAAiB;AAChD,SAAK,iBAAiB,QAAQ,iBAAiB;AAC/C,sBAAkB;AAAA,EACpB;AAGA,mBAAiB;AACjB,wBAAsB;AACtB,gBAAc;AAGd,WAAS,iBAAiB,mBAAmB,MAAM;AAEjD,UAAM,MAAM,OAAO,aAAa;AAEhC,QAAI,SAAS;AACb,QAAI;AACF,eAAS,SAAS,kBAAkB,YAAY;AAAA,IAClD,SAAQ;AACN,eAAS;AAAA,IACX;AAGA,QAAI,OAAO,IAAI,YAAY;AACzB,YAAM,gBACJ,IAAI,WAAW,aAAa,KAAK,eAC5B,IAAI,aACJ,IAAI,WAAW;AACtB,UAAI,eAAe;AACjB,cAAM,aAAa,cAAc,QAAQ,GAAG;AAC5C,YAAI,WAAY,UAAS;AAAA,MAC3B;AAAA,IACF;AAEA,aAAS,SAAS,UAA6B;AAC7C,YAAMC,OAAM,OAAO,aAAa;AAChC,UAAI,CAACA,QAAOA,KAAI,eAAe,EAAG,QAAO;AAEzC,UAAI,OAAoBA,KAAI;AAC5B,UAAI,CAAC,KAAM,QAAO;AAElB,UAAI,KAAK,aAAa,KAAK,UAAW,QAAO,KAAK;AAElD,aAAO,QAAQ,SAAS,SAAS,MAAM;AACrC,YAAI,KAAK,aAAa,KAAK,cAAc;AACvC,gBAAM,MAAO,KAAqB,QAAQ,YAAY;AACtD,cAAI,SAAS,SAAS,GAAG,EAAG,QAAO;AAAA,QACrC;AACA,eAAO,KAAK;AAAA,MACd;AACA,aAAO;AAAA,IACT;AAEA,UAAM,UAAU;AAAA,MACd,OAAO,SAAS,kBAAkB,aAAa,KAAK;AAAA,MACpD,MAAM,SAAS,kBAAkB,MAAM;AAAA,MACvC,QAAQ,SAAS,kBAAkB,QAAQ;AAAA,MAC3C,WAAW,SAAS,kBAAkB,WAAW;AAAA,MACjD,QAAQ,SAAS,kBAAkB,eAAe;AAAA,MAClD,aAAa,SAAS,kBAAkB,mBAAmB;AAAA,MAC3D,eAAe,SAAS,kBAAkB,qBAAqB;AAAA,MAC/D,aAAa,SAAS,kBAAkB,aAAa;AAAA,MACrD,eAAe,SAAS,kBAAkB,eAAe;AAAA,MACzD,cAAc,SAAS,kBAAkB,cAAc;AAAA,MACvD,WAAW,SAAS,kBAAkB,WAAW;AAAA,MACjD,WAAW,SAAS,kBAAkB,aAAa;AAAA,IACrD;AAEA,YAAQ,OAAO,SAAS,CAAC,KAAK,QAAQ,CAAC;AACvC,YAAQ,SAAS,SAAS,CAAC,KAAK,IAAI,CAAC;AACrC,YAAQ,YAAY,SAAS,CAAC,GAAG,CAAC;AAClC,YAAQ,SAAS,SAAS,CAAC,KAAK,QAAQ,CAAC;AAEzC,QAAI,aAAa;AAEjB,QAAI,OAAO,IAAI,YAAY;AACzB,YAAM,MACH,IAAI,WAAW,aAAa,KAAK,eAC9B,IAAI,aACJ,IAAI,WAAW,kBAAkB;AAEvC,YAAM,QAAS,yBAAoB;AAAA,QACjC;AAAA;AAEF,UAAI,OAAO;AACT,cAAM,QAAQ,OAAO,iBAAiB,KAAK;AAC3C,cAAM,aAAa,WAAW,MAAM,cAAc,GAAG;AACrD,cAAM,cAAc,WAAW,MAAM,eAAe,GAAG;AACvD,qBACE,aAAa,KACb,cAAc,KACd,gBAAgB,KAAK,MAAM,SAAS;AAAA,MACxC;AAAA,IACF;AACA,IAAC,QAA+B,aAAa;AAC7C,IAAC,QAA+B,OAAO;AACvC,UAAM,MAAM,OAAO,QAAQ,KAAK,EAAE,YAAY;AAC9C,IAAC,QAA+B,aAAa,QAAQ;AACrD,IAAC,QAA+B,aAAa,QAAQ;AACrD,IAAC,QAA+B,aAAa,QAAQ;AACrD,IAAC,QAA+B,aAAa,QAAQ;AACrD,IAAC,QAA+B,aAAa,QAAQ;AACrD,IAAC,QAA+B,aAAa,QAAQ;AACrD,IAAC,QAA+B,cAAc,QAAQ;AACtD,IAAC,QAA+B,eAAe,QAAQ;AACvD,IAAC,QAA+B,cAAc,QAAQ;AAEtD,SAAK,WAAW,OAAO;AACvB,kBAAc;AAAA,EAChB,CAAC;AAGD,WAAS,gBAAgB;AACvB,UAAM,gBAAgB,SAAS,eAAe,oBAAoB;AAClE,UAAM,QAAQ,SAAS,KAAK,UAAU,IAAI;AAC1C,UAAM,eAAe,MAAM,cAAc,qBAAqB;AAC9D,QAAI,aAAc,cAAa,OAAO;AAEtC,UAAM,cAAc,MAAM,UAAU,KAAK;AACzC,UAAM,QAAQ,iBAAiB;AAE/B,UAAM,OAAO,UAAU,UAAU,SAAS,CAAC;AAC3C,QAAI,QAAQ,OAAO,SAAS,YAAY,KAAK,SAAS,YAAa;AAEnE,cAAU,KAAK,EAAE,MAAM,aAAa,MAAM,CAAC;AAC3C,cAAU,SAAS;AAEnB,SAAK,mBAAmB;AAAA,MACtB,SAAS,UAAU,SAAS;AAAA,MAC5B,SAAS,UAAU,SAAS;AAAA,IAC9B,CAAC;AAAA,EACH;AAEA,WAAS,SAAS;AAChB,QAAI,UAAU,SAAS,GAAG;AACxB,YAAM,UAAU,UAAU,IAAI;AAC9B,UAAI,QAAS,WAAU,KAAK,OAAO;AAEnC,YAAM,OAAO,UAAU,UAAU,SAAS,CAAC;AAC3C,eAAS,KAAK,YAAY,KAAK,QAAQ;AACvC,4BAAsB;AACtB,uBAAiB,KAAK,SAAS,IAAI;AAEnC,WAAK,UAAU,EAAE,MAAM,KAAK,KAAK,CAAC;AAAA,IACpC;AAEA,SAAK,mBAAmB;AAAA,MACtB,SAAS,UAAU,SAAS;AAAA,MAC5B,SAAS,UAAU,SAAS;AAAA,IAC9B,CAAC;AAAA,EACH;AAEA,WAAS,SAAS;AAChB,QAAI,UAAU,SAAS,GAAG;AACxB,YAAM,OAAO,UAAU,IAAI;AAC3B,UAAI,MAAM;AACR,kBAAU,KAAK,IAAI;AACnB,iBAAS,KAAK,YAAY,KAAK,QAAQ;AACvC,8BAAsB;AACtB,yBAAiB,KAAK,SAAS,IAAI;AACnC,aAAK,UAAU,EAAE,MAAM,KAAK,KAAK,CAAC;AAAA,MACpC;AAAA,IACF;AAEA,SAAK,mBAAmB;AAAA,MACtB,SAAS,UAAU,SAAS;AAAA,MAC5B,SAAS,UAAU,SAAS;AAAA,IAC9B,CAAC;AAAA,EACH;AAEA,WAAS,wBAAwB;AAtkBnC;AAukBI,UAAM,MAAM,OAAO,aAAa;AAChC,QAAI,CAAC,OAAO,IAAI,eAAe,EAAG;AAElC,UAAM,QAAQ,IAAI,WAAW,CAAC;AAG9B,QAAI,CAAC,MAAM,UAAW;AAEtB,UAAM,YAAY,MAAM;AAGxB,UAAM,eAAe;AAAA,MACnB;AAAA,MACA;AAAA,IACF;AAEA,QAAI,cAAc;AAChB,YAAM,QAAQ,SAAS,eAAe,EAAE;AACxC,yBAAa,eAAb,mBAAyB,aAAa,OAAO,aAAa;AAE1D,YAAM,WAAW,SAAS,YAAY;AACtC,eAAS,SAAS,OAAO,CAAC;AAC1B,eAAS,SAAS,IAAI;AAEtB,UAAI,gBAAgB;AACpB,UAAI,SAAS,QAAQ;AAAA,IACvB;AAAA,EACF;AAGA,WAAS,KAAK,iBAAiB,SAAS,MAAM;AAC5C,0BAAsB;AACtB,kBAAc;AACd,SAAK,UAAU,EAAE,MAAM,SAAS,KAAK,UAAU,CAAC;AAAA,EAClD,CAAC;AAGD,WAAS,iBAAiB,SAAS,CAAC,MAAsB;AA5mB5D;AA6mBI,MAAE,eAAe;AACjB,UAAM,SAAO,OAAE,kBAAF,mBAAiB,QAAQ,kBAAiB;AACvD,aAAS,YAAY,cAAc,OAAO,IAAI;AAAA,EAChD,CAAC;AAGD,SAAO,iBAAiB,WAAW,CAAC,MAAoB;AACtD,UAAM,EAAE,MAAM,KAAK,OAAO,MAAM,MAAM,IAAI,EAAE,QAAQ,CAAC;AAErD,QAAI,SAAS,UAAU,QAAQ,OAAQ,QAAO,KAAK,OAAO;AAC1D,QAAI,SAAS,UAAU,QAAQ,OAAQ,QAAO,KAAK,OAAO;AAE1D,QAAI,SAAS,QAAQ;AACnB,uBAAiB;AACjB,eAAS,YAAY,KAAK,OAAO,wBAAS,IAAI;AAG9C,4BAAsB;AAEtB,eAAS,KAAK,cAAc,IAAI,MAAM,OAAO,CAAC;AAAA,IAChD;AAEA,QAAI,SAAS,gBAAgB;AAC3B,uBAAiB;AACjB,eAAS,YAAY,eAAe,OAAO,SAAS,GAAG;AACvD,eAAS,KAAK,cAAc,IAAI,MAAM,OAAO,CAAC;AAAA,IAChD;AAEA,QAAI,SAAS,eAAe;AAC1B,uBAAiB;AACjB,eAAS,YAAY,cAAc,OAAO,QAAQ,EAAE;AACpD,eAAS,KAAK,cAAc,IAAI,MAAM,OAAO,CAAC;AAAA,IAChD;AAEA,QAAI,SAAS,YAAY;AACvB,eAAS,KAAK,YAAY,QAAQ;AAClC,4BAAsB;AACtB,eAAS,KAAK,cAAc,IAAI,MAAM,OAAO,CAAC;AAAA,IAChD;AAEA,QAAI,SAAS,iBAAiB;AAC5B,YAAM,KAAK,IAAI,cAAc,WAAW,EAAE,KAAK,MAAM,CAAC;AACtD,eAAS,cAAc,EAAE;AAAA,IAC3B;AAEA,QAAI,SAAS,kBAAkB;AAC7B,YAAM,KAAK,IAAI,cAAc,WAAW,EAAE,KAAK,OAAO,UAAU,KAAK,CAAC;AACtE,eAAS,cAAc,EAAE;AAAA,IAC3B;AAEA,QAAI,SAAS,gBAAgB;AAC3B,uBAAiB;AACjB,kBAAY,EAAE,KAAK,MAAM,EAAE,KAAK,IAAI;AACpC,eAAS,KAAK,cAAc,IAAI,MAAM,OAAO,CAAC;AAAA,IAChD;AAAA,EACF,CAAC;AAGD,WAAS,iBAAiB,WAAW,CAAC,OAAsB;AAvqB9D;AAyqBI,QAAI,GAAG,QAAQ,SAAS;AACtB,YAAM,MAAM,OAAO,aAAa;AAChC,UAAI,CAAC,OAAO,IAAI,eAAe,EAAG;AAElC,YAAM,QAAQ,IAAI,WAAW,CAAC;AAC9B,UAAI,CAAC,MAAM,UAAW;AAEtB,YAAM,YACJ,MAAM,eAAe,aAAa,KAAK,YACnC,MAAM,eAAe,gBACrB,MAAM;AAEZ,YAAM,eAAe;AAAA,QACnB;AAAA,QACA;AAAA,MACF;AACA,UAAI,cAAc;AAChB,WAAG,eAAe;AAGlB,cAAM,OAAO,SAAS,cAAc,GAAG;AACvC,aAAK,YAAY;AAGjB,cAAM,eAAe,aAAa,QAAQ,yBAAyB;AACnE,2DAAc,eAAd,mBAA0B,aAAa,MAAM,aAAa;AAG1D,cAAM,WAAW,SAAS,YAAY;AACtC,iBAAS,SAAS,MAAM,CAAC;AACzB,iBAAS,SAAS,IAAI;AAEtB,YAAI,gBAAgB;AACpB,YAAI,SAAS,QAAQ;AAGrB,iBAAS,KAAK,cAAc,IAAI,MAAM,OAAO,CAAC;AAC9C;AAAA,MACF;AAAA,IACF;AAEA,QAAI,GAAG,QAAQ,OAAO;AACpB,SAAG,eAAe;AAClB,YAAM,MAAM,OAAO,aAAa;AAChC,YAAM,cAAc,iBAAiB;AACrC,UAAI,CAAC,OAAO,IAAI,eAAe,EAAG;AAClC,YAAM,QAAQ,IAAI,WAAW,CAAC;AAC9B,YAAM,OAAO,MAAM;AACnB,UAAI,KAAyB;AAC7B,UAAI,KAAK,aAAa,KAAK,aAAc,MAAK;AAAA,eACpC,KAAqB;AAC7B,aAAM,KAAqB;AAC7B,YAAM,OAAO,yBAAI;AAAA,QACf;AAAA;AAEF,UAAI,CAAC,KAAM;AAEX,UAAI,WAA6B,KAAK;AACtC,aAAO,YAAY,SAAS,aAAa,KAAK;AAC5C,mBAAW,SAAS;AACtB,UAAI,CAAC,UAAU;AACb,mBAAW,SAAS,eAAe,EAAE;AACrC,aAAK,aAAa,UAAU,KAAK,UAAU;AAAA,MAC7C;AAEA,UAAI,CAAC,GAAG,UAAU;AAChB,cAAM,SAAS;AACf,YAAI,MAAM,gBAAgB,KAAK,MAAM,mBAAmB;AACtD,mBAAS,cAAc,SAAS,SAAS;AAAA,aACtC;AACH,gBAAM,aAAa,SAAS,eAAe,MAAM;AACjD,gBAAM,WAAW,UAAU;AAAA,QAC7B;AACA,cAAM,WAAW,SAAS,YAAY;AACtC,YAAI,MAAM,mBAAmB,SAAU,UAAS,SAAS,UAAU,CAAC;AAAA,YAC/D,UAAS,cAAc,KAAK,UAAW;AAC5C,iBAAS,SAAS,IAAI;AACtB,YAAI,gBAAgB;AACpB,YAAI,SAAS,QAAQ;AAAA,MACvB,OAAO;AACL,cAAM,YAAY,SAAS,eAAe;AAC1C,cAAM,UAAU,UAAU,QAAQ,oBAAoB,EAAE;AACxD,iBAAS,cAAc;AACvB,cAAM,OAAO,KAAK,UAAU,QAAQ,qBAAqB,EAAE;AAC3D,YAAI,KAAK,cAAc,KAAM,MAAK,YAAY,QAAQ;AACtD,cAAM,WAAW,SAAS,YAAY;AACtC,YAAI,KAAK,WAAY,UAAS,SAAS,KAAK,YAAY,CAAC;AAAA,YACpD,UAAS,mBAAmB,IAAI;AACrC,iBAAS,SAAS,IAAI;AACtB,YAAI,gBAAgB;AACpB,YAAI,SAAS,QAAQ;AAAA,MACvB;AAEA,uBAAiB,WAAW;AAC5B,eAAS,KAAK,cAAc,IAAI,MAAM,OAAO,CAAC;AAC9C;AAAA,IACF;AAEA,QAAI,GAAG,WAAW,GAAG,SAAS;AAC5B,YAAM,IAAI,GAAG,IAAI,YAAY;AAC7B,UAAI,MAAM,KAAK;AACb,WAAG,eAAe;AAClB,iBAAS,YAAY,MAAM;AAAA,MAC7B;AACA,UAAI,MAAM,KAAK;AACb,WAAG,eAAe;AAClB,iBAAS,YAAY,MAAM;AAAA,MAC7B;AACA,UAAI,MAAM,KAAK;AACb,WAAG,eAAe;AAClB,iBAAS,YAAY,MAAM;AAAA,MAC7B;AACA,UAAI,MAAM,KAAK;AACb,WAAG,eAAe;AAClB,iBAAS,YAAY,QAAQ;AAAA,MAC/B;AACA,UAAI,MAAM,KAAK;AACb,WAAG,eAAe;AAClB,iBAAS,YAAY,WAAW;AAAA,MAClC;AAAA,IACF;AAAA,EACF,CAAC;AAED,SAAO,iBAAiB,SAAS,CAAC,QAAQ;AACxC,WAAO,YAAY,EAAE,MAAM,gBAAgB,SAAS,IAAI,QAAQ,GAAG,GAAG;AAAA,EACxE,CAAC;AACH;;;ACxxBO,IAAM,aAAN,MAAiB;AAAA,EAatB,YACE,QACA,QAAQ,IACR,cAAc,sBACd;AAfF,eAAqB;AACrB,eAAuB;AACvB,gBAAO;AAEP,mBAAU;AACV,qBAEK,CAAC;AACN,iBAAmD;AAiRnD;AAAA;AAAA;AAAA,SAAQ,gBAAgB,CAAC,MAAoB;AAC3C,YAAM,OAAO,EAAE,QAAQ,CAAC;AACxB,cAAQ,KAAK,MAAM;AAAA,QACjB,KAAK;AACH,eAAK,UAAU;AACf,eAAK,KAAK,YAAY,EAAE,MAAM,KAAK,KAAK,CAAC;AACzC,eAAK,KAAK,SAAS,EAAE;AACrB;AAAA,QACF,KAAK;AACH,eAAK,OAAO,KAAK;AACjB,eAAK,KAAK,UAAU,KAAK,IAAI;AAC7B;AAAA,QACF,KAAK;AACH,eAAK,KAAK,WAAW,IAAI;AACzB;AAAA,QACF,KAAK;AACH,eAAK,KAAK,YAAY,EAAE,SAAS,KAAK,SAAS,SAAS,KAAK,QAAQ,CAAC;AACtE;AAAA,QACF,KAAK;AACH,kBAAQ,MAAM,2BAAoB,KAAK,OAAO;AAC9C,eAAK,KAAK,SAAS,KAAK,OAAO;AAC/B;AAAA,MACJ;AAAA,IACF;AA8IA,SAAQ,mBAAmB,CAAC,MAA2B;AACrD,YAAM,SAAS,EAAE;AACjB,WAAK,SAAS,SAAS,SAAS,OAAO;AAAA,IACzC;AAjbE,SAAK,SAAS;AACd,SAAK,cAAc;AACnB,UAAM,SAAS,SAAS,IAAI,KAAK;AACjC,SAAK,OAAO,MAAM,WAAW,IAAI,gBAAgB;AAAA,EACnD;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,OAAO;AACL,UAAM,SAAS,KAAK;AACpB,UAAM,MAAM,OAAO;AACnB,QAAI,CAAC,IAAK,OAAM,IAAI,MAAM,qCAAgC;AAE1D,SAAK,MAAM;AACX,SAAK,MAAM,OAAO;AAElB,UAAM,eAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mDAyN0B,KAAK,WAAW;AAAA;AAAA;AAI/D,QAAI,KAAK;AACT,QAAI,MAAM,YAAY;AACtB,QAAI,MAAM;AAEV,WAAO,SAAS,MAAM;AApR1B;AAqRM,UAAI,GAAC,UAAK,QAAL,mBAAU,MAAM;AACrB,WAAK,IAAI,KAAK,YAAY,KAAK;AAE/B,YAAM,gBAAgB,KAAK,IAAI,cAAc,QAAQ;AACrD,oBAAc,KAAK;AACnB,oBAAc,OAAO;AACrB,oBAAc,cAAc,IAAI,kBAAkB,SAAS,CAAC;AAC5D,WAAK,IAAI,KAAK,YAAY,aAAa;AAEvC,WAAK,UAAU;AACf,WAAK,KAAK,SAAS,EAAE;AAAA,IACvB;AAEA,WAAO,iBAAiB,WAAW,KAAK,aAAa;AAErD,SAAK,KAAK,YAAY,EAAE,MAAM,KAAK,KAAK,CAAC;AAAA,EAC3C;AAAA;AAAA;AAAA;AAAA,EAiCA,KAAK,MAAc,SAAmC;AACpD,QAAI,CAAC,KAAK,IAAK;AACf,SAAK,IAAI,YAAY,iBAAE,QAAS,UAAW,GAAG;AAAA,EAChD;AAAA,EAEA,SAAS,MAAc;AACrB,SAAK,OAAO;AACZ,SAAK,KAAK,YAAY,EAAE,KAAK,CAAC;AAAA,EAChC;AAAA,EAEA,SAAiB;AAhVnB;AAiVI,aAAO,sBAAK,QAAL,mBAAU,SAAV,mBAAgB,cAAhB,mBAA2B,WAAU,KAAK;AAAA,EACnD;AAAA,EAEA,SAAuB;AACrB,QAAI,CAAC,KAAK,IAAK,QAAO,CAAC;AACvB,UAAM,OAAO,KAAK,IAAI;AAEtB,UAAM,WAAW,CAAC,OAAgC;AAChD,YAAM,OAAmB,EAAE,MAAM,GAAG,QAAQ,YAAY,EAAE;AAC1D,UAAI,GAAG,sBAAsB,EAAG,MAAK,UAAU,GAAG;AAAA;AAEhD,aAAK,WAAW,MAAM,KAAK,GAAG,QAAQ,EAAE;AAAA,UAAI,CAAC,MAC3C,SAAS,CAAgB;AAAA,QAC3B;AAEF,UAAI,GAAG,QAAQ,MAAM,UAAU;AAC7B,aAAK,QAAQ,EAAE,OAAO,OAAO,GAAG,QAAQ,QAAQ,KAAK,EAAE,CAAC,EAAE;AAE5D,UAAI,GAAG,YAAY;AACjB,aAAK,QAAQ,iCAAM,KAAK,SAAS,CAAC,IAArB,EAAyB,MAAM,GAAG,aAAa,MAAM,EAAE;AAEtE,UAAI,GAAG,YAAY;AACjB,aAAK,QAAQ,iCACP,KAAK,SAAS,CAAC,IADR;AAAA,UAEX,KAAK,GAAG,aAAa,KAAK;AAAA,UAC1B,KAAK,GAAG,aAAa,KAAK;AAAA,QAC5B;AAEF,aAAO;AAAA,IACT;AAEA,WAAO,MAAM,KAAK,KAAK,QAAQ,EAAE,IAAI,CAAC,MAAM,SAAS,CAAgB,CAAC;AAAA,EACxE;AAAA,EAEA,GACE,MACA,IACA;AACA,QAAI,CAAC,KAAK,UAAU,IAAI,EAAG,MAAK,UAAU,IAAI,IAAI,CAAC;AACnD,IAAC,KAAK,UAAU,IAAI,EAA6C,KAAK,EAAE;AAAA,EAC1E;AAAA,EAEA,KAAmC,MAAS,SAA0B;AACpE,UAAM,WAAW,KAAK,UAAU,IAAI;AACpC,QAAI,SAAU,UAAS,QAAQ,CAAC,YAAY,QAAQ,OAAO,CAAC;AAAA,EAC9D;AAAA;AAAA;AAAA;AAAA,EAKA,SAAS,OAAkD;AACzD,QAAI,CAAC,KAAK,IAAK;AACf,SAAK,QAAQ;AAEb,UAAM,SAAS,KAAK,IAAI;AACxB,UAAM,UACJ,KAAK,IAAI,eAAe,kBAAkB,KAC1C,KAAK,IAAI,cAAc,OAAO;AAEhC,YAAQ,KAAK;AAEb,QAAI,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaV,QAAI,UAAU,QAAQ;AACpB,aAAO,aAAa,cAAc,MAAM;AACxC,YAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAYR;AAEA,QAAI,OAAO,UAAU,YAAY,UAAU,MAAM;AAC/C,aAAO,gBAAgB,YAAY;AACnC,YAAM,aAAa,OAAO,QAAQ,KAAK,EACpC,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM,KAAK,GAAG,KAAK,GAAG,GAAG,EACvC,KAAK,IAAI;AACZ,YAAM,WAAW,UAAU;AAAA,IAC7B;AAEA,YAAQ,cAAc;AACtB,SAAK,IAAI,KAAK,YAAY,OAAO;AAAA,EACnC;AAAA;AAAA;AAAA;AAAA,EAKA,kBAAkB;AAEhB,QAAI,KAAK;AACP,WAAK,kBAAkB;AAAA,QACrB;AAAA,QACA,KAAK;AAAA,MACP;AAEF,UAAM,MAAM,OAAO,WAAW,8BAA8B;AAC5D,SAAK,oBAAoB;AACzB,YAAQ,IAAI,GAAG;AACf,QAAI,CAAC,KAAK,mBAAmB;AAC3B,UAAI,iBAAiB,UAAU,KAAK,gBAAgB;AAAA,IACtD;AAEA,SAAK,SAAS,IAAI,UAAU,SAAS,OAAO;AAG5C,QAAI,iBAAiB,UAAU,KAAK,gBAAgB;AAAA,EACtD;AAAA;AAAA;AAAA;AAAA,EAUA,UAAU;AAvdZ;AAwdI,WAAO,oBAAoB,WAAW,KAAK,aAAa;AACxD,eAAK,sBAAL,mBAAwB;AAAA,MACtB;AAAA,MACA,KAAK;AAAA;AAEP,SAAK,YAAY,CAAC;AAClB,SAAK,UAAU;AACf,SAAK,MAAM;AACX,SAAK,MAAM;AAAA,EACb;AACF;;;ACleA,kBAAsC;AACtC,4BAAwB;AAEjB,SAAS,MAAM,QAAsB;AAC1C,aAAO,mCAAQ,kBAAK,MAAM,CAAC;AAC7B;;;AHwSQ;AAvSR,IAAM,aAAiC;AAAA,EACrC,OAAO;AAAA,EACP,MAAM;AAAA,EACN,QAAQ;AAAA,EACR,WAAW;AAAA,EACX,QAAQ;AAAA,EACR,aAAa;AAAA,EACb,eAAe;AAAA,EACf,aAAa;AAAA,EACb,eAAe;AAAA,EACf,cAAc;AAAA,EACd,MAAM;AAAA,EACN,WAAW;AAAA,EACX,WAAW;AAAA,EACX,YAAY;AAAA,EACZ,YAAY;AAAA,EACZ,YAAY;AAAA,EACZ,YAAY;AAAA,EACZ,YAAY;AAAA,EACZ,YAAY;AAAA,EACZ,aAAa;AAAA,EACb,cAAc;AAAA,EACd,aAAa;AAAA,EACb,SAAS;AAAA,EACT,SAAS;AAAA,EACT,YAAY;AACd;AAYA,IAAM,gBAAsB,oBAAyC,IAAI;AAElE,IAAM,YAAY,MAAM;AAC7B,QAAM,MAAY,iBAAW,aAAa;AAC1C,MAAI,CAAC,IAAK,OAAM,IAAI,MAAM,gDAAgD;AAC1E,SAAO;AACT;AAYO,IAAM,iBAAgD,CAAC;AAAA,EAC5D,iBAAiB;AAAA,EACjB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,MAAM;AAtEN;AAuEE,QAAM,YAAkB,aAA0B,IAAI;AAEtD,QAAM,CAAC,MAAM,OAAO,IAAU,eAA4B,IAAI;AAC9D,QAAM,CAAC,KAAK,MAAM,IAAU,eAAS,UAAU;AAC/C,QAAM,CAAC,MAAM,OAAO,IAAU,eAAS,cAAc;AACrD,QAAM,CAAC,MAAM,OAAO,IAAU,eAAmB,CAAC,CAAC;AACnD,QAAM,CAAC,WAAW,YAAY,IAAU,eAAS,KAAK;AACtD,QAAM,iBAAuB,aAAO,QAAQ;AAC5C,QAAM,gBAAsB,aAAO,KAAK;AAExC,EAAM,gBAAU,MAAM;AACpB,mBAAe,UAAU;AAAA,EAC3B,GAAG,CAAC,QAAQ,CAAC;AAEb,EAAM,gBAAU,MAAM;AACpB,QAAI,CAAC,UAAU,QAAS;AACxB,QAAI,KAAM;AAEV,UAAM,SAAS,IAAI;AAAA,MACjB,UAAU;AAAA,MACV;AAAA,MACA;AAAA,IACF;AAEA,WAAO,KAAK;AACZ,YAAQ,MAAM;AAGd,WAAO,GAAG,UAAU,MAAM;AAnG9B,UAAAC;AAoGM,cAAQ,OAAO,OAAO,CAAC;AACvB,cAAQ,OAAO,OAAO,CAAC;AAEvB,OAAAA,MAAA,eAAe,YAAf,gBAAAA,IAAA,qBAAyB;AAAA,IAC3B,CAAC;AAGD,WAAO,GAAG,WAAW,CAAC,SAAS;AAC7B,aAAO,CAAC,SAAU,kCAAK,OAAU,KAAkB;AAAA,IACrD,CAAC;AAED,WAAO,GAAG,SAAS,MAAM;AACvB,UAAI,OAAO;AACT,eAAO,SAAS,KAAK;AAAA,MACvB,OAAO;AACL,eAAO,gBAAgB;AAAA,MACzB;AAAA,IACF,CAAC;AAGD,WAAO,GAAG,YAAY,CAAC,UAAyB;AAC9C,aAAO,CAAC,SAAU,iCACb,OADa;AAAA,QAEhB,SAAS,QAAQ,+BAAO,OAAO;AAAA,QAC/B,SAAS,QAAQ,+BAAO,OAAO;AAAA,MACjC,EAAE;AAAA,IACJ,CAAC;AACD,WAAO,MAAM,OAAO,QAAQ;AAAA,EAC9B,GAAG,CAAC,CAAC;AAGL,EAAM,gBAAU,MAAM;AACpB,QAAI,QAAQ,mBAAmB,QAAW;AACxC,WAAK,SAAS,cAAc;AAAA,IAC9B;AAAA,EACF,GAAG,CAAC,cAAc,CAAC;AAEnB,EAAM,gBAAU,MAAM;AACpB,UAAM,SAAS,UAAU;AACzB,QAAI,CAAC,OAAQ;AAEb,UAAM,mBAAmB,MAAM;AAC7B,YAAM,MAAM,IAAI,YAAY,qBAAqB;AACjD,aAAO,cAAc,GAAG;AAAA,IAC1B;AAEA,WAAO,iBAAiB,cAAc,gBAAgB;AAEtD,WAAO,MAAM;AACX,aAAO,oBAAoB,cAAc,gBAAgB;AAAA,IAC3D;AAAA,EACF,GAAG,CAAC,CAAC;AAEL,EAAM,gBAAU,MAAM;AACpB,UAAM,SAAS,UAAU;AACzB,QAAI,CAAC,OAAQ;AAEb,UAAM,WAAW,MAAM;AACrB,YAAM,MAAM,OAAO;AACnB,UAAI,CAAC,IAAK;AAEV,UAAI,iBAAiB,aAAa,MAAM;AACtC,eAAO,cAAc,IAAI,MAAM,qBAAqB,CAAC;AAAA,MACvD,CAAC;AAED,UAAI,iBAAiB,cAAc,MAAM;AACvC,eAAO,cAAc,IAAI,MAAM,qBAAqB,CAAC;AAAA,MACvD,CAAC;AAAA,IACH;AAGA,UAAM,WAAW,YAAY,MAAM;AA3KvC,UAAAA;AA4KM,WAAIA,MAAA,OAAO,oBAAP,gBAAAA,IAAwB,MAAM;AAChC,iBAAS;AACT,sBAAc,QAAQ;AAAA,MACxB;AAAA,IACF,GAAG,GAAG;AAEN,WAAO,MAAM,cAAc,QAAQ;AAAA,EACrC,GAAG,CAAC,CAAC;AAEL,EAAM,gBAAU,MAAM;AACpB,UAAM,SAAS,UAAU;AACzB,QAAI,CAAC,OAAQ;AACb,UAAM,MAAM,OAAO;AACnB,QAAI,CAAC,IAAK;AAEV,UAAM,cAAc,MAAM,aAAa,IAAI;AAC3C,UAAM,aAAa,MAAM;AACvB,UAAI,cAAc,QAAS;AAC3B,mBAAa,KAAK;AAAA,IACpB;AAEA,UAAM,WAAW,YAAY,MAAM;AACjC,YAAM,OAAO,IAAI;AACjB,UAAI,MAAM;AACR,aAAK,iBAAiB,SAAS,WAAW;AAC1C,aAAK,iBAAiB,QAAQ,UAAU;AACxC,sBAAc,QAAQ;AAAA,MACxB;AAAA,IACF,GAAG,GAAG;AAEN,WAAO,MAAM;AACX,oBAAc,QAAQ;AACtB,YAAM,OAAO,IAAI;AACjB,UAAI,MAAM;AACR,aAAK,oBAAoB,SAAS,WAAW;AAC7C,aAAK,oBAAoB,QAAQ,UAAU;AAAA,MAC7C;AAAA,IACF;AAAA,EACF,GAAG,CAAC,SAAS,CAAC;AAEd,QAAM,aAAmB,kBAAY,MAAM;AACzC,QAAI,EAAC,6BAAM,KAAK;AAChB,UAAM,MAAM,KAAK;AACjB,UAAM,SAAS,IAAI,kBAAkB,aAAa,KAAK,KAAK,YAAY;AACxE,WAAO,CAAC,SAAU,iCACb,OADa;AAAA,MAEhB;AAAA,MACA,MAAM,IAAI,kBAAkB,MAAM;AAAA,MAClC,QAAQ,IAAI,kBAAkB,QAAQ;AAAA,MACtC,WAAW,IAAI,kBAAkB,WAAW;AAAA,MAC5C,QAAQ,IAAI,kBAAkB,eAAe;AAAA,MAC7C,aAAa,IAAI,kBAAkB,mBAAmB;AAAA,MACtD,eAAe,IAAI,kBAAkB,qBAAqB;AAAA,MAC1D,aAAa,IAAI,kBAAkB,aAAa;AAAA,MAChD,eAAe,IAAI,kBAAkB,eAAe;AAAA,MACpD,cAAc,IAAI,kBAAkB,cAAc;AAAA,MAClD,MAAM,IAAI,kBAAkB,YAAY;AAAA,MACxC,WAAW,IAAI,kBAAkB,WAAW,KAAK;AAAA,MACjD,WAAW,IAAI,kBAAkB,aAAa,KAAK;AAAA,MACnD,YAAY,UAAU;AAAA,MACtB,YAAY,UAAU;AAAA,MACtB,YAAY,UAAU;AAAA,MACtB,YAAY,UAAU;AAAA,MACtB,YAAY,UAAU;AAAA,MACtB,YAAY,UAAU;AAAA,MACtB,aAAa,UAAU;AAAA,MACvB,cAAc,UAAU;AAAA,MACxB,aAAa,UAAU;AAAA,IACzB,EAAE;AAAA,EACJ,GAAG,CAAC,IAAI,CAAC;AAET,QAAM,iBAAiB;AAAA,IACrB,MAAM;AAAA,IACN,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,OAAO;AAAA,IACP,OAAO;AAAA,EACT;AAEA,QAAM,iBAAiB;AAAA,IACrB,MAAM;AAAA,IACN,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,IAAI;AAAA,EACN;AAEA,QAAM,eAAc,0CAAO,WAAP,mBAAe,UAAf,YAAwB;AAC5C,QAAM,gBAAe,0CAAO,WAAP,mBAAe,WAAf,YAAyB;AAC9C,QAAM,UAAS,oCAAO,WAAP,YAAiB;AAEhC,QAAM,iBAAiB;AAAA,IACrB;AAAA,IACA,eAAe,YAAa;AAAA,IAC5B,eAAe,MAAO;AAAA,EACxB;AAEA,SACE;AAAA,IAAC,cAAc;AAAA,IAAd;AAAA,MACC,OAAO;AAAA,QACL;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,YAAY,MAAM;AAAA,QAAC;AAAA,MACrB;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC,gBAAc;AAAA,UACd,OAAO;AAAA,YACL,QACE,QAAO,+BAAO,YAAW,WACrB,+BAAO,SACP,GAAG,+BAAO,MAAM;AAAA,YACtB,aAAa,GAAG,WAAW;AAAA,UAC7B;AAAA,UACA,WAAW;AAAA,YACT;AAAA,YACA;AAAA,YACA;AAAA,UACF;AAAA,UACA,cAAc,MAAO,cAAc,UAAU;AAAA,UAC7C,cAAc,MAAO,cAAc,UAAU;AAAA,UAG7C,uDAAC,SAAI,WAAU,+CAEb;AAAA,wDAAC,SAAI,WAAU,mBAAmB,UAAS;AAAA,YAG3C;AAAA,cAAC;AAAA;AAAA,gBACC,KAAK;AAAA,gBACL,OAAO;AAAA,kBACL,SAAS,MAAM;AACb,0BAAM,IAAI,+BAAO;AACjB,wBAAI,OAAO,MAAM,UAAU;AACzB,0BAAI,EAAE,SAAS,GAAG,EAAG,QAAO,QAAQ,CAAC;AACrC,0BAAI,EAAE,SAAS,IAAI,EAAG,QAAO,GAAG,WAAW,CAAC,IAAI,EAAE;AAAA,oBACpD;AACA,wBAAI,OAAO,MAAM,SAAU,QAAO,GAAG,IAAI,EAAE;AAC3C,2BAAO;AAAA,kBACT,GAAG;AAAA,gBACL;AAAA,gBACA,WAAU;AAAA,gBASV,SAAQ;AAAA;AAAA,YACV;AAAA,aACF;AAAA;AAAA,MACF;AAAA;AAAA,EACF;AAEJ;;;AI5UA,IAAAC,SAAuB;;;ACDhB,IAAM,cAAN,MAAkB;AAAA,EAIvB,YAAY,QAAuB;AAFnC,SAAQ,QAAwC,CAAC;AAG/C,SAAK,SAAS;AAAA,EAChB;AAAA,EAEQ,KAAK,KAA8B;AACzC,QAAI,CAAC,KAAK,OAAQ;AAClB,SAAK,MAAM,KAAK,GAAG;AACnB,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,MAAM;AACJ,QAAI,CAAC,KAAK,OAAQ;AAClB,eAAW,OAAO,KAAK,MAAO,MAAK,OAAO,YAAY,KAAK,GAAG;AAC9D,SAAK,QAAQ,CAAC;AAAA,EAChB;AAAA,EAEA,YAAY,KAAa,MAAc,IAAI;AACzC,UAAM,OAAO,aAAa,GAAG,UAAU,IAAI,QAAQ,MAAM,QAAQ,CAAC;AAClE,WAAO,KAAK,WAAW,IAAI;AAAA,EAC7B;AAAA,EAEA,aAAa,QAA8C;AACzD,QAAI,OAAO;AACX,eAAW,OAAO,QAAQ;AACxB,cAAQ,aAAa,IAAI,GAAG,WAAW,IAAI,OAAO,IAAI;AAAA,QACpD;AAAA,QACA;AAAA,MACF,CAAC;AAAA,IACH;AACA,WAAO,KAAK,WAAW,IAAI;AAAA,EAC7B;AAAA;AAAA,EAGA,KAAK,KAAa,OAAgB;AAChC,WAAO,KAAK,KAAK,EAAE,MAAM,QAAQ,KAAK,MAAM,CAAC;AAAA,EAC/C;AAAA,EAEA,OAAO;AA3CT;AA4CI,eAAK,WAAL,mBAAa,YAAY,EAAE,MAAM,QAAQ,KAAK,OAAO,GAAG;AACxD,WAAO;AAAA,EACT;AAAA,EAEA,OAAO;AAhDT;AAiDI,eAAK,WAAL,mBAAa,YAAY,EAAE,MAAM,QAAQ,KAAK,OAAO,GAAG;AACxD,WAAO;AAAA,EACT;AAAA,EAEA,OAAO;AACL,WAAO,KAAK,KAAK,MAAM;AAAA,EACzB;AAAA,EACA,SAAS;AACP,WAAO,KAAK,KAAK,QAAQ;AAAA,EAC3B;AAAA,EACA,YAAY;AACV,WAAO,KAAK,KAAK,WAAW;AAAA,EAC9B;AAAA,EACA,SAAS;AACP,WAAO,KAAK,KAAK,eAAe;AAAA,EAClC;AAAA;AAAA,EAGA,QAAQ,OAA8B;AACpC,WAAO,KAAK,KAAK,EAAE,MAAM,gBAAgB,OAAO,IAAI,KAAK,GAAG,CAAC;AAAA,EAC/D;AAAA,EACA,YAAY;AACV,WAAO,KAAK,KAAK,EAAE,MAAM,gBAAgB,OAAO,IAAI,CAAC;AAAA,EACvD;AAAA,EACA,QAAQ;AACN,WAAO,KAAK,KAAK,EAAE,MAAM,gBAAgB,OAAO,aAAa,CAAC;AAAA,EAChE;AAAA,EACA,YAAY;AACV,WAAO,KAAK,KAAK,EAAE,MAAM,gBAAgB,OAAO,MAAM,CAAC;AAAA,EACzD;AAAA;AAAA,EAGA,aAAa;AACX,WAAO,KAAK,KAAK,qBAAqB;AAAA,EACxC;AAAA,EACA,cAAc;AACZ,WAAO,KAAK,KAAK,mBAAmB;AAAA,EACtC;AAAA,EAEA,SAAS;AAxFX;AAyFI,eAAK,WAAL,mBAAa,YAAY,EAAE,MAAM,gBAAgB,GAAG;AACpD,WAAO;AAAA,EACT;AAAA,EACA,UAAU;AA5FZ;AA6FI,eAAK,WAAL,mBAAa,YAAY,EAAE,MAAM,iBAAiB,GAAG;AACrD,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,YAAY;AACV,WAAO,KAAK,KAAK,aAAa;AAAA,EAChC;AAAA,EACA,cAAc;AACZ,WAAO,KAAK,KAAK,eAAe;AAAA,EAClC;AAAA,EACA,aAAa;AACX,WAAO,KAAK,KAAK,cAAc;AAAA,EACjC;AAAA;AAAA,EAGA,MAAM,OAAe;AACnB,WAAO,KAAK,KAAK,aAAa,KAAK;AAAA,EACrC;AAAA,EACA,UAAU,OAAe;AACvB,WAAO,KAAK,KAAK,eAAe,KAAK;AAAA,EACvC;AAAA;AAAA,EAGA,KAAK,KAAa;AAChB,WAAO,KAAK,KAAK,cAAc,GAAG;AAAA,EACpC;AAAA,EACA,SAAS;AACP,WAAO,KAAK,KAAK,QAAQ;AAAA,EAC3B;AAAA;AAAA,EAGA,WAAW,MAAc;AACvB,WAAO,KAAK,KAAK,EAAE,MAAM,eAAe,KAAK,CAAC;AAAA,EAChD;AAAA,EACA,QAAQ,MAAc;AACpB,WAAO,KAAK,KAAK,EAAE,MAAM,YAAY,KAAK,CAAC;AAAA,EAC7C;AAAA,EAEA,YAAY,MAAc,MAAc;AApI1C;AAqII,eAAK,WAAL,mBAAa,YAAY,EAAE,MAAM,gBAAgB,MAAM,KAAK,GAAG;AAC/D,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,QAAQ;AACN,WAAO,KAAK,KAAK,cAAc;AAAA,EACjC;AACF;;;ADvIO,SAAS,iBAAiB;AAC/B,QAAM,EAAE,UAAU,IAAI,UAAU;AAChC,QAAM,CAAC,OAAO,QAAQ,IAAU,gBAA6B,IAAI;AAGjE,EAAM,iBAAU,MAAM;AAXxB;AAYI,UAAM,OAAM,eAAU,YAAV,mBAAmB;AAC/B,QAAI,OAAO,CAAC,OAAO;AACjB,eAAS,IAAI,YAAY,GAAG,CAAC;AAAA,IAC/B;AAAA,EACF,GAAG,CAAC,WAAW,KAAK,CAAC;AAGrB,QAAM,UAAgB;AAAA,IACpB,CAAC,WAAmB,SAAgB;AAClC,UAAI,CAAC,MAAO;AACZ,YAAM,KAAM,MAAc,MAAM;AAChC,UAAI,OAAO,OAAO,YAAY;AAC5B,cAAM,SAAS,GAAG,MAAM,OAAO,IAAI;AACnC,YAAI,iCAAQ,IAAK,QAAO,IAAI;AAAA,MAC9B,OAAO;AACL,gBAAQ,KAAK,8BAA8B,MAAM,EAAE;AAAA,MACrD;AAAA,IACF;AAAA,IACA,CAAC,KAAK;AAAA,EACR;AAEA,SAAO,EAAE,OAAO,QAAQ;AAC1B;;;AEjCA,wBAAqB;AACrB,sCAAuC;AAkDnC,IAAAC,sBAAA;AA9CJ,IAAM,qBAAiB;AAAA,EACrB;AAAA,EACA;AAAA,IACE,UAAU;AAAA,MACR,SAAS;AAAA,QACP,SAAS;AAAA,QACT,aACE;AAAA,QACF,SACE;AAAA,QACF,WACE;AAAA,QACF,OAAO;AAAA,QACP,MAAM;AAAA,QACN,SAAS;AAAA,MACX;AAAA,MACA,MAAM;AAAA,QACJ,SAAS;AAAA,QACT,IAAI;AAAA,QACJ,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,WAAW;AAAA,QACX,WAAW;AAAA,QACX,WAAW;AAAA,MACb;AAAA,IACF;AAAA,IACA,iBAAiB;AAAA,MACf,SAAS;AAAA,MACT,MAAM;AAAA,IACR;AAAA,EACF;AACF;AAEA,SAAS,OAAO,IASX;AATW,eACd;AAAA;AAAA,IACA;AAAA,IACA;AAAA,IACA,UAAU;AAAA,EA3CZ,IAuCgB,IAKX,kBALW,IAKX;AAAA,IAJH;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;AAMA,QAAM,OAAO,UAAU,yBAAO;AAE9B,SACE;AAAA,IAAC;AAAA;AAAA,MACC,aAAU;AAAA,MACV,WAAW,GAAG,eAAe,EAAE,SAAS,MAAM,UAAU,CAAC,CAAC;AAAA,OACtD;AAAA,EACN;AAEJ;;;ACvDA,yBAAoC;AAWhC,IAAAC,sBAAA;AAPJ,SAAS,UAAU,IAKsC;AALtC,eACjB;AAAA;AAAA,IACA,cAAc;AAAA,IACd,aAAa;AAAA,EAVf,IAOmB,IAId,kBAJc,IAId;AAAA,IAHH;AAAA,IACA;AAAA,IACA;AAAA;AAGA,SACE;AAAA,IAAoB;AAAA,IAAnB;AAAA,MACC,aAAU;AAAA,MACV;AAAA,MACA;AAAA,MACA,WAAW;AAAA,QACT;AAAA,QACA;AAAA,MACF;AAAA,OACI;AAAA,EACN;AAEJ;;;ACtBA,uBAAkC;AAS9B,IAAAC,sBAAA;AALJ,SAAS,gBAAgB,IAGkC;AAHlC,eACvB;AAAA,oBAAgB;AAAA,EARlB,IAOyB,IAEpB,kBAFoB,IAEpB;AAAA,IADH;AAAA;AAGA,SACE;AAAA,IAAkB;AAAA,IAAjB;AAAA,MACC,aAAU;AAAA,MACV;AAAA,OACI;AAAA,EACN;AAEJ;AAEA,SAAS,QAAQ,IAEsC;AAFtC,MACZ,kBADY,IACZ;AAEH,SACE,6CAAC,mBACC,uDAAkB,uBAAjB,iBAAsB,aAAU,aAAc,MAAO,GACxD;AAEJ;AAEA,SAAS,eAAe,IAEkC;AAFlC,MACnB,kBADmB,IACnB;AAEH,SAAO,6CAAkB,0BAAjB,iBAAyB,aAAU,qBAAsB,MAAO;AAC1E;AAEA,SAAS,eAAe,IAKkC;AALlC,eACtB;AAAA;AAAA,IACA,aAAa;AAAA,IACb;AAAA,EAvCF,IAoCwB,IAInB,kBAJmB,IAInB;AAAA,IAHH;AAAA,IACA;AAAA,IACA;AAAA;AAGA,SACE,6CAAkB,yBAAjB,EACC;AAAA,IAAkB;AAAA,IAAjB;AAAA,MACC,aAAU;AAAA,MACV;AAAA,MACA,WAAW;AAAA,QACT;AAAA,QACA;AAAA,MACF;AAAA,OACI,QAPL;AAAA,MASE;AAAA;AAAA,QACD,6CAAkB,wBAAjB,EAAuB,WAAU,sGAAqG;AAAA;AAAA;AAAA,EACzI,GACF;AAEJ;;;AC9CA,IAAAC,SAAuB;AACvB,0BAA0C;AAuClC,IAAAC,sBAAA;AAhCR,IAAM,gBAAgB,CAAC;AAAA,EACrB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,MAKM;AACJ,QAAM,OAAO,cAAc,SAAS,kCAAc;AAElD,SACE;AAAA,IAAC;AAAA;AAAA,MACC,WAAW;AAAA,QACT;AAAA,QACA,cAAc,SACV,6EACA;AAAA,QACJ,UAAU,gBAAgB;AAAA,MAC5B;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA,WAAW;AAAA,YACT;AAAA,YACA;AAAA,YACA;AAAA,UACF;AAAA,UACA,cAAY,UAAU,SAAS;AAAA,UAE/B,uDAAC,QAAK,WAAU,qCAAoC;AAAA;AAAA,MACtD;AAAA;AAAA,EACF;AAEJ;AAEO,IAAM,iBAAuB,kBAGlC,CAAC,IAAmC,QAAQ;AAA3C,eAAE,YAAU,UA7Df,IA6DG,IAA0B,kBAA1B,IAA0B,CAAxB,YAAU;AACb,QAAM,eAAqB,cAA8B,IAAI;AAC7D,QAAM,CAAC,UAAU,WAAW,IAAU,gBAAS,KAAK;AACpD,QAAM,CAAC,WAAW,YAAY,IAAU,gBAAS,KAAK;AACtD,QAAM,CAAC,SAAS,UAAU,IAAU,gBAAS,KAAK;AAClD,QAAM,CAAC,iBAAiB,kBAAkB,IAAU,gBAAS,CAAC;AAC9D,QAAM,CAAC,YAAY,aAAa,IAAU,gBAAS,KAAK;AAExD,QAAM,iBAAuB,mBAAY,MAAM;AAC7C,UAAM,KAAK,aAAa;AACxB,QAAI,CAAC,GAAI;AAET,UAAM,EAAE,YAAY,aAAa,YAAY,IAAI;AACjD,gBAAY,aAAa,CAAC;AAC1B,iBAAa,aAAa,cAAc,cAAc,CAAC;AAAA,EACzD,GAAG,CAAC,CAAC;AAGL,EAAM,iBAAU,MAAM;AACpB,UAAM,KAAK,aAAa;AACxB,QAAI,CAAC,GAAI;AAET,QAAI,SAAS;AACb,QAAI,SAAS;AACb,QAAI,cAAc;AAElB,UAAM,SAAS,CAAC,MAAkB;AAChC,eAAS;AACT,oBAAc,IAAI;AAClB,eAAS,EAAE;AACX,oBAAc,GAAG;AACjB,SAAG,MAAM,SAAS;AAClB,SAAG,MAAM,aAAa;AAAA,IACxB;AAEA,UAAM,OAAO,MAAM;AACjB,eAAS;AACT,oBAAc,KAAK;AACnB,SAAG,MAAM,SAAS;AAClB,SAAG,MAAM,aAAa;AAAA,IACxB;AAEA,UAAM,SAAS,CAAC,MAAkB;AAChC,UAAI,CAAC,OAAQ;AACb,YAAM,QAAQ,EAAE,QAAQ,UAAU;AAClC,SAAG,aAAa,cAAc;AAC9B,qBAAe;AAAA,IACjB;AAEA,OAAG,iBAAiB,aAAa,MAAM;AACvC,WAAO,iBAAiB,WAAW,IAAI;AACvC,WAAO,iBAAiB,aAAa,MAAM;AAE3C,WAAO,MAAM;AACX,SAAG,oBAAoB,aAAa,MAAM;AAC1C,aAAO,oBAAoB,WAAW,IAAI;AAC1C,aAAO,oBAAoB,aAAa,MAAM;AAAA,IAChD;AAAA,EACF,GAAG,CAAC,cAAc,CAAC;AAGnB,EAAM,iBAAU,MAAM;AACpB,UAAM,KAAK,aAAa;AACxB,QAAI,CAAC,GAAI;AAET,QAAI,aAAa,GAAG;AACpB,QAAI,WAAW,KAAK,IAAI;AACxB,QAAI,WAAW;AAEf,UAAM,WAAW,MAAM;AACrB,YAAM,MAAM,KAAK,IAAI;AACrB,YAAM,gBAAgB,GAAG;AACzB,YAAM,YAAY,MAAM;AAExB,UAAI,YAAY,GAAG;AACjB,mBAAW,KAAK,IAAI,gBAAgB,UAAU,IAAI;AAClD,2BAAmB,KAAK,IAAI,WAAW,IAAI,CAAC,CAAC;AAAA,MAC/C;AAEA,mBAAa;AACb,iBAAW;AACX,qBAAe;AAAA,IACjB;AAEA,OAAG,iBAAiB,UAAU,UAAU,EAAE,SAAS,KAAK,CAAC;AACzD,WAAO,MAAM,GAAG,oBAAoB,UAAU,QAAQ;AAAA,EACxD,GAAG,CAAC,cAAc,CAAC;AAEnB,QAAM,WAAW,CAAC,WAAmB;AArJvC,QAAAC;AAsJI,KAAAA,MAAA,aAAa,YAAb,gBAAAA,IAAsB,SAAS;AAAA,MAC7B,MAAM;AAAA,MACN,UAAU;AAAA,IACZ;AAAA,EACF;AAGA,QAAM,mBAAyB,gBAAS,IAAI,UAAU,CAAC,UAAU;AAC/D,QAAI,CAAO,sBAAe,KAAK,EAAG,QAAO;AAEzC,WAAa,oBAAa,OAAkC;AAAA,MAC1D,WAAW;AAAA,QACR,MAAkC,MAAM;AAAA,QACzC;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH,CAAC;AAED,SACE;AAAA,IAAC;AAAA;AAAA,MACC,WAAU;AAAA,MACV,cAAc,MAAM,WAAW,IAAI;AAAA,MACnC,cAAc,MAAM,WAAW,KAAK;AAAA,MAEpC;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YACV,SAAS,YAAY;AAAA,YACrB;AAAA,YACA,SAAS,MAAM,SAAS,IAAI;AAAA;AAAA,QAC9B;AAAA,QAEA;AAAA,UAAC;AAAA;AAAA,YACC,KAAK,CAAC,SAAS;AACb,2BAAa,UAAU;AACvB,kBAAI,OAAO,QAAQ,WAAY,KAAI,IAAI;AAAA,uBAC9B,IAAK,CAAC,IAAY,UAAU;AAAA,YACvC;AAAA,YACA,WAAW;AAAA,cACT;AAAA,cACA;AAAA,cACA;AAAA,cACA,aAAa,oBAAoB;AAAA,cACjC;AAAA,cACA;AAAA,YACF;AAAA,YACA,OAAO;AAAA,cACL,gBAAgB;AAAA,cAChB,iBAAiB;AAAA,YACnB;AAAA,aACI,QAlBL;AAAA,YAoBE;AAAA;AAAA,QACH;AAAA,QAEA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YACV,SAAS,aAAa;AAAA,YACtB;AAAA,YACA,SAAS,MAAM,SAAS,GAAG;AAAA;AAAA,QAC7B;AAAA;AAAA;AAAA,EACF;AAEJ,CAAC;AAED,eAAe,cAAc;AAEtB,IAAM,eAAqB,kBAGhC,CAAC,IAAmC,QAAQ;AAA3C,eAAE,YAAU,UA3Nf,IA2NG,IAA0B,kBAA1B,IAA0B,CAAxB,YAAU;AACb,SACE;AAAA,IAAC;AAAA;AAAA,MACC;AAAA,MACA,WAAW;AAAA,QACT;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,OACI,QAPL;AAAA,MASE;AAAA;AAAA,EACH;AAEJ,CAAC;AAED,aAAa,cAAc;AAEpB,IAAM,yBAAmD,CAAC;AAAA,EAC/D,cAAc;AAChB,MAAM;AACJ,SACE;AAAA,IAAC;AAAA;AAAA,MACC;AAAA,MACA,MAAK;AAAA,MACL,OAAO;AAAA,QACL,QAAQ;AAAA,MACV;AAAA,MACA,WAAW;AAAA,QACT;AAAA,QACA,gBAAgB,aAAa,SAAS;AAAA,MACxC;AAAA;AAAA,EACF;AAEJ;AASO,IAAM,gBAAsB;AAAA,EAIjC,CACE,IAUA,QACG;AAXH,iBACE;AAAA;AAAA,MACA;AAAA,MACA,SAAS;AAAA,MACT,iBAAiB;AAAA,MACjB;AAAA,MACA;AAAA,MACA;AAAA,IAlRN,IA2QI,IAQK,kBARL,IAQK;AAAA,MAPH;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAKF,UAAM,CAAC,MAAM,OAAO,IAAU,gBAAS,KAAK;AAC5C,UAAM,CAAC,WAAW,YAAY,IAAU,gBAAS,KAAK;AAEtD,IAAM,iBAAU,MAAM;AACpB,YAAM,eAAe,MAAM,QAAQ,KAAK;AACxC,aAAO,iBAAiB,uBAAuB,YAAY;AAC3D,aAAO,MACL,OAAO,oBAAoB,uBAAuB,YAAY;AAAA,IAClE,GAAG,CAAC,CAAC;AAEL,UAAM,cAAc;AAAA,MAClB,IAAI;AAAA,MACJ,IAAI;AAAA,MACJ,IAAI;AAAA,IACN;AAEA,UAAM,kBAAkB,CAAC,MAAwB;AAC/C,QAAE,eAAe;AACjB,mBAAa,IAAI;AAAA,IACnB;AAEA,UAAM,gBAAgB,MAAM;AAC1B,mBAAa,KAAK;AAAA,IACpB;AAEA,UAAM,cAAc,CAAC,MAA2C;AAC9D,mBAAa,KAAK;AAClB,yCAAU;AAAA,IACZ;AAEA,UAAM,SACJ;AAAA,MAAC;AAAA;AAAA,QACC,MAAK;AAAA,QACL,aAAa;AAAA,QACb,WAAW;AAAA,QACX,cAAc;AAAA,QACd,SAAS;AAAA,QACT,SAAQ;AAAA,QACR;AAAA,QACA;AAAA,QACA,eAAa;AAAA,QACb,gBAAc;AAAA,QACd,WAAW;AAAA,UACT,YAAY,cAAc;AAAA,UAC1B;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA,UAAU;AAAA,UACV,aAAa;AAAA,UACb;AAAA,QACF;AAAA,SACI,QAvBL;AAAA,QAyBC;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAW;AAAA,gBACT;AAAA,gBACA,aAAa;AAAA,cACf;AAAA,cAEC;AAAA;AAAA,UACH;AAAA,UAGC,UACC,6CAAC,SAAI,WAAU,0FAAyF;AAAA;AAAA;AAAA,IAE5G;AAGF,QAAI,CAAC,QAAS,QAAO;AAErB,WACE,6CAAC,mBAAgB,eAAe,KAC9B,wDAAC,WAAQ,MAAM,QAAQ,CAAC,UAAU,cAAc,SAC9C;AAAA,mDAAC,kBAAe,SAAO,MAAE,kBAAO;AAAA,MAChC;AAAA,QAAC;AAAA;AAAA,UACC,MAAK;AAAA,UACL,OAAM;AAAA,UACN,WAAU;AAAA,UACV,YAAY;AAAA,UAEX;AAAA;AAAA,YACD,6CAAC,SAAI,WAAU,2BAA0B,oBAAC;AAAA;AAAA;AAAA,MAC5C;AAAA,OACF,GACF;AAAA,EAEJ;AACF;AAEA,cAAc,cAAc;;;AClX5B,IAAAC,uBAA6B;AASzB,IAAAC,sBAAA;AAPG,IAAM,iBAAsD,CAAC;AAAA,EAClE;AAAA,EACA,OAAO;AACT,MAAM;AACJ,QAAM,EAAE,QAAQ,IAAI,eAAe;AAEnC,SACE,8EACE;AAAA;AAAA,MAAC;AAAA;AAAA,QACC,SAAQ;AAAA,QACR,UAAU,CAAC,IAAI;AAAA,QACf,SAAS,MAAM,QAAQ,MAAM;AAAA,QAC7B,gBAAgB;AAAA,QAChB,WAAU;AAAA,QAEV,uDAAC,8BAAM;AAAA;AAAA,IACT;AAAA,IACA;AAAA,MAAC;AAAA;AAAA,QACC,SAAQ;AAAA,QACR,gBAAgB;AAAA,QAChB,UAAU,CAAC,IAAI;AAAA,QACf,SAAS,MAAM,QAAQ,MAAM;AAAA,QAC7B,WAAU;AAAA,QAEV,uDAAC,8BAAM;AAAA;AAAA,IACT;AAAA,KACF;AAEJ;;;AC/BA,IAAAC,SAAuB;;;ACEvB,sBAAiC;AACjC,IAAAC,uBAAsB;AAOb,IAAAC,sBAAA;AAHT,SAAS,OAAO,IAEsC;AAFtC,MACX,kBADW,IACX;AAEH,SAAO,6CAAiB,sBAAhB,iBAAqB,aAAU,YAAa,MAAO;AAC7D;AAEA,SAAS,cAAc,IAEkC;AAFlC,MAClB,kBADkB,IAClB;AAEH,SAAO,6CAAiB,yBAAhB,iBAAwB,aAAU,oBAAqB,MAAO;AACxE;AAEA,SAAS,aAAa,IAEkC;AAFlC,MACjB,kBADiB,IACjB;AAEH,SAAO,6CAAiB,wBAAhB,iBAAuB,aAAU,mBAAoB,MAAO;AACtE;AAQA,SAAS,cAAc,IAGkC;AAHlC,eACrB;AAAA;AAAA,EAjCF,IAgCuB,IAElB,kBAFkB,IAElB;AAAA,IADH;AAAA;AAGA,SACE;AAAA,IAAiB;AAAA,IAAhB;AAAA,MACC,aAAU;AAAA,MACV,WAAW;AAAA,QACT;AAAA,QACA;AAAA,MACF;AAAA,OACI;AAAA,EACN;AAEJ;AAEA,SAAS,cAAc,IAOpB;AAPoB,eACrB;AAAA;AAAA,IACA;AAAA,IACA,kBAAkB;AAAA,EAnDpB,IAgDuB,IAIlB,kBAJkB,IAIlB;AAAA,IAHH;AAAA,IACA;AAAA,IACA;AAAA;AAKA,SACE,8CAAC,gBAAa,aAAU,iBACtB;AAAA,iDAAC,iBAAc;AAAA,IACf;AAAA,MAAiB;AAAA,MAAhB;AAAA,QACC,aAAU;AAAA,QACV,WAAW;AAAA,UACT;AAAA,UACA;AAAA,QACF;AAAA,SACI,QANL;AAAA,QAQE;AAAA;AAAA,UACA,mBACC;AAAA,YAAiB;AAAA,YAAhB;AAAA,cACC,aAAU;AAAA,cACV,WAAU;AAAA,cAEV;AAAA,6DAAC,8BAAM;AAAA,gBACP,6CAAC,UAAK,WAAU,WAAU,mBAAK;AAAA;AAAA;AAAA,UACjC;AAAA;AAAA;AAAA,IAEJ;AAAA,KACF;AAEJ;AAEA,SAAS,aAAa,IAAsD;AAAtD,eAAE,YAlFxB,IAkFsB,IAAgB,kBAAhB,IAAgB,CAAd;AACtB,SACE;AAAA,IAAC;AAAA;AAAA,MACC,aAAU;AAAA,MACV,WAAW,GAAG,gDAAgD,SAAS;AAAA,OACnE;AAAA,EACN;AAEJ;AAeA,SAAS,YAAY,IAGkC;AAHlC,eACnB;AAAA;AAAA,EA1GF,IAyGqB,IAEhB,kBAFgB,IAEhB;AAAA,IADH;AAAA;AAGA,SACE;AAAA,IAAiB;AAAA,IAAhB;AAAA,MACC,aAAU;AAAA,MACV,WAAW,GAAG,sCAAsC,SAAS;AAAA,OACzD;AAAA,EACN;AAEJ;;;ACjHA,4BAAuC;AACvC,IAAAC,uBAAwD;AAO/C,IAAAC,sBAAA;AAHT,SAAS,aAAa,IAEsC;AAFtC,MACjB,kBADiB,IACjB;AAEH,SAAO,6CAAuB,4BAAtB,iBAA2B,aAAU,mBAAoB,MAAO;AAC1E;AAUA,SAAS,oBAAoB,IAEkC;AAFlC,MACxB,kBADwB,IACxB;AAEH,SACE;AAAA,IAAuB;AAAA,IAAtB;AAAA,MACC,aAAU;AAAA,OACN;AAAA,EACN;AAEJ;AAEA,SAAS,oBAAoB,IAIkC;AAJlC,eAC3B;AAAA;AAAA,IACA,aAAa;AAAA,EAnCf,IAiC6B,IAGxB,kBAHwB,IAGxB;AAAA,IAFH;AAAA,IACA;AAAA;AAGA,SACE,6CAAuB,8BAAtB,EACC;AAAA,IAAuB;AAAA,IAAtB;AAAA,MACC,aAAU;AAAA,MACV;AAAA,MACA,WAAW;AAAA,QACT;AAAA,QACA;AAAA,MACF;AAAA,OACI;AAAA,EACN,GACF;AAEJ;AAEA,SAAS,kBAAkB,IAEkC;AAFlC,MACtB,kBADsB,IACtB;AAEH,SACE,6CAAuB,6BAAtB,iBAA4B,aAAU,yBAA0B,MAAO;AAE5E;AAEA,SAAS,iBAAiB,IAQvB;AARuB,eACxB;AAAA;AAAA,IACA;AAAA,IACA,UAAU;AAAA,EAhEZ,IA6D0B,IAIrB,kBAJqB,IAIrB;AAAA,IAHH;AAAA,IACA;AAAA,IACA;AAAA;AAMA,SACE;AAAA,IAAuB;AAAA,IAAtB;AAAA,MACC,aAAU;AAAA,MACV,cAAY;AAAA,MACZ,gBAAc;AAAA,MACd,WAAW;AAAA,QACT;AAAA,QACA;AAAA,MACF;AAAA,OACI;AAAA,EACN;AAEJ;AA+DA,SAAS,kBAAkB,IAMxB;AANwB,eACzB;AAAA;AAAA,IACA;AAAA,EAnJF,IAiJ2B,IAGtB,kBAHsB,IAGtB;AAAA,IAFH;AAAA,IACA;AAAA;AAKA,SACE;AAAA,IAAuB;AAAA,IAAtB;AAAA,MACC,aAAU;AAAA,MACV,cAAY;AAAA,MACZ,WAAW;AAAA,QACT;AAAA,QACA;AAAA,MACF;AAAA,OACI;AAAA,EACN;AAEJ;AAEA,SAAS,sBAAsB,IAGkC;AAHlC,eAC7B;AAAA;AAAA,EAtKF,IAqK+B,IAE1B,kBAF0B,IAE1B;AAAA,IADH;AAAA;AAGA,SACE;AAAA,IAAuB;AAAA,IAAtB;AAAA,MACC,aAAU;AAAA,MACV,WAAW,GAAG,6BAA6B,SAAS;AAAA,OAChD;AAAA,EACN;AAEJ;;;AC1KI,IAAAC,sBAAA;AAFJ,SAAS,MAAM,IAA8D;AAA9D,eAAE,aAAW,KAJ5B,IAIe,IAAsB,kBAAtB,IAAsB,CAApB,aAAW;AAC1B,SACE;AAAA,IAAC;AAAA;AAAA,MACC;AAAA,MACA,aAAU;AAAA,MACV,WAAW;AAAA,QACT;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,OACI;AAAA,EACN;AAEJ;;;ACfA,qBAAgC;AAS5B,IAAAC,uBAAA;AALJ,SAASC,OAAM,IAGsC;AAHtC,eACb;AAAA;AAAA,EARF,IAOe,IAEV,kBAFU,IAEV;AAAA,IADH;AAAA;AAGA,SACE;AAAA,IAAgB;AAAA,IAAf;AAAA,MACC,aAAU;AAAA,MACV,WAAW;AAAA,QACT;AAAA,QACA;AAAA,MACF;AAAA,OACI;AAAA,EACN;AAEJ;;;ACjBI,IAAAC,uBAAA;AAFJ,SAAS,SAAS,IAAsD;AAAtD,eAAE,YAFpB,IAEkB,IAAgB,kBAAhB,IAAgB,CAAd;AAClB,SACE;AAAA,IAAC;AAAA;AAAA,MACC,aAAU;AAAA,MACV,WAAW,GAAG,sCAAsC,SAAS;AAAA,OACzD;AAAA,EACN;AAEJ;;;ACPA,sBAAiC;AAiB3B,IAAAC,uBAAA;AAbN,SAAS,OAAO,IAGsC;AAHtC,eACd;AAAA;AAAA,EARF,IAOgB,IAEX,kBAFW,IAEX;AAAA,IADH;AAAA;AAGA,SACE;AAAA,IAAiB;AAAA,IAAhB;AAAA,MACC,aAAU;AAAA,MACV,WAAW;AAAA,QACT;AAAA,QACA;AAAA,MACF;AAAA,OACI,QANL;AAAA,MAQC;AAAA,QAAiB;AAAA,QAAhB;AAAA,UACC,aAAU;AAAA,UACV,WAAW;AAAA,YACT;AAAA,UACF;AAAA;AAAA,MACF;AAAA;AAAA,EACF;AAEJ;;;ACzBA,oBAA+B;AAS3B,IAAAC,uBAAA;AALJ,SAAS,KAAK,IAGsC;AAHtC,eACZ;AAAA;AAAA,EARF,IAOc,IAET,kBAFS,IAET;AAAA,IADH;AAAA;AAGA,SACE;AAAA,IAAe;AAAA,IAAd;AAAA,MACC,aAAU;AAAA,MACV,WAAW,GAAG,uBAAuB,SAAS;AAAA,OAC1C;AAAA,EACN;AAEJ;AAEA,SAAS,SAAS,IAGkC;AAHlC,eAChB;AAAA;AAAA,EArBF,IAoBkB,IAEb,kBAFa,IAEb;AAAA,IADH;AAAA;AAGA,SACE;AAAA,IAAe;AAAA,IAAd;AAAA,MACC,aAAU;AAAA,MACV,WAAW;AAAA,QACT;AAAA,QACA;AAAA,MACF;AAAA,OACI;AAAA,EACN;AAEJ;AAEA,SAAS,YAAY,IAGkC;AAHlC,eACnB;AAAA;AAAA,EArCF,IAoCqB,IAEhB,kBAFgB,IAEhB;AAAA,IADH;AAAA;AAGA,SACE;AAAA,IAAe;AAAA,IAAd;AAAA,MACC,aAAU;AAAA,MACV,WAAW;AAAA,QACT;AAAA,QACA;AAAA,MACF;AAAA,OACI;AAAA,EACN;AAEJ;AAEA,SAAS,YAAY,IAGkC;AAHlC,eACnB;AAAA;AAAA,EArDF,IAoDqB,IAEhB,kBAFgB,IAEhB;AAAA,IADH;AAAA;AAGA,SACE;AAAA,IAAe;AAAA,IAAd;AAAA,MACC,aAAU;AAAA,MACV,WAAW,GAAG,uBAAuB,SAAS;AAAA,OAC1C;AAAA,EACN;AAEJ;;;APjDE,IAAAC,uBAAA;AADF,IAAM,aAAa,CAAC,OAAc;AAAd,MAAK,kBAAL,IAAK;AACvB;AAAA,IAAC;AAAA;AAAA,MACC,OAAM;AAAA,MACN,SAAQ;AAAA,MACR,MAAK;AAAA,OACD,QAJL;AAAA,MAMC;AAAA,sDAAC,UAAK,GAAE,uDAAsD;AAAA,QAC9D,8CAAC,UAAK,GAAE,wDAAuD;AAAA,QAC/D,8CAAC,UAAK,GAAE,iFAAgF;AAAA,QACxF,8CAAC,UAAK,GAAE,0DAAyD;AAAA,QACjE,8CAAC,UAAK,GAAE,2GAA0G;AAAA;AAAA;AAAA,EACpH;AAAA;AAGF,IAAM,cAAc,CAAC,OAAc;AAAd,MAAK,kBAAL,IAAK;AACxB;AAAA,IAAC;AAAA;AAAA,MACC,OAAM;AAAA,MACN,SAAQ;AAAA,MACR,MAAK;AAAA,OACD,QAJL;AAAA,MAMC;AAAA,sDAAC,UAAK,GAAE,uDAAsD;AAAA,QAC9D,8CAAC,UAAK,GAAE,wDAAuD;AAAA,QAC/D,8CAAC,UAAK,GAAE,iFAAgF;AAAA,QACxF,8CAAC,UAAK,GAAE,0DAAyD;AAAA,QACjE,8CAAC,UAAK,GAAE,0GAAyG;AAAA;AAAA;AAAA,EACnH;AAAA;AAMK,IAAM,uBAA4D,CAAC;AAAA,EACxE;AAAA,EACA;AACF,MAAM;AAjDN;AAkDE,QAAM,EAAE,QAAQ,IAAI,eAAe;AACnC,QAAM,CAAC,MAAM,OAAO,IAAU,gBAAS,KAAK;AAE5C,QAAM,cAAa,gCAAK,eAAL,YAAmB;AAEtC,SACE,+CAAC,gBAAa,MAAY,cAAc,SACtC;AAAA,kDAAC,uBAAoB,SAAO,MAC1B;AAAA,MAAC;AAAA;AAAA,QACC,gBAAgB;AAAA,QAChB,QAAQ;AAAA,QACR,SAAQ;AAAA,QAEP,uBACC,8CAAC,eAAY,WAAU,WAAU,IAEjC,8CAAC,cAAW,WAAU,WAAU;AAAA;AAAA,IAEpC,GACF;AAAA,IAEA;AAAA,MAAC;AAAA;AAAA,QACC,OAAM;AAAA,QACN,WAAU;AAAA,QAEV;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,gBAAgB;AAAA,cAChB,SAAQ;AAAA,cACR,UAAU;AAAA,cACV,SAAS,MAAM;AACb,wBAAQ,QAAQ;AAChB,wBAAQ,KAAK;AAAA,cACf;AAAA,cAEA,wDAAC,cAAW,WAAU,WAAU;AAAA;AAAA,UAClC;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,gBAAgB;AAAA,cAChB,SAAQ;AAAA,cACR,UAAU,CAAC;AAAA,cACX,SAAS,MAAM;AACb,wBAAQ,SAAS;AACjB,wBAAQ,KAAK;AAAA,cACf;AAAA,cAEA,wDAAC,eAAY,WAAU,WAAU;AAAA;AAAA,UACnC;AAAA;AAAA;AAAA,IACF;AAAA,KACF;AAEJ;;;AQnGA,IAAAC,SAAuB;AAEvB,IAAAC,uBAAkC;AAkBtB,IAAAC,uBAAA;AAXL,IAAM,sBAA2D,CAAC;AAAA,EACvE;AAAA,EACA,OAAO;AACT,MAAM;AACJ,QAAM,CAAC,OAAO,QAAQ,IAAU,gBAAkB,KAAK;AACvD,QAAM,EAAE,QAAQ,IAAI,eAAe;AAEnC,QAAM,cAAc;AAAA,IAClB;AAAA,MACE,KAAK;AAAA,MACL,SAAS;AAAA,MACT,MAAM,8CAAC,6BAAK,WAAU,WAAU;AAAA,MAChC,QAAQ,2BAAK;AAAA,IACf;AAAA,IACA;AAAA,MACE,KAAK;AAAA,MACL,MAAM,8CAAC,oCAAY,WAAU,WAAU;AAAA,MACvC,QAAQ,2BAAK;AAAA,MACb,SAAS;AAAA,IACX;AAAA,EACF;AAEA,SACE,+CAAC,gBAAa,MAAM,OAAO,cAAc,UACvC;AAAA,kDAAC,uBAAoB,SAAO,MAC1B;AAAA,MAAC;AAAA;AAAA,QACC,SAAQ;AAAA,QACR,gBAAgB;AAAA,QAChB,QAAQ;AAAA,QAER,wDAAC,6BAAK;AAAA;AAAA,IACR,GACF;AAAA,IACA;AAAA,MAAC;AAAA;AAAA,QACC,OAAM;AAAA,QACN,MAAK;AAAA,QACL,WAAU;AAAA,QAET,sBAAY,IAAI,CAAC,QAChB;AAAA,UAAC;AAAA;AAAA,YAEC,SAAS,IAAI;AAAA,YACb,gBAAe;AAAA,YACf,QAAQ,IAAI;AAAA,YACZ,SAAS,MAAM;AACb,sBAAQ,IAAI,GAAG;AACf,uBAAS,CAAC,KAAK;AAAA,YACjB;AAAA,YAEC,cAAI;AAAA;AAAA,UATA,IAAI;AAAA,QAUX,CACD;AAAA;AAAA,IACH;AAAA,KACF;AAEJ;;;AChEA,IAAAC,uBAAsB;AACtB,IAAAC,SAAuB;AAiCb,IAAAC,uBAAA;AApBH,IAAM,cAAoB,kBAG/B,CAAC,IAA8B,QAAQ;AAAtC,eAAE,WAnBL,IAmBG,IAAe,wBAAf,IAAe,CAAb;AACH,QAAM,CAAC,MAAM,OAAO,IAAU,gBAAS,KAAK;AAC5C,QAAM,CAAC,OAAO,QAAQ,IAAU,gBAAS,EAAE,MAAM,GAAG,MAAM,EAAE,CAAC;AAE7D,QAAM,UAAU;AAChB,QAAM,UAAU;AAEhB,SACE,+CAAC,gBAAa,MAAY,cAAc,SACtC;AAAA,kDAAC,uBAAoB,SAAO,MAC1B;AAAA,MAAC;AAAA;AAAA,QACC;AAAA,QACA,gBAAe;AAAA,QACf,SAAQ;AAAA,QACR,QAAQ;AAAA,SACJ,cALL;AAAA,QAOC,wDAAC,8BAAM;AAAA;AAAA,IACT,GACF;AAAA,IACA,+CAAC,uBACE;AAAA,YAAM,KAAK,EAAE,QAAQ,QAAQ,CAAC,EAAE,IAAI,CAAC,GAAG,MACvC,8CAAC,SAAY,WAAU,+CACpB,gBAAM,KAAK,EAAE,QAAQ,QAAQ,CAAC,EAAE,IAAI,CAACC,IAAG,MAAM;AAE7C,cAAM,SAAS,KAAK,MAAM,QAAQ,KAAK,MAAM;AAC7C,eACE;AAAA,UAAC;AAAA;AAAA,YAEC,cAAc,MAAM,SAAS,EAAE,MAAM,GAAG,MAAM,EAAE,CAAC;AAAA,YACjD,SAAS,MAAM;AACb,mDAAW,IAAI,GAAG,IAAI;AACtB,sBAAQ,KAAK;AAAA,YACf;AAAA,YACA,eAAa;AAAA,YACb,WAAW;AAAA;AAAA,UAPN;AAAA,QAQP;AAAA,MAEJ,CAAC,KAhBO,CAiBV,CACD;AAAA,MACD,8CAAC,aAAU,WAAU,UAAS;AAAA,MAC9B,+CAAC,SAAI,WAAU,sCACZ;AAAA,cAAM,OAAO;AAAA,QAAE;AAAA,QAAI,MAAM,OAAO;AAAA,SACnC;AAAA,OACF;AAAA,KACF;AAEJ,CAAC;AAED,YAAY,cAAc;;;ACpE1B,IAAAC,SAAuB;AAOvB,IAAAC,uBAA8D;AAgBlD,IAAAC,uBAAA;AAZL,IAAM,qBAA0D,CAAC,OAIlE;AAJkE,eACtE;AAAA,WAAO;AAAA,IACP;AAAA,EAdF,IAYwE,IAGnE,kBAHmE,IAGnE;AAAA,IAFH;AAAA,IACA;AAAA;AAdF,MAAAC;AAiBE,QAAM,CAAC,OAAO,QAAQ,IAAU,gBAAS,KAAK;AAC9C,QAAM,EAAE,QAAQ,IAAI,eAAe;AAEnC,QAAM,eAAe;AAAA,IACnB;AAAA,MACE,KAAK;AAAA,MACL,SAAS;AAAA,MACT,MAAM,8CAAC,uCAAe,WAAU,WAAU;AAAA,MAC1C,QAAQ,2BAAK;AAAA,IACf;AAAA,IACA;AAAA,MACE,KAAK;AAAA,MACL,SAAS;AAAA,MACT,MAAM,8CAAC,wCAAgB,WAAU,WAAU;AAAA,MAC3C,QAAQ,2BAAK;AAAA,IACf;AAAA,IACA;AAAA,MACE,KAAK;AAAA,MACL,SAAS;AAAA,MACT,MAAM,8CAAC,qCAAa,WAAU,WAAU;AAAA,MACxC,QAAQ,2BAAK;AAAA,IACf;AAAA,EACF;AAGA,QAAM,gBAAcA,MAAA,aAAa,KAAK,CAAC,MAAM,EAAE,MAAM,MAAjC,gBAAAA,IAAoC,SACtD,8CAAC,uCAAe,WAAU,WAAU;AAGtC,SACE,+CAAC,gBAAa,MAAM,OAAO,cAAc,UACvC;AAAA,kDAAC,uBAAoB,SAAO,MAC1B;AAAA,MAAC;AAAA,uCACK,QADL;AAAA,QAEC,SAAQ;AAAA,QACR,QAAQ;AAAA,QACR,gBAAgB;AAAA,QAEf;AAAA;AAAA,IACH,GACF;AAAA,IACA;AAAA,MAAC;AAAA;AAAA,QACC,OAAM;AAAA,QACN,WAAU;AAAA,QAET,uBAAa,IAAI,CAAC,QACjB;AAAA,UAAC;AAAA;AAAA,YAEC,SAAS,IAAI;AAAA,YACb,gBAAe;AAAA,YACf,QAAQ,IAAI;AAAA,YACZ,SAAS,MAAM;AACb,sBAAQ,IAAI,GAAG;AACf,uBAAS,CAAC,KAAK;AAAA,YACjB;AAAA,YAEC,cAAI;AAAA;AAAA,UATA,IAAI;AAAA,QAUX,CACD;AAAA;AAAA,IACH;AAAA,KACF;AAEJ;;;AC9EA,IAAAC,SAAuB;AACvB,IAAAC,uBAYO;AAqBG,IAAAC,uBAAA;AANV,IAAM,aAAa;AAAA,EACjB;AAAA,IACE,MAAM;AAAA,IACN,KAAK;AAAA,IACL,MAAM,CAAC,CAAC;AAAA,IACR,SAAS;AAAA,IACT,MAAM,8CAAC,iCAAS;AAAA,IAChB,WAAW;AAAA,IACX,OAAO;AAAA,EACT;AAAA,EACA;AAAA,IACE,MAAM;AAAA,IACN,KAAK;AAAA,IACL,MAAM,CAAC,CAAC;AAAA,IACR,SAAS;AAAA,IACT,MAAM,8CAAC,iCAAS;AAAA,IAChB,WAAW;AAAA,IACX,OAAO;AAAA,EACT;AAAA,EACA;AAAA,IACE,MAAM;AAAA,IACN,KAAK;AAAA,IACL,MAAM,CAAC,CAAC;AAAA,IACR,SAAS;AAAA,IACT,MAAM,8CAAC,iCAAS;AAAA,IAChB,WAAW;AAAA,IACX,OAAO;AAAA,EACT;AAAA,EACA;AAAA,IACE,MAAM;AAAA,IACN,KAAK;AAAA,IACL,MAAM,CAAC,CAAC;AAAA,IACR,SAAS;AAAA,IACT,MAAM,8CAAC,iCAAS;AAAA,IAChB,WAAW;AAAA,IACX,OAAO;AAAA,EACT;AAAA,EACA;AAAA,IACE,MAAM;AAAA,IACN,KAAK;AAAA,IACL,MAAM,CAAC,CAAC;AAAA,IACR,SAAS;AAAA,IACT,MAAM,8CAAC,iCAAS;AAAA,IAChB,WAAW;AAAA,IACX,OAAO;AAAA,EACT;AAAA,EACA;AAAA,IACE,MAAM;AAAA,IACN,KAAK;AAAA,IACL,MAAM,CAAC,CAAC;AAAA,IACR,SAAS;AAAA,IACT,MAAM,8CAAC,iCAAS;AAAA,IAChB,WAAW;AAAA,IACX,OACE;AAAA,EACJ;AAAA,EACA;AAAA,IACE,MAAM;AAAA,IACN,KAAK;AAAA,IACL,SAAS;AAAA,IACT,MAAM,8CAAC,gCAAQ;AAAA,IACf,WAAW;AAAA,IACX,OACE;AAAA,EACJ;AAAA,EACA;AAAA,IACE,MAAM;AAAA,IACN,KAAK;AAAA,IACL,SAAS;AAAA,IACT,MAAM,8CAAC,8BAAM;AAAA,IACb,WAAW;AAAA,IACX,OACE;AAAA,EACJ;AAAA,EACA;AAAA,IACE,MAAM;AAAA,IACN,KAAK;AAAA,IACL,SAAS;AAAA,IACT,MAAM,8CAAC,6BAAK;AAAA,IACZ,WAAW;AAAA,IACX,OACE;AAAA,EACJ;AACF;AAEO,IAAM,oBAAsD,CAAC;AAAA,EAClE;AAAA,EACA,SAAS;AAAA,IACP,SAAS,CAAC,GAAG,GAAG,CAAC;AAAA,IACjB,MAAM;AAAA,IACN,YAAY;AAAA,IACZ,WAAW;AAAA,EACb;AAAA,EACA,OAAO;AACT,MAAM;AACJ,QAAM,EAAE,QAAQ,IAAI,eAAe;AAEnC,QAAM,iBAAuB,eAAQ,MAAM;AACzC,WAAO,WAAW,OAAO,CAAC,QAAQ;AA/HtC;AAgIM,cAAQ,IAAI,MAAM;AAAA,QAChB,KAAK;AACH,kBAAO,YAAO,YAAP,mBAAgB,UAAS,SAAI,SAAJ,mBAAW;AAAA,QAC7C,KAAK;AACH,iBAAO,CAAC,CAAC,OAAO;AAAA,QAClB,KAAK;AACH,iBAAO,CAAC,CAAC,OAAO;AAAA,QAClB,KAAK;AACH,iBAAO,CAAC,CAAC,OAAO;AAAA,QAClB;AACE,iBAAO;AAAA,MACX;AAAA,IACF,CAAC;AAAA,EACH,GAAG,CAAC,MAAM,CAAC;AAEX,QAAM,gBAAgB,eAAe;AAAA,IACnC,CAAC,QAAQ,IAAI,IAAI,SAA6B;AAAA,EAChD;AAEA,QAAM,gBAAe,+CAAe,YAAW;AAE/C,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,IAAI;AAAA,EACN;AAEA,SACE,+CAAC,gBACC;AAAA,mDAAC,WACC;AAAA,oDAAC,kBAAe,SAAO,MACrB;AAAA,QAAC;AAAA;AAAA,UACC,WAAW,wEAAwE,YAAY,IAAI,CAAC;AAAA,UAEnG;AAAA;AAAA,YACD,8CAAC,oCAAY,WAAU,sBAAqB,aAAa,GAAG;AAAA;AAAA;AAAA,MAC9D,GACF;AAAA,MACA,8CAAC,kBAAe,MAAK,OAAM,gCAAkB;AAAA,OAC/C;AAAA,IAEA,8CAAC,uBAAoB,OAAM,UAAS,WAAU,wBAC3C,yBAAe,IAAI,CAAC,QAAQ;AAC3B,YAAM,SAAS,QAAQ,IAAI,IAAI,SAA6B,CAAC;AAC7D,aACE;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,MAAM,QAAQ,IAAI,KAAK,GAAI,IAAI,QAAQ,CAAC,CAAE;AAAA,UACnD,eAAa;AAAA,UACb,WAAW;AAAA,UAEX;AAAA,2DAAC,UAAK,WAAW,GAAG,2BAA2B,2BAAK,KAAK,GACtD;AAAA,kBAAI;AAAA,cACJ,IAAI;AAAA,eACP;AAAA,YACC,UAAU,8CAAC,8BAAM,WAAU,yBAAwB;AAAA;AAAA;AAAA,QAT/C,IAAI;AAAA,MAUX;AAAA,IAEJ,CAAC,GACH;AAAA,KACF;AAEJ;;;AC7LA,IAAAC,UAAuB;AAGvB,IAAAC,wBAAiD;;;ACFjD,IAAAC,SAAuB;AACvB,yBAA+C;AAC/C,IAAAC,uBAAsB;AA4DV,IAAAC,uBAAA;AAlDL,IAAM,mBAAyB;AAAA,EAIpC,CACE,IAWA,QACG;AAZH,iBACE;AAAA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,OAAO;AAAA,IA3Bb,IAmBI,IASK,kBATL,IASK;AAAA,MARH;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAKF,UAAM,CAAC,QAAQ,SAAS,IAAU,gBAAS,KAAK;AAChD,UAAM,CAAC,WAAW,YAAY,IAAU,gBAAS,SAAS,SAAS;AACnE,UAAM,gBAAgB,QAAQ;AAE9B,UAAM,eAAe,CAAC,QAAqB;AACzC,mBAAa,IAAI,GAAG;AAAA,IACtB;AAEA,IAAM,iBAAU,MAAM;AACpB,YAAM,QAAQ,MAAM,UAAU,KAAK;AACnC,aAAO,iBAAiB,uBAAuB,KAAK;AACpD,aAAO,MAAM,OAAO,oBAAoB,uBAAuB,KAAK;AAAA,IACtE,GAAG,CAAC,CAAC;AAEL,UAAM,iBAAiB,CAAC,QAAqB;AAC3C,mBAAa,IAAI,GAAG;AACpB,2CAAW,IAAI;AAAA,IACjB;AAEA,WACE,+CAAC,gBAAa,MAAM,QAAQ,cAAc,WACxC;AAAA,oDAAC,uBAAoB,SAAO,MAC1B;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ;AAAA,UACR;AAAA,UACA;AAAA,UACA;AAAA,UACA,gBAAgB;AAAA,UAChB,SAAQ;AAAA,UACR,SAAS,MAAM,UAAU,CAAC,MAAM;AAAA,WAC5B,QARL;AAAA,UAUC,wDAAC,iBAAc,OAAM,gBAAe;AAAA;AAAA,MACtC,GACF;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,OAAM;AAAA,UAEN;AAAA,YAAC;AAAA;AAAA,cACC,OAAO;AAAA,cACP,eAAe,CAAC,UACd,6DAAuB;AAAA,cAGzB;AAAA,+DAAC,YAAS,WAAU,qDAClB;AAAA;AAAA,oBAAC;AAAA;AAAA,sBACC,eAAa,WAAW;AAAA,sBACxB,OAAM;AAAA,sBACN,WAAU;AAAA,sBACX;AAAA;AAAA,kBAED;AAAA,kBACA;AAAA,oBAAC;AAAA;AAAA,sBACC,eAAa,WAAW;AAAA,sBACxB,OAAM;AAAA,sBACN,WAAU;AAAA,sBACX;AAAA;AAAA,kBAED;AAAA,mBACF;AAAA,gBACA,8CAAC,eAAY,OAAM,QACjB;AAAA,kBAAC;AAAA;AAAA,oBACC;AAAA,oBACA;AAAA,oBACA,OAAO;AAAA;AAAA,gBACT,GACF;AAAA,gBACA,8CAAC,eAAY,OAAM,cACjB;AAAA,kBAAC;AAAA;AAAA,oBACC;AAAA,oBACA;AAAA,oBACA,OAAO;AAAA;AAAA,gBACT,GACF;AAAA;AAAA;AAAA,UACF;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,iBAAiB,cAAc;AAE/B,SAAS,OAAO;AAAA,EACd;AAAA,EACA;AAAA,EACA;AACF,GAIG;AACD,SACE;AAAA,IAAC;AAAA;AAAA,MACC;AAAA,MACA,UAAU;AAAA,MACV,kBAAkB;AAAA,MAClB,cAAc;AAAA,MACd,cAAc;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN,SAAS;AAAA,UACP,QAAQ;AAAA,YACN,SAAS;AAAA,YACT,UAAU;AAAA,YACV,OAAO;AAAA,YACP,YAAY;AAAA,YACZ,WAAW;AAAA,YACX,cAAc;AAAA,YACd,QAAQ;AAAA,UACV;AAAA,UACA,YAAY;AAAA,YACV,cAAc;AAAA,YACd,cAAc;AAAA,YACd,WAAW;AAAA,UACb;AAAA,UACA,UAAU;AAAA,YACR,SAAS;AAAA,YACT,gBAAgB;AAAA,YAChB,OAAO;AAAA,UACT;AAAA,UACA,OAAO;AAAA,YACL,OAAO;AAAA,YACP,YAAY;AAAA,YACZ,cAAc;AAAA,UAChB;AAAA,UACA,aAAa;AAAA,YACX,cAAc;AAAA,YACd,QAAQ;AAAA,UACV;AAAA,UACA,KAAK;AAAA,YACH,OAAO;AAAA,YACP,QAAQ;AAAA,YACR,cAAc;AAAA,UAChB;AAAA,QACF;AAAA,MACF;AAAA;AAAA,EACF;AAEJ;;;AD/KU,IAAAC,uBAAA;AALV,IAAM,eAAe;AAAA,EACnB;AAAA,IACE,MAAM;AAAA,IACN,KAAK;AAAA,IACL,SAAS;AAAA,IACT,MAAM,8CAAC,8BAAK;AAAA,IACZ,WAAW;AAAA,IACX,aAAa;AAAA,EACf;AAAA,EACA;AAAA,IACE,MAAM;AAAA,IACN,KAAK;AAAA,IACL,SAAS;AAAA,IACT,MAAM,8CAAC,gCAAO;AAAA,IACd,WAAW;AAAA,IACX,aAAa;AAAA,EACf;AAAA,EACA;AAAA,IACE,MAAM;AAAA,IACN,KAAK;AAAA,IACL,SAAS;AAAA,IACT,MAAM,8CAAC,mCAAU;AAAA,IACjB,WAAW;AAAA,IACX,aAAa;AAAA,EACf;AACF;AAEO,IAAM,qBAAwD,CAAC;AAAA,EACpE;AAAA,EACA,OAAO;AAAA,EACP,cAAc;AAChB,MAAM;AACJ,QAAM,CAAC,cAAc,eAAe,IAAU,iBAAS,MAAM;AAC7D,QAAM,EAAE,QAAQ,IAAI,eAAe;AAEnC,QAAM,oBAAoB,CAAC,UAAkB;AAC3C,UAAM,MAAM,iBAAiB,SAAS,UAAU;AAChD,YAAQ,KAAK,KAAK;AAAA,EACpB;AACA,SACE,gFAEG;AAAA,iBAAa,IAAI,CAAC,QACjB;AAAA,MAAC;AAAA;AAAA,QAEC,SAAS,IAAI;AAAA,QACb,SAAS,MAAM,QAAQ,IAAI,GAAG;AAAA,QAC9B,QAAQ,QAAQ,IAAI,IAAI,SAA6B,CAAC;AAAA,QACtD,gBAAgB;AAAA,QAEf,cAAI;AAAA;AAAA,MANA,IAAI;AAAA,IAOX,CACD;AAAA,IACA,eACC;AAAA,MAAC;AAAA;AAAA,QACC,MAAK;AAAA,QACL,OAAO,IAAI;AAAA,QACX,MAAM;AAAA,QACN,UAAU;AAAA,QACV,QAAQ;AAAA,QACR,sBAAsB,MACpB,gBAAgB,iBAAiB,SAAS,eAAe,MAAM;AAAA;AAAA,IAEnE;AAAA,KAEJ;AAEJ;;;AEvDM,IAAAC,uBAAA;AAdC,IAAM,iBAAmD,CAAC;AAAA,EAC/D,YAAY;AACd,MAAM;AACJ,QAAM,OAAO;AACb,QAAM,iBACJ,cAAc,UACV,sNACA;AAEN,SACE;AAAA,IAAC;AAAA;AAAA,MACC,WAAW,wEAAwE,cAAc;AAAA,MAGjG;AAAA,uDAAC,SAAI,WAAU,8CACZ;AAAA,WAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,EAAE,IAAI,CAAC,UAC7B;AAAA,YAAC;AAAA;AAAA,cACC,WAAW,GAAG,IAAI,QAChB,UAAU,IAAI,iBAAiB,YACjC;AAAA;AAAA,YACK;AAAA,UACP,CACD;AAAA,UACD,8CAAC,YAAS,WAAU,oBAAmB;AAAA,WACzC;AAAA,QACA,8CAAC,SAAI,WAAU,kBAAiB;AAAA,QAChC,8CAAC,SAAI,WAAW,GAAG,IAAI,SAAS;AAAA;AAAA;AAAA,EAClC;AAEJ;AAGO,IAAM,aAAuB,MAClC,+CAAC,SAAI,WAAU,kGACb;AAAA,iDAAC,SAAI,WAAU,kBACb;AAAA,kDAAC,UAAK,WAAU,2EAA0E;AAAA,IAC1F,8CAAC,UAAK,WAAU,4EAA2E;AAAA,IAC3F,8CAAC,UAAK,WAAU,mDAAkD;AAAA,KACpE;AAAA,EACA,8CAAC,OAAE,WAAU,sCAAqC,+BAAiB;AAAA,GACrE;AAIK,IAAM,gBAA0B,MACrC,8CAAC,SAAI,WAAU,yFACb,wDAAC,SAAI,WAAU,gFAA+E,GAChG;;;AClDF,IAAAC,UAAuB;AAGvB,IAAAC,wBAAqC;;;ACFrC,yBAAoD;AAM3C,IAAAC,uBAAA;AAJF,SAAS,cAAc,IAGsB;AAHtB,eAC5B;AAAA;AAAA,EANF,IAK8B,IAEzB,kBAFyB,IAEzB;AAAA,IADH;AAAA;AAGA,SAAO,8CAAC,mBAAAC,eAAA,iCAAuB,QAAvB,EAA+B,WAAS;AAClD;;;ACRA,IAAAC,UAAuB;AAavB,IAAAC,wBAAgC;AA4FtB,IAAAC,uBAAA;AAxFH,IAAM,aAAkD,CAAC,OAI1D;AAJ0D,eAC9D;AAAA;AAAA,IACA;AAAA,EArBF,IAmBgE,IAG3D,kBAH2D,IAG3D;AAAA,IAFH;AAAA,IACA;AAAA;AAGA,QAAM,CAAC,OAAO,QAAQ,IAAU,iBAAS,KAAK;AAC9C,QAAM,CAAC,KAAK,MAAM,IAAU,iBAAS,EAAE;AACvC,QAAM,CAAC,QAAQ,SAAS,IAAU,iBAAS,IAAI;AAC/C,QAAM,CAAC,OAAO,QAAQ,IAAU,iBAAS,EAAE;AAC3C,QAAM,CAAC,cAAc,eAAe,IAAU,iBAAS,KAAK;AAC5D,QAAM,EAAE,QAAQ,IAAI,eAAe;AACnC,QAAM,EAAE,KAAK,IAAI,UAAU;AAG3B,EAAM,kBAAU,MAAM;AACpB,UAAM,WAAW,YAAY,MAAM;AAlCvC,UAAAC;AAmCM,YAAM,OAAMA,MAAA,6BAAM,QAAN,gBAAAA,IAAW;AACvB,UAAI,CAAC,IAAK,QAAO,gBAAgB,KAAK;AACtC;AAAA,QACE,QAAQ,IAAI,cAAc,CAAC,IAAI,eAAe,IAAI,SAAS,EAAE,KAAK,CAAC;AAAA,MACrE;AAAA,IACF,GAAG,GAAG;AACN,WAAO,MAAM,cAAc,QAAQ;AAAA,EACrC,GAAG,CAAC,IAAI,CAAC;AAGT,EAAM,kBAAU,MAAM;AA7CxB,QAAAA,KAAAC;AA8CI,QAAI,IAAI,UAAQD,MAAA,6BAAM,QAAN,gBAAAA,IAAW,eAAc;AACvC,YAAM,MAAM,KAAK,IAAI,aAAa;AAClC,YAAM,OAAO,2BAAK;AAClB,YAAM,UAASC,MAAA,6BAAM,kBAAN,gBAAAA,IAAqB,QAAQ;AAC5C,UAAI,OAAQ,QAAO,OAAO,aAAa,MAAM,KAAK,EAAE;AAAA,IACtD,WAAW,CAAC,IAAI,QAAQ,CAAC,OAAO;AAC9B,aAAO,EAAE;AAAA,IACX;AAAA,EACF,GAAG,CAAC,IAAI,MAAM,OAAO,IAAI,CAAC;AAG1B,QAAM,aAAa,CAAC,QAAgB;AAClC,QAAI,CAAC,IAAK,QAAO;AACjB,QAAI;AACF,YAAM,IAAI,IAAI,IAAI,IAAI,WAAW,MAAM,IAAI,MAAM,WAAW,GAAG,EAAE;AACjE,aAAO,CAAC,CAAC,EAAE;AAAA,IACb,SAAQ;AACN,aAAO;AAAA,IACT;AAAA,EACF;AAGA,QAAM,eAAe,MAAM;AApE7B,QAAAD,KAAAC,KAAA;AAqEI,QAAI,CAAC,WAAW,GAAG,GAAG;AACpB,eAAS,0BAA0B;AACnC;AAAA,IACF;AAEA,UAAM,eAAe,IAAI,WAAW,MAAM,IAAI,MAAM,WAAW,GAAG;AAClE,YAAQ,QAAQ,YAAY;AAG5B,UAAM,OAAMD,MAAA,6BAAM,QAAN,gBAAAA,IAAW;AACvB,UAAM,UAAS,MAAAC,MAAA,2BAAK,eAAL,gBAAAA,IAAiB,kBAAjB,mBAAgC,QAAQ;AACvD,QAAI,UAAU,QAAQ;AACpB,aAAO,aAAa,UAAU,QAAQ;AACtC,aAAO,aAAa,OAAO,qBAAqB;AAAA,IAClD;AAEA,uCAAM,QAAN,mBAAW;AACX,aAAS,EAAE;AACX,aAAS,KAAK;AAAA,EAChB;AAEA,QAAM,eAAe,MAAM;AA1F7B,QAAAD;AA2FI,YAAQ,QAAQ;AAChB,KAAAA,MAAA,6BAAM,QAAN,gBAAAA,IAAW;AACX,WAAO,EAAE;AACT,aAAS,KAAK;AAAA,EAChB;AAEA,SACE,+CAAC,gBAAa,MAAM,OAAO,cAAc,UACvC;AAAA,kDAAC,uBAAoB,SAAO,MAC1B;AAAA,MAAC;AAAA;AAAA,QACC,SAAQ;AAAA,QACR,gBAAgB;AAAA,QAChB,eAAa,IAAI;AAAA,QACjB,UAAU,CAAC,gBAAgB,CAAC,IAAI;AAAA,SAC5B,QALL;AAAA,QAOC,wDAAC,8BAAK,WAAU,WAAU;AAAA;AAAA,IAC5B,GACF;AAAA,IAEA;AAAA,MAAC;AAAA;AAAA,QACC,OAAM;AAAA,QACN,WAAU;AAAA,QAGV;AAAA,yDAAC,SAAI,WAAU,qCACb;AAAA,0DAAC,QAAG,WAAU,yCACX,cAAI,OAAO,cAAc,eAC5B;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,SAAQ;AAAA,gBACR,MAAK;AAAA,gBACL,WAAU;AAAA,gBACV,SAAS,MAAM,SAAS,KAAK;AAAA,gBAE7B,wDAAC,2BAAE;AAAA;AAAA,YACL;AAAA,aACF;AAAA,UACA,8CAAC,aAAU;AAAA,UAGX,+CAAC,qBAAkB,WAAU,aAC3B;AAAA,2DAAC,SAAI,WAAU,aACb;AAAA,4DAACE,QAAA,EAAM,SAAQ,OAAM,WAAU,iCAAgC,iBAE/D;AAAA,cACA;AAAA,gBAAC;AAAA;AAAA,kBACC,IAAG;AAAA,kBACH,aAAY;AAAA,kBACZ,OAAO;AAAA,kBACP,UAAU,CAAC,MAAM,OAAO,EAAE,OAAO,KAAK;AAAA,kBACtC,WAAU;AAAA,kBACV,WAAS;AAAA;AAAA,cACX;AAAA,cACC,SACC,8CAAC,OAAE,WAAU,yCAAyC,iBAAM;AAAA,eAEhE;AAAA,YAEA,+CAAC,SAAI,WAAU,0CACb;AAAA;AAAA,gBAACA;AAAA,gBAAA;AAAA,kBACC,SAAQ;AAAA,kBACR,WAAU;AAAA,kBACX;AAAA;AAAA,cAED;AAAA,cACA,8CAAC,UAAO,IAAG,WAAU,SAAS,QAAQ,iBAAiB,WAAW;AAAA,eACpE;AAAA,aACF;AAAA,UAEA,8CAAC,aAAU;AAAA,UAGX,+CAAC,SAAI,WAAU,6BACZ;AAAA,gBAAI,QACH;AAAA,cAAC;AAAA;AAAA,gBACC,SAAQ;AAAA,gBACR,MAAK;AAAA,gBACL,WAAU;AAAA,gBACV,SAAS;AAAA,gBAET;AAAA,gEAAC,gCAAO,WAAU,WAAU;AAAA,kBAAE;AAAA;AAAA;AAAA,YAEhC;AAAA,YAEF,+CAAC,SAAI,WAAU,sBACb;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,SAAQ;AAAA,kBACR,MAAK;AAAA,kBACL,SAAS,MAAM,SAAS,KAAK;AAAA,kBAC7B,WAAU;AAAA,kBACX;AAAA;AAAA,cAED;AAAA,cACA;AAAA,gBAAC;AAAA;AAAA,kBACC,MAAK;AAAA,kBACL,UAAU,CAAC,IAAI,KAAK;AAAA,kBACpB,SAAS;AAAA,kBACT,WAAU;AAAA,kBAET,cAAI,OAAO,WAAW;AAAA;AAAA,cACzB;AAAA,eACF;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,KACF;AAEJ;;;ACpMA,IAAAC,UAAuB;;;ACAvB,IAAAC,UAAuB;AAUvB,IAAAC,wBAQO;AAGP,mBAAkB;AA2KN,IAAAC,uBAAA;AA3JL,IAAM,aAAwC,CAAC;AAAA,EACpD;AAAA,EACA;AAAA,EACA,UAAU;AAAA,EACV,WAAW;AAAA,EACX;AAAA,EACA;AACF,MAAM;AACJ,QAAM,CAAC,aAAa,cAAc,IAAU,iBAAS,KAAK;AAC1D,QAAM,CAAC,QAAQ,SAAS,IAAU,iBAAwB,CAAC,CAAC;AAC5D,QAAM,CAAC,eAAe,gBAAgB,IAAU,iBAAS,IAAI;AAC7D,QAAM,CAAC,gBAAgB,iBAAiB,IAAU,iBAAS,CAAC;AAC5D,QAAM,CAAC,aAAa,cAAc,IAAU,iBAAS,EAAE;AACvD,QAAM,CAAC,UAAU,WAAW,IAAU,iBAA0B,MAAM;AACtE,QAAM,CAAC,YAAY,aAAa,IAAU,iBAAS,KAAK;AACxD,QAAM,CAAC,gBAAgB,gBAAgB,IAAU;AAAA,IAC/C,WAAW,CAAC,QAAQ,IAAI,CAAC;AAAA,EAC3B;AAEA,QAAM,iBAAiB,OAAO;AAAA,IAC5B,CAAC,QACC,IAAI,IAAI,YAAY,EAAE,SAAS,YAAY,YAAY,CAAC,KACxD,IAAI,IAAI,YAAY,EAAE,SAAS,YAAY,YAAY,CAAC;AAAA,EAC5D;AAGA,EAAM,kBAAU,MAAM;AACpB,qBAAiB,IAAI;AACrB,eAAW,MAAM;AACf,gBAAU;AAAA,QACR;AAAA,UACE,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,QACA;AAAA,UACE,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,QACA;AAAA,UACE,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,QACA;AAAA,UACE,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,QACA;AAAA,UACE,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,QACA;AAAA,UACE,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,QACA;AAAA,UACE,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,QACA;AAAA,UACE,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,MACF,CAAC;AACD,uBAAiB,KAAK;AAAA,IACxB,GAAG,GAAI;AAAA,EACT,GAAG,CAAC,CAAC;AAGL,QAAM,eAAe,CAAC,MAA2C;AA3GnE;AA4GI,UAAM,QAAO,OAAE,OAAO,UAAT,mBAAiB;AAC9B,QAAI,CAAC,KAAM;AACX,QAAI,KAAK,OAAO,UAAU,OAAO;AAC/B,aAAO,MAAM,eAAe,OAAO,IAAI;AACzC,QAAI,CAAC,KAAK,KAAK,WAAW,QAAQ;AAChC,aAAO,MAAM,6BAA6B;AAE5C,mBAAe,IAAI;AACnB,sBAAkB,CAAC;AAEnB,UAAM,WAAW,YAAY,MAAM;AACjC,wBAAkB,CAAC,SAAS;AAC1B,YAAI,QAAQ,IAAI;AACd,wBAAc,QAAQ;AACtB,iBAAO;AAAA,QACT;AACA,eAAO,OAAO;AAAA,MAChB,CAAC;AAAA,IACH,GAAG,GAAG;AAEN,UAAM,SAAS,IAAI,WAAW;AAC9B,WAAO,SAAS,MAAM;AACpB,iBAAW,MAAM;AACf,cAAM,SAAS,OAAO;AACtB,cAAM,QAAQ;AAAA,UACZ,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAEA,6DAAmB,CAAC,SAAS,CAAC,GAAG,MAAM,KAAK;AAC5C,uBAAe,KAAK;AACpB,0BAAkB,GAAG;AACrB,sBAAc,QAAQ;AAAA,MACxB,GAAG,IAAI;AAAA,IACT;AACA,WAAO,cAAc,IAAI;AAAA,EAC3B;AAGA,QAAM,aAAa,CAAC,MAAuB;AACzC,MAAE,eAAe;AACjB,MAAE,gBAAgB;AAClB,QAAI,EAAE,SAAS,eAAe,EAAE,SAAS,WAAY,eAAc,IAAI;AACvE,QAAI,EAAE,SAAS,YAAa,eAAc,KAAK;AAAA,EACjD;AAGA,QAAM,oBAAoB,CAAC,QAAqB;AAC9C,QAAI,UAAU;AACZ;AAAA,QAAiB,CAAC,SAChB,KAAK,SAAS,GAAG,IACb,KAAK,OAAO,CAAC,SAAS,KAAK,QAAQ,IAAI,GAAG,IAC1C,CAAC,GAAG,MAAM,GAAG;AAAA,MACnB;AAAA,IACF,OAAO;AACL,uBAAiB,CAAC,GAAG,CAAC;AAAA,IACxB;AAAA,EACF;AAEA,QAAM,aAAa,CAAC,MAAuB;AACzC,MAAE,eAAe;AACjB,MAAE,gBAAgB;AAClB,kBAAc,KAAK;AACnB,UAAM,QAAQ,EAAE,aAAa;AAC7B,QAAI,+BAAQ,IAAI;AACd,YAAM,QAAQ;AAAA,QACZ,QAAQ,EAAE,MAAM;AAAA,MAClB;AACA,mBAAa,KAAK;AAAA,IACpB;AAAA,EACF;AAEA,QAAM,aAAa,CAAC,QAAqB;AACvC,WAAO,eAAe,KAAK,CAAC,OAAM,uBAAG,UAAQ,2BAAK,IAAG;AAAA,EACvD;AAEA,SACE,8CAAC,SAAI,WAAU,2BAEb,yDAAC,UAAO,MAAY,cAAc,SAChC;AAAA,kDAAC,iBAAc,SAAO,MACpB;AAAA,MAAC;AAAA;AAAA,QACC,SAAQ;AAAA,QACR,gBAAe;AAAA,QACf,eAAa;AAAA,QAEb,wDAAC,mCAAU,WAAU,WAAU;AAAA;AAAA,IACjC,GACF;AAAA,IAEA,+CAAC,iBAAc,WAAU,oFAEvB;AAAA,qDAAC,gBAAa,WAAU,gEACtB;AAAA,sDAAC,eAAY,WAAU,yBAAwB,oCAE/C;AAAA,QAEA,+CAAC,SAAI,WAAU,gDAEb;AAAA,yDAAC,SAAI,WAAU,mBACb;AAAA,0DAAC,gCAAO,WAAU,0EAAyE;AAAA,YAC3F;AAAA,cAAC;AAAA;AAAA,gBACC,MAAK;AAAA,gBACL,aAAY;AAAA,gBACZ,OAAO;AAAA,gBACP,UAAU,CAAC,MAAM,eAAe,EAAE,OAAO,KAAK;AAAA,gBAC9C,WAAU;AAAA;AAAA,YACZ;AAAA,aACF;AAAA,UAGA,+CAAC,SAAI,WAAU,0DACb;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,SAAQ;AAAA,gBACR,MAAK;AAAA,gBACL,SAAS,MAAM,YAAY,MAAM;AAAA,gBACjC,eAAa,aAAa;AAAA,gBAC1B,WAAW;AAAA,kBACT;AAAA,gBACF;AAAA,gBAEA,wDAAC,iCAAQ,WAAU,WAAU;AAAA;AAAA,YAC/B;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,SAAQ;AAAA,gBACR,MAAK;AAAA,gBACL,SAAS,MAAM,YAAY,MAAM;AAAA,gBACjC,eAAa,aAAa;AAAA,gBAC1B,WAAW;AAAA,kBACT;AAAA,gBACF;AAAA,gBAEA,wDAAC,8BAAK,WAAU,WAAU;AAAA;AAAA,YAC5B;AAAA,aACF;AAAA,WACF;AAAA,SACF;AAAA,MAGA,+CAAC,SAAI,WAAU,sDAEb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAW;AAAA,cACT;AAAA,cACA,aACI,gCACA;AAAA,cACJ,eAAe;AAAA,YACjB;AAAA,YACA,aAAa;AAAA,YACb,aAAa;AAAA,YACb,YAAY;AAAA,YACZ,QAAQ;AAAA,YAEP,WAAC,cACA,gFACE;AAAA,4DAAC,gCAAO,WAAU,6BAA4B;AAAA,cAC9C,8CAAC,OAAE,WAAU,eAAc,gDAE3B;AAAA,cACA,+CAAC,OAAE,WAAU,iCAAgC;AAAA;AAAA,gBACrB;AAAA,gBAAQ;AAAA,iBAChC;AAAA,cACA;AAAA,gBAAC;AAAA;AAAA,kBACC,MAAK;AAAA,kBACL,QAAO;AAAA,kBACP,UAAU;AAAA,kBACV,WAAU;AAAA;AAAA,cACZ;AAAA,eACF,IAEA,+CAAC,SAAI,WAAU,wCACb;AAAA,4DAAC,iCAAQ,WAAU,uCAAsC;AAAA,cACzD,8CAAC,SAAI,WAAU,kDACb;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,OAAO,EAAE,OAAO,GAAG,cAAc,IAAI;AAAA;AAAA,cACvC,GACF;AAAA,cACA,+CAAC,OAAE,WAAU,iCAAgC;AAAA;AAAA,gBAC7B;AAAA,gBAAe;AAAA,iBAC/B;AAAA,eACF;AAAA;AAAA,QAEJ;AAAA,QAGA,+CAAC,SAAI,WAAU,iBACb;AAAA,wDAAC,OAAE,WAAU,kDAAiD,8BAE9D;AAAA,UACC,gBACC;AAAA,YAAC;AAAA;AAAA,cACC,WAAW;AAAA,gBACT;AAAA,gBACA,aAAa,SAAS,qBAAqB;AAAA,cAC7C;AAAA,cAEC,WAAC,GAAG,MAAM,CAAC,CAAC,EAAE;AAAA,gBAAI,CAAC,GAAG,MACrB,aAAa,SACX,8CAAC,YAAiB,WAAU,qBAAb,CAA+B,IAE9C,+CAAC,SAAY,WAAU,2BACrB;AAAA,gEAAC,YAAS,WAAU,wBAAuB;AAAA,kBAC3C,8CAAC,YAAS,WAAU,cAAa;AAAA,qBAFzB,CAGV;AAAA,cAEJ;AAAA;AAAA,UACF,IACE,eAAe,WAAW,IAC5B,+CAAC,SAAI,WAAU,sEACb;AAAA,0DAAC,mCAAU,WAAU,6BAA4B;AAAA,YACjD,8CAAC,OAAE,6BAAe;AAAA,aACpB,IAEA;AAAA,YAAC;AAAA;AAAA,cACC,WAAW;AAAA,gBACT;AAAA,gBACA,aAAa,SACT,mDACA;AAAA,cACN;AAAA,cAEC,yBAAe,IAAI,CAAC,KAAK,MACxB;AAAA,gBAAC;AAAA;AAAA,kBAEC,SAAS,MAAM,kBAAkB,GAAG;AAAA,kBACpC,WAAW;AAAA,oBACT;AAAA,oBACA,WAAW,GAAG,IACV,4CACA;AAAA,oBACJ,aAAa,UAAU;AAAA,kBACzB;AAAA,kBAEA;AAAA,oBAAC;AAAA;AAAA,sBACC,WAAW;AAAA,wBACT;AAAA,wBACA,aAAa,UAAU;AAAA,sBACzB;AAAA,sBAEA;AAAA;AAAA,0BAAC;AAAA;AAAA,4BACC,WAAW;AAAA,8BACT;AAAA,8BACA,aAAa,SAAS,kBAAkB;AAAA,8BACxC;AAAA,4BACF;AAAA,4BAEA;AAAA,8BAAC,aAAAC;AAAA,8BAAA;AAAA,gCACC,OAAO;AAAA,gCACP,QAAQ;AAAA,gCACR,SAAQ;AAAA,gCACR,KAAK,IAAI;AAAA,gCACT,KAAK,SAAS,CAAC;AAAA,gCACf,WAAU;AAAA;AAAA,4BACZ;AAAA;AAAA,wBACF;AAAA,wBACC,WAAW,GAAG,KACb,8CAAC,SAAI,WAAU,mFACb,wDAAC,+BAAM,WAAU,WAAU,GAC7B;AAAA,wBAED,CAAC,WAAW,GAAG,KACd,8CAAC,SAAI,WAAU,4KACb,wDAAC,+BAAM,WAAU,WAAU,GAC7B;AAAA,wBAED,aAAa,UACZ,+CAAC,SAAI,WAAU,kBACb;AAAA,yEAAC,OAAE,WAAU,gCAA+B;AAAA;AAAA,4BACnC,IAAI;AAAA,6BACb;AAAA,0BACA,8CAAC,OAAE,WAAU,0CACV,cAAI,IAAI,MAAM,GAAG,EAAE,IAAI,GAC1B;AAAA,2BACF;AAAA;AAAA;AAAA,kBAEJ;AAAA;AAAA,gBApDK;AAAA,cAqDP,CACD;AAAA;AAAA,UACH;AAAA,WAEJ;AAAA,SACF;AAAA,MAGA,+CAAC,SAAI,WAAU,iGACb;AAAA,sDAAC,UAAK,WAAU,iCACb,yBAAe,SAAS,IACvB,+CAAC,UAAK,WAAU,2BACd;AAAA,wDAAC,+BAAM,WAAU,0BAAyB;AAAA,UAAE;AAAA,UAC7B;AAAA,UACf,8CAAC,UAAK,WAAU,2BACb,yBAAe,QAClB;AAAA,WACF,IAEA,qBAEJ;AAAA,QACA,+CAAC,SAAI,WAAU,cACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,SAAQ;AAAA,cACR,MAAK;AAAA,cACL,SAAS,MAAM,mCAAU,CAAC;AAAA,cAC3B;AAAA;AAAA,UAED;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,MAAK;AAAA,cACL,SAAQ;AAAA,cACR,UAAU,CAAC,eAAe,UAAU;AAAA,cACpC,SAAS,MAAM;AACb,qDAAW;AACX,mDAAU,CAAC;AAAA,cACb;AAAA,cACA,WAAU;AAAA,cAET,wBACC,gFACE;AAAA,8DAAC,iCAAQ,WAAU,wBAAuB;AAAA,gBAAE;AAAA,iBAC9C,IAEA;AAAA;AAAA,UAEJ;AAAA,WACF;AAAA,SACF;AAAA,OACF;AAAA,KACF,GACF;AAEJ;;;AD1aA,IAAAC,wBAA0B;AA6DhB,IAAAC,uBAAA;AArDH,IAAM,mBAA+C,CAAC;AAAA,EAC3D;AAAA,EACA;AACF,MAAM;AACJ,QAAM,CAAC,OAAO,QAAQ,IAAU,iBAAkB,KAAK;AACvD,QAAM,CAAC,MAAM,OAAO,IAAU,iBAAmB,CAAC,EAAE,CAAC;AACrD,QAAM,CAAC,MAAM,OAAO,IAAU,iBAAmB,CAAC,EAAE,CAAC;AACrD,QAAM,EAAE,QAAQ,IAAI,eAAe;AAEnC,QAAM,WAAW,MAAM;AACrB,YAAQ,CAAC,SAAS,CAAC,GAAG,MAAM,EAAE,CAAC;AAC/B,YAAQ,CAAC,SAAS,CAAC,GAAG,MAAM,EAAE,CAAC;AAAA,EACjC;AAEA,QAAM,eAAe,CAAC,GAAW,MAAqB,UAAkB;AACtE,QAAI,SAAS,OAAO;AAClB,YAAM,UAAU,CAAC,GAAG,IAAI;AACxB,cAAQ,CAAC,IAAI;AACb,cAAQ,OAAO;AAAA,IACjB,OAAO;AACL,YAAM,UAAU,CAAC,GAAG,IAAI;AACxB,cAAQ,CAAC,IAAI;AACb,cAAQ,OAAO;AAAA,IACjB;AAAA,EACF;AAEA,QAAM,eAAe,MAAM;AACzB,UAAM,SAAS,KACZ,IAAI,CAAC,GAAG,OAAO,EAAE,KAAK,EAAE,KAAK,GAAG,KAAK,KAAK,CAAC,EAAE,KAAK,EAAE,EAAE,EACtD,OAAO,CAAC,QAAQ,IAAI,GAAG;AAE1B,QAAI,CAAC,OAAO,OAAQ;AAEpB,QAAI,OAAO,WAAW,GAAG;AACvB,cAAQ,gBAAgB,OAAO,CAAC,EAAE,KAAK,OAAO,CAAC,EAAE,IAAI;AAAA,IACvD,OAAO;AACL,cAAQ,gBAAgB,MAAM;AAAA,IAChC;AAGA,YAAQ,CAAC,EAAE,CAAC;AACZ,YAAQ,CAAC,EAAE,CAAC;AACZ,aAAS,KAAK;AAAA,EAChB;AAEA,SAAO,CAAC,QACN,+CAAC,gBAAa,MAAM,OAAO,cAAc,UACvC;AAAA,kDAAC,uBAAoB,SAAO,MAC1B;AAAA,MAAC;AAAA;AAAA,QACC,gBAAe;AAAA,QACf,QAAQ;AAAA,QACR,SAAQ;AAAA,QAER,wDAAC,mCAAU,WAAU,WAAU;AAAA;AAAA,IACjC,GACF;AAAA,IAEA;AAAA,MAAC;AAAA;AAAA,QACC,OAAM;AAAA,QACN,WAAU;AAAA,QAEV;AAAA,wDAAC,qBAAkB,WAAU,sCAAqC,8BAElE;AAAA,UACA,8CAAC,yBAAsB,WAAU,QAAO;AAAA,UAEvC,KAAK,IAAI,CAAC,KAAK,MACd,+CAAC,qBAA0B,WAAU,aACnC;AAAA,2DAACC,QAAA,EAAM;AAAA;AAAA,cAAW,KAAK,SAAS,IAAI,IAAI,IAAI;AAAA,eAAG;AAAA,YAC/C;AAAA,cAAC;AAAA;AAAA,gBACC,aAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,OAAO;AAAA,gBACP,UAAU,CAAC,MAAM,aAAa,GAAG,OAAO,EAAE,OAAO,KAAK;AAAA;AAAA,YACxD;AAAA,YACA,8CAACA,QAAA,EAAM,sBAAQ;AAAA,YACf;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,aAAY;AAAA,gBACZ,OAAO,KAAK,CAAC;AAAA,gBACb,UAAU,CAAC,MAAM,aAAa,GAAG,OAAO,EAAE,OAAO,KAAK;AAAA;AAAA,YACxD;AAAA,eAdsB,CAexB,CACD;AAAA,UAED;AAAA,YAAC;AAAA;AAAA,cACC,SAAQ;AAAA,cACR,WAAU;AAAA,cACV,MAAK;AAAA,cACL,SAAS;AAAA,cACV;AAAA;AAAA,UAED;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,SAAS;AAAA,cACT,SAAQ;AAAA,cACR,MAAK;AAAA,cACL,WAAU;AAAA,cACX;AAAA;AAAA,gBACc,KAAK,SAAS,IAAI,MAAM;AAAA;AAAA;AAAA,UACvC;AAAA;AAAA;AAAA,IACF;AAAA,KACF,IAEA;AAAA,IAAC;AAAA;AAAA,MACC,MAAM;AAAA,MACN,UAAU;AAAA,MACV,SAAS;AAAA,MACT,UAAU,CAAC,WAAW;AACpB,gBAAQ,IAAI,MAAM;AAGlB,YAAI,OAAO,WAAW,GAAG;AACvB,gBAAM,MAAM,OAAO,CAAC;AACpB,kBAAQ,eAAe,2BAAK,KAAK,2BAAK,GAAG;AAAA,QAC3C,OAAO;AACL,kBAAQ,gBAAgB,MAAM;AAAA,QAChC;AAAA,MACF;AAAA;AAAA,EACF;AAEJ;;;AHvFU,IAAAC,uBAAA;AAjCH,IAAM,eAA4C,CAAC;AAAA,EACxD;AAAA,EACA;AAAA,EACA,YAAY;AAAA,EACZ,QAAQ;AACV,MAAM;AACJ,QAAM,EAAE,WAAW,IAAI,IAAI,UAAU;AACrC,QAAM,CAAC,OAAO,QAAQ,IAAU,iBAA6B,IAAI;AAEjE,EAAM,kBAAU,MAAM;AACpB,UAAM,YAAY,MAAM;AAlC5B;AAmCM,YAAI,eAAU,YAAV,mBAAmB,kBAAiB,CAAC,OAAO;AAC9C,iBAAS,IAAI,YAAY,UAAU,QAAQ,aAAa,CAAC;AAAA,MAC3D;AAAA,IACF;AAEA,cAAU;AACV,UAAM,QAAQ,YAAY,WAAW,GAAG;AAExC,WAAO,MAAM;AACX,oBAAc,KAAK;AAAA,IACrB;AAAA,EACF,GAAG,CAAC,WAAW,KAAK,CAAC;AAErB,SACE;AAAA,IAAC;AAAA;AAAA,MACC,WAAU;AAAA,MACV,cAAa;AAAA,MACb,cAAY;AAAA,MACZ,2BAAyB;AAAA,MAEzB,yDAAC,kBAAe,WAAU,yIACxB;AAAA,sDAAC,gBACC,wDAAC,kBAAe,KAAU,MAAK,MAAK,GACtC;AAAA,QAEA,8CAAC,0BAAuB;AAAA,QAExB,+CAAC,gBACE;AAAA,uBACC,+EACE;AAAA,YAAC;AAAA;AAAA,cACC,gBAAe;AAAA,cACf,SAAQ;AAAA,cACR,WAAU;AAAA,cAEV,wDAAC,kCAAS,WAAU,WAAU;AAAA;AAAA,UAChC,GACF;AAAA,UAEF,8CAAC,qBAAkB,KAAU,MAAK,MAAK,QAAgB;AAAA,WACzD;AAAA,QAEA,8CAAC,0BAAuB;AAAA,QAExB,8CAAC,gBACC,wDAAC,sBAAmB,KAAU,MAAK,MAAK,GAC1C;AAAA,QAEA,8CAAC,0BAAuB;AAAA,QAExB,+CAAC,gBACC;AAAA,wDAAC,uBAAoB,KAAU,MAAK,MAAK;AAAA,UACzC,8CAAC,wBAAqB,MAAK,MAAK,KAAU;AAAA,UAC1C,8CAAC,sBAAmB,KAAU,MAAK,MAAK;AAAA,WAC1C;AAAA,QAEA,8CAAC,0BAAuB;AAAA,QAExB,+CAAC,gBACC;AAAA,wDAAC,cAAW,MAAK,MAAK,KAAU;AAAA,UAChC,8CAAC,qCAAqB,MAAO;AAAA,UAC7B;AAAA,YAAC;AAAA;AAAA,cACC,SAAQ;AAAA,cACR,MAAK;AAAA,cACL,UAAU,CAAC,MAAc,SAAiB;AAnGtD;AAoGc,sBAAM,OAAM,eAAU,YAAV,mBAAmB;AAC/B,sBAAM,QAAO,gCAAK,aAAL,mBAAe;AAC5B,6CAAM;AACN,qDAAO,YAAY,MAAM,UAAzB,mBAAgC;AAAA,cAClC;AAAA;AAAA,UACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,gBAAe;AAAA,cACf,SAAQ;AAAA,cACR,SAAS,MAAG;AA7GxB;AA6G2B,4DAAO,WAAW,YAAlB,mBAA2B;AAAA;AAAA,cAE1C,wDAAC,+BAAM,WAAU,WAAU;AAAA;AAAA,UAC7B;AAAA,WACF;AAAA,QAEA,8CAAC,0BAAuB;AAAA,QAEvB,SACC,8CAAC,gBACC;AAAA,UAAC;AAAA;AAAA,YACC,gBAAe;AAAA,YACf,SAAQ;AAAA,YACR,SAAS,MAAG;AA1H1B;AA0H6B,0DAAO,YAAP,mBAAgB;AAAA;AAAA,YAC/B,SAAQ;AAAA,YAER,wDAAC,6BAAI,WAAU,WAAU;AAAA;AAAA,QAC3B,GACF;AAAA,SAEJ;AAAA;AAAA,EACF;AAEJ;;;A3BrEe,IAAAC,uBAAA;AA3CR,IAAM,iBAAgD,CAAC;AAAA,EAC5D;AAAA,EACA,SAAS;AAAA,EACT;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,QAAQ;AAAA,IACN,QAAQ;AAAA,IACR,QAAQ;AAAA,MACN,OAAO;AAAA,MACP,QAAQ;AAAA,IACV;AAAA,IACA,QAAQ;AAAA,EACV;AAAA,EACA;AACF,MAAM;AACJ,QAAM,CAAC,SAAS,UAAU,IAAU,iBAAS,KAAK;AAElD,EAAM,kBAAU,MAAM;AACpB,UAAM,SAAS,YAAY,MAAM;AAC/B,iBAAW,IAAI;AAAA,IACjB,GAAG,GAAG;AACN,UAAM,aAAa,MAAM,cAAc,MAAM;AAC7C,WAAO,iBAAiB,QAAQ,UAAU;AAC1C,WAAO,MAAM;AACX,oBAAc,MAAM;AACpB,aAAO,oBAAoB,QAAQ,UAAU;AAAA,IAC/C;AAAA,EACF,GAAG,CAAC,CAAC;AAEL,QAAM,sBAA4B;AAAA,IAChC,CAAC,UAAsB;AACrB,UAAI,OAAO;AACT,6CAAW;AAAA,MACb;AAAA,IACF;AAAA,IACA,CAAC,QAAQ;AAAA,EACX;AAEA,MAAI,CAAC,SAAS;AACZ,YAAQ,QAAQ;AAAA,MACd,KAAK;AACH,eAAO,8CAAC,kBAAe,WAAU,SAAQ;AAAA,MAC3C,KAAK;AACH,eAAO,8CAAC,kBAAe;AAAA,MACzB,KAAK;AACH,eAAO,8CAAC,cAAW;AAAA,MACrB;AACE,eAAO,8CAAC,iBAAc;AAAA,IAC1B;AAAA,EACF;AAEA,SACE;AAAA,IAAC;AAAA;AAAA,MACC;AAAA,MACA;AAAA,MACA,UAAU;AAAA,MACV;AAAA,MACA;AAAA,MACA;AAAA,MAEA,wDAAC,iCAAiB,QAAS;AAAA;AAAA,EAC7B;AAEJ;","names":["React","sel","_a","React","import_jsx_runtime","import_jsx_runtime","import_jsx_runtime","React","import_jsx_runtime","_a","import_lucide_react","import_jsx_runtime","React","import_lucide_react","import_jsx_runtime","import_lucide_react","import_jsx_runtime","import_jsx_runtime","import_jsx_runtime","Label","import_jsx_runtime","import_jsx_runtime","import_jsx_runtime","import_jsx_runtime","React","import_lucide_react","import_jsx_runtime","import_lucide_react","React","import_jsx_runtime","_","React","import_lucide_react","import_jsx_runtime","_a","React","import_lucide_react","import_jsx_runtime","React","import_lucide_react","React","import_lucide_react","import_jsx_runtime","import_jsx_runtime","import_jsx_runtime","React","import_lucide_react","import_jsx_runtime","NextThemesProvider","React","import_lucide_react","import_jsx_runtime","_a","_b","Label","React","React","import_lucide_react","import_jsx_runtime","Image","import_lucide_react","import_jsx_runtime","Label","import_jsx_runtime","import_jsx_runtime"]}